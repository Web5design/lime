/* Lime Player 2.1.0 - Linked Media Player
by Szaby Gruenwald, Cristian Bara and the ConnectMe Project.
Available under the Apache License, Version 2.0
See http://connectme.sti2.org/ for more information.
*/function Utils(){}!function(){window.LIMEPlayer=function(){function a(a){var b,c,d=this;return b=new CMF("http://connectme.salzburgresearch.at/CMF"),c={containerDiv:"mainwrapper",videoPlayerSize:{width:640,height:360},preferredLanguage:"en",annotations:[],annotFrameworkURL:"http://connectme.salzburgresearch.at/CMF/",plugins:{TestPlugin:{}},pauseOnWidgetopen:!0,activeWidgetTypes:null,fullscreen:!1,widgetVisibility:"scrolling-list",hidingDelay:2e3,widgetContainers:[{element:jQuery("#widget-container-1"),options:null}],annotationsVisible:!0,debug:!1,local:!1,builtinPlugins:{AnnotationOverlays:{},LDPlugin:{}},widget:{}},this.options=jQuery.extend(c,a),this.el="string"==typeof this.options.containerDiv?jQuery("#"+this.options.containerDiv):jQuery(this.options.containerDiv),1!==this.el.length?(console.error("LIMEPlayer options.containerDiv has to be a DOM element or the ID of a DOM element.",this.options.containerDiv),void 0):(this.widgets=[],this.widgetContainers=this.options.widgetContainers,this.cmf=new CMF(this.options.annotFrameworkURL),this._initVideoPlayer(function(){return d._loadAnnotations(function(){return d._initPlugins(function(){return d._startScheduler()})})}),void 0)}return a.prototype._startScheduler=function(){var a=this;return jQuery(this).bind("timeupdate",function(b){var c,d,e,f,g,h,i;for(e=b.currentTime||a.player.currentTime(),d=a.player.currentSource(),h=a.annotations,i=[],f=0,g=h.length;g>f;f++)c=h[f],-1!==d.indexOf(a._getFilename(c.fragment.value))?("inactive"===c.state&&c.start<=e&&c.end+1>e&&(c.state="active",jQuery(c).trigger(jQuery.Event("becomeActive",{annotation:c}))),"active"===c.state&&(c.start>e||c.end+1<e)?(c.state="inactive",i.push(jQuery(c).trigger(jQuery.Event("becomeInactive",{annotation:c})))):i.push(void 0)):i.push(void 0);return i})},a.prototype._initVideoPlayer=function(a){var b,c,d,e,f,g,h=this;for(b="",g=this.options.video,c=e=0,f=g.length;f>e;c=++e)d=g[c],b+="<source src='"+d.source+"' type='"+d.type+"' />";return this.el.append("<div class='videowrapper' id='videowrapper'>\n  <video id='video_player' class='video-js vjs-default-skin' controls preload='metadata' width='"+this.options.videoPlayerSize.width+"' height='"+this.options.videoPlayerSize.height+"' poster='img/connectme-video-poster.jpg'>\n    "+b+"\n  </video>\n</div>"),this.videoEl=jQuery("video",this.el),console.info("Initializing the player"),window.LIMEPlayer.VideoPlayerInit(this.videoEl[0],{},function(b,c){return b?(console.info(b),void 0):(console.info("Player initialized"),h.player=c,h._initEventListeners(),h.fullscreenWidgetContainer=jQuery("<div class='fullscreen-annotation-wrapper'></div>"),h.player.videoOverlay.append(h.fullscreenWidgetContainer),a())})},a.prototype._initEventListeners=function(){var a=this;return jQuery(this.player).bind("timeupdate",function(){var b;return b=jQuery.Event("timeupdate",{currentTime:a.player.currentTime()}),jQuery(a).trigger(b)}),jQuery(this.player).bind("fullscreenchange",function(b){return a._moveWidgets(b.isFullScreen)}),this.initKeyEventsHandlers()},a.prototype.filterVisibleWidgets=function(a){var b,c,d,e,f,g;for(this.options.activeWidgetTypes=a,f=this.plugins,g=[],d=0,e=f.length;e>d;d++)b=f[d],g.push(function(){var a,d,e,f;for(e=b.widgets,f=[],a=0,d=e.length;d>a;a++)c=e[a],c.isActive?f.push(this.options.widgetVisibility()):f.push(void 0);return f}.call(this));return g},a.prototype.getHiddenWidgetTypes=function(){return JSON.parse(localStorage.getItem("hiddenWidgetTypes"))||[]},a.prototype.updateDeactivatedWidgetStates=function(a){var b,c,d,e,f,g;for(f=this.widgets,g=[],d=0,e=f.length;e>d;d++)b=f[d],c=b.options.type,-1!==a.indexOf(c)?g.push(b.element.removeClass("deactivated")):g.push(b.element.addClass("deactivated"));return g},a.prototype.updateWidgetsList=_.throttle(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;for(g=_.sortBy(this.widgets,function(a){return a.options.sortBy()}),l=this.widgetContainers,m=[],h=0,j=l.length;j>h;h++){if(a=l[h],!jQuery(a).data().sorted){for(f=jQuery(a).find(".lime-widget"),g=_.sortBy(this.widgets,function(a){var b;return null!=(b=jQuery(a).data().widget)?b.options.sortBy():void 0}),i=0,k=g.length;k>i;i++)b=g[i],jQuery(a).prepend(b);jQuery(a).data("sorted",!0)}"scrolling-list"===this.options.widgetVisibility?(c=_.detect(jQuery(a.element).children(),function(a){var b;return b=jQuery(a).data().widget,null!=b?b.isActive():void 0}),c?(jQuery(c).parent().scrollTo(c),jQuery(".nav-selected").removeClass("nav-selected"),m.push(jQuery(c).addClass("nav-selected"))):m.push(void 0)):m.push(function(){var b,c,f,g;for(f=jQuery(a.element).children(),g=[],b=0,c=f.length;c>b;b++)e=f[b],d=jQuery(e).data().widget,d.isActive()?g.push(void 0):g.push(d.hide());return g}())}return m},100),a.prototype.initKeyEventsHandlers=function(){var a=this;return jQuery(window).keydown(function(b){var c,d;if(a.activeWidget){switch(c=null,b.keyCode){case 37:c=jQuery.Event("leftarrow");break;case 38:c=jQuery.Event("uparrow");break;case 39:c=jQuery.Event("rightarrow");break;case 40:c=jQuery.Event("downarrow");break;case 13:c=jQuery.Event("select");break;case 178:c=jQuery.Event("stop");break;case 179:case 32:c=jQuery.Event("playpause")}if(c&&jQuery(a.activeWidget).trigger(c),jQuery(a.activeWidget).trigger(b),27===b.keyCode&&(null!=(d=a.modalContainer)?d.is(":visible"):void 0))return history.pushState?history.back():a.modalContainer.trigger(jQuery.Event("close"))}}),this.claimKeyEvents(this),jQuery(window).bind("popstate",function(){var b;return(null!=(b=a.modalContainer)?b.is(":visible"):void 0)?a.modalContainer.trigger(jQuery.Event("close")):void 0}),jQuery(this).bind("downarrow",function(){var b,c,d,e,f;return console.info("lime is the active widget and down arrow was pressed"),c=jQuery(".lime-widget:not(.inactive)"),b=c.filter(".nav-selected"),f=c.length,d=c.index(b),e=f===d+1?0:d+1,b=jQuery(c[e]),a.navActivateWidget(b)}),jQuery(this).bind("uparrow",function(){var b,c,d,e,f;return console.info("lime is the active widget and up arrow was pressed",jQuery(".lime-widget:not(.inactive)")),c=jQuery(".lime-widget:not(.inactive)"),b=c.filter(".nav-selected"),f=c.length,d=c.index(b),e=0===d?f-1:d-1,b=jQuery(c[e]),a.navActivateWidget(b)}),jQuery(this).bind("select",function(){var a,b;return console.info("lime is the active widget and select was pressed",jQuery(".lime-widget:not(.inactive)")),b=jQuery(".lime-widget:not(.inactive)"),a=b.filter(".nav-selected"),a.trigger("click")}),jQuery(this).bind("playpause",function(){return a.player.paused()?a.player.play():a.player.pause()}),jQuery(this).bind("rightarrow",function(){var b,c,d;return b=a.player.currentTime(),d=_(a.annotations).filter(function(a){return a.start>b}),c=_(d).min(function(a){return a.start}),a.player.seek(c.start),jQuery(a.player).trigger("timeupdate")}),jQuery(this).bind("leftarrow",function(){var b,c,d;return b=a.player.currentTime(),d=_(a.annotations).filter(function(a){return a.start<b}),d.length?(c=_(d).max(function(a){return a.start}),a.player.seek(c.start)):a.player.seek(0),jQuery(a.player).trigger("timeupdate")})},a.prototype.claimKeyEvents=function(a){return this.activeWidget=a},a.prototype.navActivateWidget=function(a){return jQuery(".nav-selected").removeClass("nav-selected"),a.addClass("nav-selected")},a.prototype._isWidgetToBeShown=function(a){if(this.options.activeWidgetTypes&&!_(this.options.activeWidgetTypes).contains(a.options.type))return!1;switch(this.options.widgetVisibility){case"scrolling-list":return!0;case"active-only":case"delayed-hide":return a.isActive?!0:!1}},a.prototype._loadAnnotations=function(a){var b,c=this;return console.info("Loading annotations from LMF"),b=this.player.currentSource(),this.annotations=this.options.annotations,this.annotations=_.filter(this.options.annotations,function(a){return-1!==b.indexOf(c._getFilename(a.fragment.value))}),this.annotations=_.uniq(this.annotations,!1,function(a){return[a.hash.resource.value,a.hash.fragment.value]}),console.info("Relevant annotations:",this.annotations),a()},a.prototype._moveWidgets=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;if(console.log("fullscreen",a,", Visible "+LimePlayer.options.annotationsVisible),a&&LimePlayer.options.annotationsVisible)for(p=this.widgetContainers,f=0,j=p.length;j>f;f++){for(c=p[f],e=[],q=c.element.find(".lime-widget"),g=0,k=q.length;k>g;g++)d=q[g],e.push(d),this.fullscreenWidgetContainer.append(d);c.widgetList=e}else for(r=this.widgetContainers,h=0,l=r.length;l>h;h++){for(c=r[h],c.element.html(""),s=c.widgetList,i=0,m=s.length;m>i;i++)d=s[i],c.element.append(d);c.element.append("&nbsp;"),jQuery(c).data("widgetList",null)}for(t=LimePlayer.annotations,u=[],o=0,n=t.length;n>o;o++)b=t[o],"active"===b.state?u.push(jQuery(b).trigger(jQuery.Event("becomeActive",{annotation:b}))):u.push(void 0);return u},a.prototype._initPlugins=function(a){var b,c,d,e,f;this.plugins=[],e=this.options.builtinPlugins;for(d in e){c=e[d];try{this.plugins.push(new window[d](this,this.options[d]||{}))}catch(g){b=g,console.error("Error initializing "+d+" plugin",b)}}f=this.options.plugins;for(d in f){c=f[d];try{this.plugins.push(new window[d](this,c))}catch(g){b=g,console.error("Error initializing "+d+" plugin",b)}}return a()},a.prototype.allocateWidgetSpace=function(a,b){var c,d,e,f,g,h=this;return a instanceof window.LimePlugin||console.error("allocateWidgetSpace needs the first parameter to be the plugin itself requesting for the widget."),d=[],d=b&&a.options.preferredContainer&&this._hasFreeSpace(a.options.preferredContainer,b)?[a.options.preferredContainer]:_(this.widgetContainers).filter(function(a){return h._hasFreeSpace(a,b)}),d.length||(d=this.widgetContainers),d=_.sortBy(d,function(a){return a.element.children().length}),c=d[0],c.element&&(c=c.element),c.prepend("<div class='lime-widget'></div>"),e=jQuery(".lime-widget:first",c),f=_(this.options.widget).extend(b),g=new LimeWidget(a,e,f),_.defer(function(){return"scrolling-list"===h.options.widgetVisibility&&h._isWidgetToBeShown(g)?(g.render(),h.widgets.push(g),g.show(),g.setInactive(),-1!==h.getHiddenWidgetTypes().indexOf(b.type)&&g.element.addClass("deactivated"),h.updateWidgetsList()):void 0}),g},a.prototype._hasFreeSpace=function(a){var b;return b=a.element.height(),b>0?!0:!1},a.prototype.play=function(){return this.player.play()},a.prototype.pause=function(){return this.player.pause()},a.prototype.seek=function(a){return this.player.seek(a)},a.prototype._getFilename=function(a){var b,c;return b=new RegExp(/\/([^\/#]*)(#.*)?$/),null!=(c=a.match(b))?c[1]:void 0},a}(),function(a){return a.fn.goTo=function(){return a(this).parent().scrollTo(this),this}}(jQuery)}.call(this),function(){var a;window.Annotation=function(){function b(b){var c,d,e,f,g,h,i,j,k=this;this.hash=b,b=this.hash,b.fragment.value=b.fragment.value.replace("?","#"),b.fragment.type="uri",this.annotation=b.annotation.value,this.start=0,this.end=-1,this.state="inactive",this.widgets={},jQuery(this).bind("mouseenter",function(){var a,b,c,d;c=k.widgets,d=[];for(b in c)a=c[b],d.push(jQuery(a).addClass("hover"));return d}),jQuery(this).bind("mouseleave",function(){var a,b,c,d;c=k.widgets,d=[];for(b in c)a=c[b],d.push(jQuery(a).removeClass("hover"));return d}),(b.fragment.type="uri")&&(this.fragment=new a(b.fragment.value),c=this.fragment.hash,e=c.match(/t=([0-9,]*)/),e&&(e=e[1],d=e.match(/([0-9]{1,})/g),d&&(this.start=Number(d[0]),this.end=Number(d[1])||-1)),f=c.match(/xywh=([a-z0-9,:]*)/),f&&(this.isPercent=-1!==f[1].indexOf("percent"),g=_(f[1].match(/([0-9]{1,})/g)).map(function(a){return Number(a)}),this.x=g[0],this.y=g[1],this.w=g[2],this.h=g[3])),this.isSpacial=void 0!==this.x||this.x===(j=this.y)&&j===(i=this.w)&&i===(h=this.h)&&0===h,this.resource=new a(b.resource.value),this.relation=new a(b.relation.value)}return b.prototype.toString=function(){return this.resource.value},b.prototype.isBookmark=function(){return"http://www.w3.org/ns/openannotation/extensions/Bookmark"===this.hash.type.value},b}(),a=function(){function a(a){var b;this.value=decodeURIComponent(a),b=a.match(/^.*?#([a-zA-Z0-9,&=:]*)$/),this.hash=b?b[1]:"",this.type="uri"}return a.prototype.toString=function(){return this.value},a}()}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.LimePlugin=function(){function a(a,b){this.lime=a,this.options=jQuery.extend({},this.defaults,b),this.init()}return a.prototype.defaults={preferredContainer:null},a.prototype.widgets=[],a.prototype.init=function(){return console.error("All Lime plugins have to implement the init method!")},a.prototype.getModalContainer=function(){var a,b,c,d,e,f,g=this;return d=this.lime.modalContainer,a=this.lime.modalMask,d||(this.lime.player.isFullscreen()?(this.lime.player.videoOverlay.append('<!-- Mask to cover the whole screen --><div id="mask"></div>'),this.lime.modalMask=jQuery("#mask"),this.lime.player.videoOverlay.append('<div class="modal-container"></div>'),this.lime.modalContainer=jQuery(".modal-container",this.lime.player.videoOverlay)):(jQuery("body").append('<!-- Mask to cover the whole screen --><div id="mask"></div>'),this.lime.modalMask=jQuery("#mask"),jQuery("body").append('<div class="modal-container"></div>'),this.lime.modalContainer=jQuery("body .modal-container")),d=this.lime.modalContainer,a=this.lime.modalMask,jQuery(d).bind("close",function(){return a.hide(),d.hide(),d.empty(),g.lime.claimKeyEvents(g.lime)}),a.click(function(){return a.hide(),d.hide(),d.empty(),g.lime.claimKeyEvents(g.lime)}),jQuery(this.lime.player).bind("fullscreenchange",function(b){return b.isFullScreen?(g.lime.player.videoOverlay.append(a),g.lime.player.videoOverlay.append(d)):(jQuery("body").append(a),jQuery("body").append(d))})),a=jQuery("#mask"),d.empty(),d.show(),a.show(),d.append('<div style="height: 22px; width: 100%; position: relative; margin: 0 auto; background: black;"> <a href="#" class="close" role="button"><img src="img/close-icon.png" style="width: 22px; height: 22px;"/></a></div>'),d.append('<div class="modalContent" style="height: 98%; width: 100%; position: relative; margin: 0 auto;">'),d.append("</div>"),b=jQuery(window).height(),c=jQuery(window).width(),a.css({width:c,height:b}),a.fadeIn(100),a.fadeTo("fast",.8),e=jQuery(window).height(),f=jQuery(window).width(),d.css("top",jQuery("#header").height()),d.css("right",jQuery("#widget-container-2").width()),d.fadeIn(100),jQuery(".close",d).click(function(b){return b.preventDefault(),a.hide(),d.hide(),d.empty(),g.lime.claimKeyEvents(g.lime)}),jQuery(window).resize(function(){return b=jQuery(document).height(),c=jQuery(document).width(),a.css({width:c,height:b}),e=jQuery(window).height(),f=jQuery(window).width(),d.css("top",jQuery("#header").height()),d.css("right",jQuery("#widget-container-2").width()),d.css("width","auto"),d.css("height","auto")}),jQuery(".modalContent",d)},a}(),window.TestPlugin=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.init=function(){var a,b,c,d,e;for(this.name="TestPlugin",console.info("Initialize "+this.name),d=this.lime.annotations,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this.handleAnnotation(a));return e},d.prototype.handleAnnotation=function(a){var b=this;return a.entityPromise.done(function(){var c;return c=b.lime.allocateWidgetSpace(b,{thumbnail:"img/info.png",title:""+a.getLabel()+" Info",type:"TestWidget",sortBy:function(){return 1e4*a.start+a.end}}),c.annotation=a,jQuery(c).bind("activate",function(){return b.getModalContainer().html(b.renderAnnotation(a))}),a.widgets[b.name]=c,jQuery(a).bind("becomeActive",function(){return a.widgets[b.name].setActive()}),jQuery(a).bind("becomeInactive",function(){return a.widgets[b.name].setInactive()})})},d.prototype.renderAnnotation=function(a){var b,c,d,e;return e=a.entity,c=a.getLabel(),b=a.getDepiction(),d=a.getPage(),'<p>\n<a href="'+d+'" target="_blank">'+c+'</a>\n</p>\n<p>\n<img src="'+b+'" width="200"/>\n</p>'},d}(window.LimePlugin)}.call(this),function(){window.LimeWidget=function(){function a(a,b,c){var d;this.plugin=a,this.element=b,this.lime=this.plugin.lime,d={type:"defaultwidget"},this.options=_(d).extend(this.options,c),this._init()}return a.prototype.render=function(){var a,b,c,d,e,f=this;for(this.element.html('<div class="'+this.options.type+'">\n  <table style="margin:0 auto; width: 100%;">\n    <tr>\n      <td style="width: 45px; background-color: rgb(0, 0, 0);"><img class="utility-icon" src="'+this.options.thumbnail+'" style="width: 45px; height: 27px;" ></td>\n      <td><span class="utility-text">'+this.options.title+"</span></td>\n    </tr>\n  </table>\n</div>"),jQuery(this.element).parent().data("sorted",!1),jQuery(this.element).data("widget",this),jQuery(this.element).data("plugin",this.plugin),jQuery(this.element).click(function(a){var b,c,d,e;return d=jQuery(a.currentTarget).data().widget,b=jQuery(a.currentTarget).data().plugin,d.isActive()?(f.lime.options.pauseOnWidgetopen&&f.plugin.lime.pause(),jQuery(f).trigger("activate",{plugin:b,widget:d}),c=f.lime.player.currentTime(),"function"==typeof history.pushState&&history.pushState({annotation:null!=(e=d.annotation)?e.hash.annotation.value:void 0,widgetType:d.options.type,time:c},"state123","#time="+c+"&widgetType="+d.options.type),f.lime.claimKeyEvents(d)):(b.lime.player.seek(d.annotation.start),f.lime.options.pauseOnWidgetopen&&b.lime.player.play()),b.lime.navActivateWidget(d.element)}),a=function(a,b){return f[b]=function(){return a[b].call(a,arguments)}},e=["addClass","html","removeClass"],c=0,d=e.length;d>c;c++)b=e[c],a(this.element,b);return this.isRendered=!0},a.prototype.html=function(a){return this.element.html(a)},a.prototype.options={showSpeed:500,label:"Default label"},a.prototype._init=function(){return this.state="hidden"},a.prototype.show=function(){return this.element.slideDown(this.options.showSpeed),this.state="visible"},a.prototype.hide=function(){return this.element.slideUp(this.options.showSpeed)},a.prototype.setActive=function(){return this.isRendered||this.render(),this.show(),this.state="active",this.element.find(".utility-icon").attr("src",this.options.thumbnail),this.element.removeClass("inactive"),this.element.parent().prepend(this.element),this.lime.updateWidgetsList()},a.prototype.setInactive=function(){var a;return this.state="inactive",a=this.options.thumbnail.replace(".png",""),this.element.find(".utility-icon").attr("src",a+"_gr.png"),this.element.addClass("inactive"),this.lime.updateWidgetsList()},a.prototype.isActive=function(){return"active"===this.state},a}()}.call(this),function(){window.LIMEPlayer.VideoPlayerInit=function(a,b,c){return _V_?(_.defer(function(){var d;return console.info("1. Player initialisation"),d={instance:_V_(a,{flash:{iFrameMode:!0},swf:"lib/videojs/video-js.swf"}),isFullscreen:function(){return this.instance.isFullScreen},play:function(){return this.instance.play()},pause:function(){return this.instance.pause()},getLength:function(){return this.instance.duration()},seek:function(a){return void 0!==a?this.instance.currentTime(a):void 0},currentTime:function(){return this.instance.currentTime()},currentSource:function(){return this.instance.tag.currentSrc||this.instance.tag.src||jQuery("source",this.instance.tag).attr("src")},paused:function(){return this.instance.paused()}},d.instance.addEvent("error",function(a){return c(a)}),d.instance.addEvent("loadedmetadata",function(){var a,e;return console.info("3. Player.loadedmetadata"),d.instance.isFullScreen=b.fullscreen,e=d.instance.addComponent("VideoOverlay"),d.videoOverlay=jQuery(e.el),d.videoOverlay.css({height:"100%"}),a=d.instance.controlBar.progressControl.addComponent("VideoOverlay"),d.timelineOverlay=jQuery(a.el),d.timelineOverlay.css({position:"absolute",top:0,right:0,left:0,height:"100%",padding:0,margin:0,background:"transparent","pointer-events":"none"}),d.buttonContainer=d.instance.controlBar.el,d.instance.controlBar.addComponent("AnnotationToggle").el,d.instance.addEvent("timeupdate",function(){var a;return a=jQuery.Event("timeupdate",{currentTime:d.instance.currentTime()}),jQuery(d).trigger(a)}),d.instance.addEvent("fullscreenchange",function(){var a;return a=jQuery.Event("fullscreenchange",{isFullScreen:d.instance.isFullScreen}),jQuery(d).trigger(a)}),d.instance.addEvent("play",function(){var a;return a=jQuery.Event("play"),jQuery(d).trigger(a)}),d.instance.play(),c(null,d)}),console.info("2. Player instantiated.")}),_V_.VideoOverlay=_V_.Component.extend({options:{loadEvent:"play"},init:function(a,b){return this._super(a,b)},createElement:function(){return a=_V_.createElement("div",{className:"lime-overlay"})}}),_V_.AnnotationToggle=_V_.Button.extend({buttonText:"Annotations On/Off",buildCSSClass:function(){return"vjs-annotationstoggler "+this._super()},onClick:function(){return LimePlayer.options.annotationsVisible===!1?(jQuery(".vjs-annotationstoggler").removeClass("annotationstoggler-off"),LimePlayer.options.annotationsVisible=!0,LimePlayer.player.AnnotationOverlaysComponent&&LimePlayer.player.AnnotationOverlaysComponent.show(),this.player.isFullScreen?LimePlayer.player.AnnotationsSidebars.show():LimePlayer.player.AnnotationsSidebars.hide()):(jQuery(".vjs-annotationstoggler").addClass("annotationstoggler-off"),LimePlayer.player.AnnotationsSidebars.hide(),LimePlayer.player.AnnotationOverlaysComponent&&LimePlayer.player.AnnotationOverlaysComponent.hide(),LimePlayer.options.annotationsVisible=!1),console.log("fullscreen "+this.player.isFullScreen,"visible "+LimePlayer.options.annotationsVisible)}})):(console.error("VideoJS not loaded!"),c("VideoJS not loaded"),void 0)}}.call(this),function(){window.CMF=function(){function a(a){this.url=a,this.url=this.url.replace(/\/$/,"")+"/"}return a.prototype.getVideos=function(a){var b,c;return c=[],b=this._videosQuery,this._runSPARQL(b,a)},a.prototype._videosQuery="PREFIX mao: <http://www.w3.org/ns/ma-ont#>\nPREFIX oac: <http://www.openannotation.org/ns/>\nPREFIX yoovis: <http://yoovis.at/ontology/08/2012/>\nSELECT DISTINCT ?instance ?title ?thumbnail\nWHERE {\n  ?instance a mao:MediaResource.\n  OPTIONAL {?instance mao:title ?title.}\n  ?instance yoovis:hasThumbnail ?thumbnail.\n}\nORDER BY ?instance",a.prototype.getAnnotatedVideos=function(a){var b;return b=this._annotatedVideosQuery,this._runSPARQL(b,a)},a.prototype._annotatedVideosQuery="PREFIX mao: <http://www.w3.org/ns/ma-ont#>\nPREFIX oac: <http://www.openannotation.org/ns/>\nPREFIX yoovis: <http://yoovis.at/ontology/08/2012/>\nSELECT DISTINCT ?instance ?title ?thumbnail\nWHERE {\n  ?instance a mao:MediaResource.\n  OPTIONAL {?instance mao:title ?title.}\n  ?instance mao:hasFragment ?fragment.\n  OPTIONAL {?instance yoovis:hasThumbnail ?thumbnail.}\n  ?annotation a oac:Annotation.\n  ?annotation oac:hasTarget ?fragment.\n  ?annotation oac:hasBody ?body\n}\nORDER BY ASC(?title)",a.prototype.getAnnotationsForVideoOrLocator=function(a,b){var c,d,e;return d=[],e=2,c=function(a,c){return a?(console.error(a,c),b(a,c),void 0):(d=d.concat(c),e--,0===e?b(null,d):void 0)},this.getAnnotationsForLocator(a,c),this.getAnnotationsForVideo(a,c)},a.prototype.getLocatorsForVideoOrLocator=function(a,b){var c,d,e;return d=[],e=2,c=function(a,c){return a?(console.error(a,c),b(a,c),void 0):(d=d.concat(c),e--,0===e?b(null,d):void 0)},this.getVideoLocators(a,c),this.getAllVideoLocators(a,c)},a.prototype.getAnnotationsForVideo=function(a,b){var c,d;return d=[],c=this._annotationsForVideo(a),this._runSPARQL(c,b)},a.prototype._annotationsForVideo=function(){return"PREFIX oac: <http://www.openannotation.org/ns/>\nPREFIX mao: <http://www.w3.org/ns/ma-ont#>\nPREFIX cma: <http://connectme.at/ontology#>\nPREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>\nSELECT DISTINCT ?annotation ?fragment ?resource ?relation ?type ?prefLabel ?latitude ?longitude\nWHERE {\n<http://connectme.salzburgresearch.at/devel/resource/video/yoovisid_7208>  mao:hasFragment ?f.\n?f mao:locator ?fragment.\n?annotation oac:hasTarget ?f.\n?annotation a ?type.\nOPTIONAL{?annotation cma:preferredLabel ?prefLabel.}\nOPTIONAL{?resource geo:lat ?latitude.}\nOPTIONAL{?resource geo:long ?longitude.}\n?annotation oac:hasBody ?resource.\n?f ?relation ?resource.\n}"},a.prototype.getAnnotationsForLocator=function(a,b){var c,d;return d=[],c=this._annotationsForLocator(a),this._runSPARQL(c,b)},a.prototype._annotationsForLocator=function(a){return"PREFIX oac: <http://www.openannotation.org/ns/>\nPREFIX mao: <http://www.w3.org/ns/ma-ont#>\nPREFIX cma: <http://connectme.at/ontology#>\nSELECT DISTINCT ?annotation ?fragment ?resource ?relation ?type ?prefLabel\nWHERE {\n  ?videoresource mao:locator <"+a+">.\n  ?videoresource mao:hasFragment ?f.\n  ?f mao:locator ?fragment.\n  ?annotation oac:hasTarget ?f.\n  ?annotation oac:hasBody ?resource.\n  ?annotation a ?type.\n  OPTIONAL{?annotation cma:preferredLabel ?prefLabel.}\n  ?f ?relation ?resource.\n}"},a.prototype.getVideoLocators=function(a,b){var c,d;return d=[],c=this._getVideoLocators(a),this._runSPARQL(c,function(a,c){var d,e;return a||(e=new RegExp(/\.(.{3,4})$/),d=_(c).map(function(a){var b,c;return a.source.value.indexOf("<crid")<0?(b=(null!=(c=a.type)?c.value:void 0)||"video/"+a.source.value.match(e)[1],{source:a.source.value,type:b}):void 0})),b(a,d)})},a.prototype._getVideoLocators=function(a){return"PREFIX oac: <http://www.openannotation.org/ns/>\nPREFIX mao: <http://www.w3.org/ns/ma-ont#>\nSELECT DISTINCT ?source ?type\nWHERE {\n  <"+a+'>  mao:locator ?source.\n  OPTIONAL {?source mao:hasFormat ?type}\n  FILTER regex(str(?source), "(http|https)")\n}\nORDER BY ?source'},a.prototype.getAllVideoLocators=function(a,b){var c,d;return d=[],c=this._getAllVideoLocators(a),this._runSPARQL(c,function(a,c){var d,e;return a||(e=new RegExp(/\.(.{3,4})$/),d=_(c).map(function(a){var b,c;return a.source.value.indexOf("crid")<0?(b=(null!=(c=a.type)?c.value:void 0)||"video/"+a.source.value.match(e)[1],{source:a.source.value,type:b}):void 0})),b(a,d)})},a.prototype._getAllVideoLocators=function(a){return"PREFIX oac: <http://www.openannotation.org/ns/>\nPREFIX mao: <http://www.w3.org/ns/ma-ont#>\nSELECT DISTINCT ?source ?type\nWHERE {\n  ?resource mao:locator <"+a+'>.\n  ?resource  mao:locator ?source.\n  OPTIONAL {?source mao:hasFormat ?type}\n  FILTER regex(str(?source), "(http|https)")\n}\nORDER BY ?source'},a.prototype.getLSIVideosForTerm=function(a,b){var c,d;return d=[],c=this._getLSIVideosForTerm(a),this._runSPARQL(c,function(a,c){return b(a,c)})},a.prototype._getLSIVideosForTerm=function(a){return"PREFIX mao: <http://www.w3.org/ns/ma-ont#>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nSELECT DISTINCT ?video ?duration ?description ?locator ?title ?img\nWHERE {\n  ?video mao:hasKeyword <"+a+"> .\n  ?video a <http://www.w3.org/ns/ma-ont#VideoTrack> .\n  OPTIONAL {?video mao:description ?description}.\n  ?video mao:locator ?locator .\n  OPTIONAL {?video mao:duration ?duration}.\n  ?video mao:title ?title .\n  OPTIONAL {?video foaf:img ?img}.\n}\nORDER BY ?video "},a.prototype.getLSIImagesForTerm=function(a,b){var c,d;return d=[],c=this._getLSIImagesForTerm(a),this._runSPARQL(c,function(a,c){return b(a,c)})},a.prototype._getLSIImagesForTerm=function(a){return"PREFIX mao: <http://www.w3.org/ns/ma-ont#>\nSELECT DISTINCT ?image\nWHERE {\n  ?image a <http://www.w3.org/ns/ma-ont#Image> .\n  ?image mao:hasKeyword <"+a+"> .\n}\nORDER BY ?image "},a.prototype.getGRDataForTerm=function(a,b){var c,d;return d=[],c=this._getGRDataForTerm(a),this._runSPARQL(c,function(a,c){return b(a,c)})},a.prototype._getGRDataForTerm=function(a){return"PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX gr: <http://purl.org/goodrelations/v1#>\nPREFIX vCard: <http://www.w3.org/2001/vcard-rdf/3.0#>\nPREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>\nSELECT DISTINCT ?name ?street ?pcode ?city ?country ?telephone ?email ?description ?geoLat ?geoLong ?pricevalue ?pricecurrency ?product\nWHERE {\n<"+a+"> gr:legalName ?name.\n<"+a+"> vCard:ADR ?address.\n?address vCard:Street ?street.\n?address vCard:Pcode ?pcode.\n?address vCard:City ?city.\n?address vCard:Country ?country.\n?address vCard:TEL ?tel.\n<"+a+"> geo:lat ?geoLat.\n<"+a+"> geo:long ?geoLong.\n?tel rdf:value ?telephone.\n?address vCard:EMAIL ?em.\n?em rdf:value ?email.\n<"+a+"> gr:offers ?offer.\n?offer rdfs:comment ?description.\n?offer gr:hasPriceSpecification ?price.\n?price gr:hasCurrencyValue ?pricevalue.\n?price gr:hasCurrency ?pricecurrency.\n?price rdfs:comment ?product.\n}"},a.prototype._runSPARQL=function(a,b){var c,d;return c=""+this.url+"sparql/select?query="+encodeURIComponent(a)+"&output=json",d=jQuery.getJSON(c,function(c){var d,e;return e=[],d=c.results.bindings,d.length!==_(d).uniq().length&&(console.warn("CMF DISTINCT is being ignored!",d,a),d=_(d).uniq()),b(null,d)}),d.error(b),d},a.prototype.test=function(){var a=this;return this.getVideos(function(a,b){return a?(console.error("getVideos error",a,b),void 0):console.info("getVideos result",b)}),this.getAnnotatedVideos(function(b,c){var d;return b?(console.error("getAnnotatedVideos error",b,c),void 0):(console.info("getAnnotatedVideos result",c),d=c[0].instance.value,console.info("Getting locators for",d),a.getVideoLocators(d,function(b,c){var e;return b?(console.error("getVideoLocators error",b,c),void 0):(console.info("getVideoLocators result",c),e=c[0].source,a.getAllVideoLocators(e,function(a,b){return a?(console.error("getAllVideoLocators error",a,b),void 0):console.info("getAllVideoLocators result",b)}),a.getAnnotationsForLocator(e,function(a,b){return a?(console.error("getAnnotationsForLocator error",a,b),void 0):console.info("getAnnotationsForLocator result",b)}),a.getLocatorsForVideoOrLocator(d,function(a,b){return a?(console.error("getLocatorsForVideoOrLocator error",a,b),void 0):console.info("getLocatorsForVideoOrLocator result",d,b)}),a.getLocatorsForVideoOrLocator(e,function(a,b){return a?(console.error("getLocatorsForVideoOrLocator error",a,b),void 0):console.info("getLocatorsForVideoOrLocator result",e,b)}),a.getAnnotationsForVideoOrLocator(d,function(a,b){return a?(console.error("getAnnotationsForVideoOrLocator error",a,b),void 0):console.info("getAnnotationsForVideoOrLocator result",d,b)}),a.getAnnotationsForVideoOrLocator(e,function(a,b){return a?(console.error("getAnnotationsForVideoOrLocator error",a,b),void 0):console.info("getAnnotationsForVideoOrLocator result",e,b)}))}),a.getAnnotationsForVideo(d,function(a,b){return a?(console.error("getAnnotationsForVideo error",a,b),void 0):console.info("getAnnotationsForVideo result",b)}))})},a}()}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.AnnotationOverlays=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.init=function(){return this.initSpacialAnnotations(),this.initTimeAnnotations(),this.initConceptOverlay()},d.prototype.initSpacialAnnotations=function(){var a,b,c,d,e,f,g,h=this;for(console.info("Initialize SpacialAnnotationOverlays"),this.spacialAnnotationOverlay=jQuery("<div class='spacial-annotation-overlays-wrapper'></div>"),this.lime.player.videoOverlay.append(this.spacialAnnotationOverlay),b=jQuery(".spacial-annotation-overlays-wrapper",this.lime.player.el),c=this.lime,jQuery(this.lime.player).bind("timeupdate",function(){}),g=this.lime.annotations,e=0,f=g.length;f>e;e++)a=g[e],jQuery(a).bind("becomeActive",function(d){var e;return a=d.annotation,a.isSpacial&&a.w>0&&a.h>0?(b.prepend(h.renderAnnotation(a)),e=jQuery(".spatial_annotation:first",b),jQuery(e).data("annotation",a),e.mouseenter(function(b){var c;return a=jQuery(b.target).data().annotation,c=jQuery.Event("mouseenter"),jQuery(a).trigger(c,["test"]),jQuery(b.target).fadeOut(50),jQuery(b.target).fadeIn(50)
}),e.mouseleave(function(){var b;return b=jQuery.Event("mouseleave"),jQuery(a).trigger(b,["test"])}),e.click(function(){var b,d,e;c.player.pause(),e=[];for(b in a.widgets)"AnnotationOverlays"!==b?(d=a.widgets[b],e.push(d.addClass("highlighted").delay(2e3).queue(function(a){return jQuery(this).removeClass("highlighted"),a()}))):e.push(void 0);return e}),a.widgets.AnnotationOverlays=e,e):void 0}),jQuery(a).bind("becomeInactive",function(b){return a=b.annotation,a.isSpacial&&a.w>0&&a.h>0?(a.widgets.AnnotationOverlays.remove(),delete a.widgets.AnnotationOverlays):!1});return d=function(){var a,b,c;return b=jQuery("video",h.lime.element),a=b.width(),b.css({width:"auto"}),c=b.width(),console.info("video width",a,c,h.spacialAnnotationOverlay[0]),b.css("width",""),h.spacialAnnotationOverlay.css({left:Math.floor((a-c)/2),right:(a-c)/2,position:"absolute",height:"100%","pointer-events":"none"})},jQuery(window).resize(d),d()},d.prototype.initTimeAnnotations=function(){var a,b,c,d,e,f,g,h,i,j=this;for(console.info("Initialize TimeAnnotationOverlays"),b=this.lime.player.timelineOverlay,d=this.lime.player.getLength(),console.info("length",d),h=this.lime.annotations,i=[],f=0,g=h.length;g>f;f++)a=h[f],e=100*(a.start/d),b.prepend("<div class='time-annotation' style='left:"+e+"%;'>&nbsp;</div>"),c=jQuery(".time-annotation:first",b),jQuery(c).data("annotation",a),c.click(function(b){return a=jQuery(b.target).data().annotation,j.lime.player.seek(a.start),j.lime.player.play()}),c.bind("mouseenter",function(b){var c;return a=jQuery(b.target).data().annotation,c=jQuery.Event("mouseenter"),jQuery(a).trigger(c,["test"]),j.fillConceptOverlay(j.renderConceptOverlay(a)),j.showConceptOverlay()}),i.push(c.mouseleave(function(b){var c;return a=jQuery(b.target).data().annotation,c=jQuery.Event("mouseleave"),jQuery(a).trigger(c,["test"]),j.hideConceptOverlay()}));return i},d.prototype.initConceptOverlay=function(){var a=this;return this.conceptOverlayEl=jQuery("<div class='concept-overlay concept-list-overlay'></div>"),this.lime.player.videoOverlay.append(this.conceptOverlayEl),this.conceptOverlayEl.hide(),jQuery(this.conceptOverlayEl).mouseenter(function(){return a.showConceptOverlay()}),jQuery(this.conceptOverlayEl).mouseleave(function(){return a.hideConceptOverlay()})},d.prototype.showConceptOverlay=function(){return this.hideTimeoutHandle&&(clearTimeout(this.hideTimeoutHandle),this.hideTimeoutHandle=void 0),this.conceptOverlayEl.show()},d.prototype.hideConceptOverlay=function(){var a=this;return this.hideTimeoutHandle=setTimeout(function(){return a.conceptOverlayEl.hide(),a.hideTimeoutHandle},2e3)},d.prototype.fillConceptOverlay=function(a){return jQuery(this.conceptOverlayEl).html("").append(a)},d.prototype.renderConceptOverlay=function(a){var b,c,d,e,f,g,h,i,j,k=this;for(g=function(a){var b,c;return b=new RegExp(/\/([^\/#]*)(#.*)?$/),null!=(c=a.match(b))?c[1]:void 0},e=a.start,d=this.lime.player.currentSource(),b=_.filter(this.lime.annotations,function(a){return a.start<=e&&a.end>e&&-1!==d.indexOf(g(a.fragment.value))}),b=_(b).sortBy(function(a){return[0-a.start,a.hash.relation.value,a.hash.fragment.value]}),b=_.uniq(b,function(a){return a.hash.annotation.value}),h="",i=0,j=b.length;j>i;i++)c=b[i],f="function"==typeof c.getDepiction?c.getDepiction({without:"thumb"}):void 0,h+="<tr><td class='icon'>",f&&(h+="<img src='"+f+"' style='height:20px;' />"),h+="</td>\n<td class='timeframe'>\n  "+this.timeformat(c.start)+" - "+this.timeformat(c.end)+"\n</td>\n<td class='label'>",h+=c.getPage?"<a href='"+c.getPage()+"' target='_blank' title='"+c.hash.fragment.value+"'>"+c.getLabel()+"</a>":"<span>"+(("function"==typeof c.getLabel?c.getLabel():void 0)||c)+"</span>",h+="</td></tr>";return h=jQuery('<table class="navlist">'+h+"</table>"),jQuery("li:first",h).addClass("active"),jQuery("a[target=_blank]",h).click(function(){return k.lime.player.pause()}),h},d.prototype.timeformat=function(a){var b,c,d,e;return e=a,a=e%60,e=(e-a)/60,c=e%60,b=(e-c)/60,d="",b>0&&10>b&&(b="0"+b),10>c&&(c="0"+c),10>a&&(a="0"+a),b&&(d+=""+b+":"),d+=""+c+":"+a},d.prototype.renderAnnotation=function(a){var b,c,d,e=this;return a.ldLoaded&&(c=a.entity[a.resource.value],b=_(c["http://www.w3.org/2000/01/rdf-schema#label"]).detect(function(a){return a.lang===e.lime.options.preferredLanguage}).value),void 0===b&&(b=""),d=a.isPercent?"%":"px","<div class='spatial_annotation' style='position: absolute; width: "+a.w+d+"; height: "+a.h+d+"; left: "+a.x+d+"; top: "+a.y+d+"'>"+b+"</div>"},d}(window.LimePlugin)}.call(this),function(){!function(a){var b,c;return c=function(a){return"object"==typeof a?a:{top:a,left:a}},b=a.scrollTo=function(b,c,d){return a(window).scrollTo(b,c,d)},b.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1,limit:!0},b.window=function(){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b,c,d;return c=this,(d=!c.nodeName||-1!==a.inArray(c.nodeName.toLowerCase(),["iframe","#document","html","body"]))?(b=(c.contentWindow||c).document||c.ownerDocument||c,/webkit/i.test(navigator.userAgent)||"BackCompat"===b.compatMode?b.body:b.documentElement):c})},a.fn.scrollTo=function(d,e,f){return"object"==typeof e&&(f=e,e=0),"function"==typeof f&&(f={onAfter:f}),"max"===d&&(d=9e9),f=a.extend({},b.defaults,f),e=e||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=c(f.offset),f.over=c(f.over),this._scrollable().each(function(){var g,h,i,j,k,l,m;if(h=function(a){return g.animate(i,e,f.easing,a&&function(){return a.call(this,d,f)})},null!=d){switch(j=this,g=a(j),k=d,l=void 0,i={},m=g.is("html,body"),typeof k){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(k)){k=c(k);break}if(k=a(k,this),!k.length)return;break;case"object":(k.is||k.style)&&(l=(k=a(k)).offset())}return a.each(f.axis.split(""),function(a,c){var d,e,n,o,p,q;return d="x"===c?"Left":"Top",p=d.toLowerCase(),e="scroll"+d,o=j[e],n=b.max(j,c),l?(i[e]=l[p]+(m?0:o-g.offset()[p]),f.margin&&(i[e]-=parseInt(k.css("margin"+d))||0,i[e]-=parseInt(k.css("border"+d+"Width"))||0),i[e]+=f.offset[p]||0,f.over[p]&&(i[e]+=k["x"===c?"width":"height"]()*f.over[p])):(q=k[p],i[e]=q.slice&&"%"===q.slice(-1)?parseFloat(q)/100*n:q),f.limit&&/^\d+$/.test(i[e])&&(i[e]=i[e]<=0?0:Math.min(i[e],n)),!a&&f.queue?(o!==i[e]&&h(f.onAfterFirst),delete i[e]):void 0}),h(f.onAfter)}}).end()},b.max=function(b,c){var d,e,f,g,h;return d="x"===c?"Width":"Height",g="scroll"+d,a(b).is("html,body")?(h="client"+d,f=b.ownerDocument.documentElement,e=b.ownerDocument.body,Math.max(f[g],e[g])-Math.min(f[h],e[h])):b[g]-a(b)[d.toLowerCase()]()}}(jQuery)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.BookingPlugin=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.init=function(){var a,b,c,d,e,f;for(this.name="BookingPlugin",a=void 0,console.info("Initialize BusinessPlugin"),d=this.lime.annotations,f=[],b=0,c=d.length;c>b;b++)a=d[b],a.resource.value.indexOf("#BusinessEntity")>0&&("http://connectme.at/ontology#explicitlyShows"===(e=a.relation.value)||"http://connectme.at/ontology#explicitlyMentions"===e||"http://connectme.at/ontology#implicitlyShows"===e||"http://connectme.at/ontology#implicitlyMentions"===e||"http://connectme.at/ontology#hasContent"===e)?f.push(this.handleAnnotation(a)):f.push(void 0);return f},d.prototype.handleAnnotation=function(a){var b,c,d,e,f=this;return $.getJSON("http://smart-ip.net/geoip-json?callback=?",function(a){return f.clientIP=a.host}),this.getGRData(a),c=a.resource.value,c.length>=3&&(d=a.resource.value,b=d.replace("http://","").replace("https://","").split(/[/?#]/)[0].replace("www.",""),e=this.lime.allocateWidgetSpace(this,{thumbnail:"img/shop.png",title:""+b+" offer",type:"BusinessWidget",sortBy:function(){return 1e4*a.start+a.end}}),e.annotation=a,jQuery(e).bind("activate",function(b){var c,d,e;try{e=b.target.options.title,d=f.name,_gaq.push(["_trackEvent",d,"clicked",e])}catch(g){c=g}return f.expandWidget(a,f.getModalContainer())}),a.widgets[this.name]=e,jQuery(a).bind("becomeActive",function(b){var c,d,e;if(a.goodRelationsDataResource&&a.goodRelationsDataResource.length>0){try{d=b.target.widgets[f.name].options.title,e=f.name,_gaq.push(["_trackEvent",e,"becameActive",d])}catch(g){c=g}return a.widgets[f.name].setActive()}}),jQuery(a).bind("becomeInactive",function(b){var c,d,e;try{d=b.target.widgets[f.name].options.title,e=f.name,_gaq.push(["_trackEvent",e,"becomeInactive",d])}catch(g){c=g}return a.widgets[f.name].setInactive()}),jQuery(e).bind("downarrow",function(){return f.bookingtabsiterator=3===f.bookingtabsiterator+1?0:f.bookingtabsiterator+1,0===f.bookingtabsiterator&&(jQuery("#businessWho").trigger("click"),jQuery("#businessWho").addClass("selected")),1===f.bookingtabsiterator&&(jQuery("#businessWhat").trigger("click"),jQuery("#businessWhat").addClass("selected")),2===f.bookingtabsiterator?(jQuery("#businessWhere").trigger("click"),jQuery("#businessWhere").addClass("selected")):void 0})),jQuery(e).bind("uparrow",function(){return f.bookingtabsiterator=0===f.bookingtabsiterator?2:f.bookingtabsiterator-1,jQuery(".videotab.selected").removeClass("selected"),0===f.bookingtabsiterator&&(jQuery("#businessWho").trigger("click"),jQuery("#businessWho").addClass("selected")),1===f.bookingtabsiterator&&(jQuery("#businessWhat").trigger("click"),jQuery("#businessWhat").addClass("selected")),2===f.bookingtabsiterator?(jQuery("#businessWhere").trigger("click"),jQuery("#businessWhere").addClass("selected")):void 0})},d.prototype.getGRData=function(a){return this.lime.cmf.getGRDataForTerm(a.resource.value,function(b,c){return b?console.warn("Error getting CMF Good Relations resources",b):(a.goodRelationsDataResource=_(c).map(function(a){var b;return b={name:a.name.value,street:a.street.value,pcode:Number(a.pcode.value),city:a.city.value,country:a.country.value,telephone:a.telephone.value,email:a.email.value,description:a.description.value,geoLat:Number(a.geoLat.value),geoLong:Number(a.geoLong.value),priceValue:Number(a.pricevalue.value),priceCurrency:a.pricecurrency.value,product:a.product.value}}),a.getGRDataResource=function(){return this.goodRelationsDataResource})})},d.prototype._htmlEncode=function(a){return a.replace(/[&<>"']/g,function(a){return"&"+{"&":"amp","<":"lt",">":"gt",'"':"quot","'":"#39"}[a]+";"})},d.prototype.expandWidget=function(a,b){var c,d,e,f,g,h,i=this;return e=jQuery(b),e.css("width","600px"),e.css("height","auto"),d=this.lime,f="",f=a.resource.value,h=(new Date).getTime(),c=a.getGRDataResource(),c.length&&c.length>0?(g='<div id="bookingWidgetExpanded" style="position: relative; z-index: 900; width: 600px; height: 600px; background-color: transparent;">\n<div id="forthTile" style="position: relative; float: left; width: 300px; height: 300px;">\n<div style="width: 100%; position: relative; height: 30px; font-size: 20px; color: #00BFFF; background-color: #696969;">\n'+c[0].name+'\n</div>\n<div style="width: 100%; position: relative; font-size: 16px; height: 50px; background-color: #303030; color: #f1f1f1;">\n'+c[0].street+", "+c[0].pcode+" "+c[0].city+", "+c[0].country+'\n</div>\n<div style="width: 100%; position: relative; height: 20px; font-size: 16px; background-color: #303030; color: #f1f1f1; text-align: center;">\n '+c[0].telephone+'\n</div>\n<div style="width: 100%; position: relative; height: 170px; font-size: 16px; background-color: #303030; color: #f1f1f1; overflow-y: scroll;">\nÜber uns<br>\n'+c[0].description+'\n</div>\n<div class="businessContact"  style="cursor: hand; cursor: pointer; width: 100%; position: relative; height: 30px; color: black; background-color: lightgray; font-size: 21px; text-align: center; background-image: -webkit-gradient(radial, center center, 10, center center, from(white), to(#909090)); background-image: -o-radial-gradient(white, #909090); background-image: -ms-radial-gradient(white, #909090); background-image: -moz-radial-gradient(white, #909090); background-image: -webkit-radial-gradient(white, #909090); background-image: radial-gradient(white, #909090);">\nkontaktieren Sie uns\n</div>\n</div>\n\n<div id="secondTile" style="width: 300px; height: 300px; position: relative; float: left; display: none;">\n<div id="businessName" style="width: 100%; position: relative; height: 30px; font-size: 20px; color: #FA8072; background-color: #696969;">\n '+c[0].name+'\n</div>\n<div id="businessAddress" style="width: 100%; position: relative; font-size: 16px; height: 50px; background-color: #303030; color: #f1f1f1;">\n '+c[0].street+", "+c[0].pcode+" "+c[0].city+", "+c[0].country+'\n</div>\n<div id="businessTelephone" style="width: 100%; position: relative; height: 20px; font-size: 16px; background-color: #303030; color: #f1f1f1; text-align: center;">\n '+c[0].telephone+'\n</div>\n<div id="businessService" style="width: 100%; position: relative; height: 110px; background-color: #ffffff;">\n<div id="businessService1" style="width: 100%; height: 80px; font-size: 16px; background-color: #696969; position: relative; overflow-y: scroll;">\n '+c[0].product+'\n</div>\n<div id="businessService2" style="width: 100%; height: 30px; font-size: 16px; background-color: #303030; position: relative;">\n '+c[0].priceValue+" "+c[0].priceCurrency+'\n</div>\n<div id="businessService3" style="width: 100%; height: 20px; position: relative; display: none;">\nService 3 - Price XXXX EUR\n</div>\n<div id="businessService4" style="width: 100%; height: 20px; position: relative; display: none;">\nService 4 - Price XXXX EUR\n</div>\n<div id="businessService5" style="width: 100%; height: 20px; position: relative; display: none;">\nService 5 - Price XXXX EUR\n</div>\n</div>\n<div id="businessOpeningHours" style="width: 100%; position: relative; height: 60px; background-color: #303030; color: #f1f1f1;">\n\n</div>\n  <div class="businessContact" style="cursor: hand; cursor: pointer; width: 100%; position: relative; height: 30px; color: black; background-color: lightgray; font-size: 21px; text-align: center; background-image: -webkit-gradient(radial, center center, 10, center center, from(white), to(#909090)); background-image: -o-radial-gradient(white, #909090); background-image: -ms-radial-gradient(white, #909090); background-image: -moz-radial-gradient(white, #909090); background-image: -webkit-radial-gradient(white, #909090); background-image: radial-gradient(white, #909090);">\nkontaktieren Sie uns\n  </div>\n</div>\n\n<div id="firstTile" style="position: relative; float: left; width: 300px; height: 300px; display: none;">\n<div style="width: 100%; position: relative; height: 30px; font-size: 20px; background-color: #696969; color: #90EE90;">\n'+c[0].name+'\n</div>\n<div id="map" style="width: 100%; height: 270px; position: absolute; z-index: 900; height: 89%; background-color: green;"></div>\n</div>\n\n<div id="thirdTile" style="width: 298px; height: 300px; float: left; position: relative; border-left:dotted 1px #bbbbbb">\n<div id="businessWho" class="bookingtab" style="cursor: hand; cursor: pointer; width: 98%; height: 98px; position: relative; float: left; background-color: #696969; color: #00BFFF; font-size: 49px; border-bottom:dotted 1px #bbbbbb; border-right:dotted 1px #bbbbbb" >\nWie?\n<div id="businessWhoLabel" style="cursor: hand; cursor: pointer; position: absolute; z-index: 900; left: 0px; bottom: 0px; height: 50%; width: 100%; font-size: 14pt; color: white; background-color: #303030;">\nÜber uns\n</div>\n</div>\n<div id="businessWhat" class="bookingtab" style="cursor: hand; cursor: pointer; width: 98%; height: 98px; float: left; position: relative; background-color: #696969; color: #FA8072; font-size: 49px; border-bottom:dotted 1px #bbbbbb; border-right:dotted 1px #bbbbbb">\nWas?\n<div id="businessWhatLabel" style="cursor: hand; cursor: pointer; position: absolute; z-index: 900; left: 0px; bottom: 0px; height: 50%; width: 100%; font-size: 14pt; color: white; background-color: #303030;">\nUnser Angebot\n</div>\n</div>\n<div id="businessWhere" class="bookingtab" style="cursor: hand; cursor: pointer; width: 98%; height: 100px; position: relative; float: left; background-color: #696969; color: #90EE90; font-size: 49px; border-bottom:dotted 1px #bbbbbb; border-right:dotted 1px #bbbbbb">\nWo?\n<div id="businessWhereLabel" style="cursor: hand; cursor: pointer; position: absolute; z-index: 900; width: 100%; height: 50%; left: 0px; bottom: 0px; font-size: 14pt; color: white; background-color: #303030;">\nReiseroute Karte\n</div>\n</div>\n</div>\n\n</div>\n',e.append(g),this.bookingtabsiterator=0,jQuery(".close").click(function(){var b,c,d,e;b=(new Date).getTime(),e=b-h,d=a.widgets[i.name].options.title;try{return _gaq.push(["_trackEvent",i.name,"viewed",d,e]),_gaq.push(["_trackTiming",i.name,d,e,"viewed"])}catch(f){c=f}}),jQuery("#mask").click(function(){var b,c,d,e;b=(new Date).getTime(),e=b-h,d=a.widgets[i.name].options.title;try{return _gaq.push(["_trackEvent",i.name,"viewed",d,e]),_gaq.push(["_trackTiming",i.name,d,e,"viewed"])}catch(f){c=f}}),jQuery(".businessContact").click(function(){var b,c,d,e;return jQuery(".businessContact").text("Danke schön!"),d=a.getGRDataResource(),d.length&&d.length>0?(e=jQuery.now(),b=d[0].email,c=d[0].name,jQuery.post("http://devserver.sti2.org/connectme/logger.php?",{entry:'        <div  style="width: 100%; position: relative; float: left; background-color: #e1e1e1; height: 30px; border-bottom: 1px dotted #696969;" class="item">\n        <div style="height: 100%; color: #32CD32; font-size: 16pt; background-color: #505050; width: 30px; text-align: center; position: relative; float: left;" class="icon">\n        @</div>\n            <div style="width: 200px; height: 100%; position: relative; float: left; font-size: 16px; text-align: center; border-right: 1px dotted #696969;" class="ip">\n'+i.clientIP+'</div>\n            <div style="width: 200px; height: 100%; position: relative; float: left; font-size: 16px; text-align: center; border-right: 1px dotted #696969;" class="email">\n'+b+'l</div>\n            <div style="width: 200px; height: 100%; position: relative; float: left; font-size: 16px; text-align: center; border-right: 1px dotted #696969;" class="name">\n'+c+'</div>\n            <div style="width: 200px; height: 100%; position: relative; float: left; font-size: 16px; text-align: center; border-right: 1px dotted #696969;" class="time">\n'+e+"</div>\n            </div>"},function(){})):void 0}),jQuery("#businessWho").click(function(){return jQuery(".bookingtab.selected").removeClass("selected"),jQuery("#businessWho").addClass("selected"),jQuery("#forthTile").css("display","block"),jQuery("#firstTile").css("display","none"),jQuery("#secondTile").css("display","none"),jQuery("#map").empty()}),jQuery("#businessWhat").click(function(){return jQuery(".bookingtab.selected").removeClass("selected"),jQuery("#businessWhat").addClass("selected"),jQuery("#forthTile").css("display","none"),jQuery("#firstTile").css("display","none"),jQuery("#secondTile").css("display","block"),jQuery("#map").empty()}),jQuery("#businessWhere").click(function(){return jQuery(".bookingtab.selected").removeClass("selected"),jQuery("#businessWhere").addClass("selected"),jQuery("#forthTile").css("display","none"),jQuery("#firstTile").css("display","block"),jQuery("#secondTile").css("display","none"),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return h=void 0,j="Planai - Hochwurzen",i=47.392887,k=13.693318,l=void 0,n=void 0,o=void 0,r=void 0,s=void 0,t=void 0,q=void 0,c=void 0,d=void 0,f=new google.maps.DirectionsService,g=a.getGRDataResource(),g.length&&g.length>0&&(i=g[0].geoLat,k=g[0].geoLong),o=document.getElementById("map"),e=new google.maps.DirectionsRenderer,c=new google.maps.LatLng(i,k),m={zoom:7,mapTypeId:google.maps.MapTypeId.ROADMAP,center:c},l=new google.maps.Map(o,m),q=new google.maps.LatLng(b.coords.latitude,b.coords.longitude),e.setMap(l),this.geomap=l,p={origin:q,destination:c,travelMode:google.maps.TravelMode.DRIVING},f.route(p,function(a,b){return b===google.maps.DirectionsStatus.OK?e.setDirections(a):void 0})},function(a){switch(a.code){case a.TIMEOUT:return alert("Timeout");case a.POSITION_UNAVAILABLE:return alert("Position unavailable");case a.PERMISSION_DENIED:return alert("Permission denied");case a.UNKNOWN_ERROR:return alert("Unknown error")}}):void 0}),jQuery("#businessWho").trigger("click")):void 0},d}(window.LimePlugin)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.BusinessPlugin=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.init=function(){var a,b,c,d,e,f;for(this.name="BusinessPlugin",a=void 0,console.info("Initialize BusinessPlugin"),d=this.lime.annotations,f=[],b=0,c=d.length;c>b;b++)a=d[b],a.isBookmark()&&a.resource.value.indexOf("youtube.com")<0&&("http://connectme.at/ontology#explicitlyShows"===(e=a.relation.value)||"http://connectme.at/ontology#explicitlyMentions"===e||"http://connectme.at/ontology#implicitlyShows"===e||"http://connectme.at/ontology#implicitlyMentions"===e||"http://connectme.at/ontology#hasContent"===e)?f.push(this.handleAnnotation(a)):f.push(void 0);return f},d.prototype.handleAnnotation=function(a){var b,c,d,e,f=this;return c=a.resource.value,c.length>=3&&(d=a.resource.value,b=d.replace("http://","").replace("https://","").split(/[/?#]/)[0].replace("www.","")),e=this.lime.allocateWidgetSpace(this,{thumbnail:"img/shop.png",title:""+(("function"==typeof a.getLabel?a.getLabel():void 0)||b),type:"BusinessWidget",sortBy:function(){return 1e4*a.start+a.end}}),e.annotation=a,jQuery(e).bind("activate",function(b){var c,d,e;try{e=b.target.options.title,d=f.name,_gaq.push(["_trackEvent",d,"clicked",e])}catch(g){c=g}return f.showAbstractInModalWindow(a,f.getModalContainer())}),a.widgets[this.name]=e,jQuery(a).bind("becomeActive",function(b){var c,d,e;try{d=b.target.widgets[f.name].options.title,e=f.name,_gaq.push(["_trackEvent",e,"becameActive",d])}catch(g){c=g}return a.widgets[f.name].setActive()}),jQuery(a).bind("becomeInactive",function(b){var c,d,e;try{d=b.target.widgets[f.name].options.title,e=f.name,_gaq.push(["_trackEvent",e,"becomeInactive",d])}catch(g){c=g}return a.widgets[f.name].setInactive()})},d.prototype.showAbstractInModalWindow=function(a,b){var c,d,e,f,g,h=this;return d=$(b),d.css("width","800px"),d.css("height","600px"),g=(new Date).getTime(),c=this.lime,e="",e=a.resource.value,a.resource.value.indexOf("webtv.feratel.com")>0&&(e=e.replace(/\$\$/g,"&")),console.log(e),f='<iframe frameborder="0" style="height: 600px; width: 800px; position: relative; margin: 0 auto;" src="'+e+'">\n<p>Your browser does not support iframes.</p>\n</iframe>',d.append(f),$(".close").click(function(){var b,c,d,e;b=(new Date).getTime(),e=b-g,d=a.widgets[h.name].options.title;try{return _gaq.push(["_trackEvent",h.name,"viewed",d,e]),_gaq.push(["_trackTiming",h.name,d,e,"viewed"])}catch(f){c=f}}),$("#mask").click(function(){var b,c,d,e;b=(new Date).getTime(),e=b-g,d=a.widgets[h.name].options.title;try{return _gaq.push(["_trackEvent",h.name,"viewed",d,e]),_gaq.push(["_trackTiming",h.name,d,e,"viewed"])}catch(f){c=f}})},d}(window.LimePlugin)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.DBPediaInfoForTVPlugin=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.init=function(){var a,b,c,d,e,f;for(this.name="DBPediaInfoForTVPlugin",console.info("Initialize "+this.name),d=this.lime.annotations,f=[],b=0,c=d.length;c>b;b++)a=d[b],a.resource.value.indexOf("dbpedia")>0&&("http://connectme.at/ontology#explicitlyShows"===(e=a.relation.value)||"http://connectme.at/ontology#explicitlyMentions"===e||"http://connectme.at/ontology#implicitlyShows"===e||"http://connectme.at/ontology#implicitlyMentions"===e)?f.push(this.handleAnnotation(a)):f.push(void 0);return f},d.prototype.handleAnnotation=function(a){var b=this;return a.entityPromise.done(function(){var c,d;return c=a.getDescription(),c=c.replace("No description found.",""),c.length>=3?(d=b.lime.allocateWidgetSpace(b,{thumbnail:"img/info.png",title:""+a.getLabel()+" Info",type:"DbpediaInfoForTVWidget",sortBy:function(){return 1e4*a.start+a.end}}),d.annotation=a,jQuery(d).bind("activate",function(c){var d,e,f;try{f=c.target.options.title,e=b.name,_gaq.push(["_trackEvent",e,"clicked",f])}catch(g){d=g}return b.showAbstractInModalWindow(a,b.getModalContainer())}),a.widgets[b.name]=d,jQuery(a).bind("becomeActive",function(c){var d,e,f;try{e=c.target.widgets[b.name].options.title,f=b.name,_gaq.push(["_trackEvent",f,"becameActive",e])}catch(g){d=g}return a.widgets[b.name].setActive()}),jQuery(a).bind("becomeInactive",function(c){var d,e,f;try{e=c.target.widgets[b.name].options.title,f=b.name,_gaq.push(["_trackEvent",f,"becomeInactive",e])}catch(g){d=g}return a.widgets[b.name].setInactive()}),b.getLSIImages(a),jQuery(d).bind("leftarrow",function(){return jQuery("#lefticon").trigger("click")}),jQuery(d).bind("rightarrow",function(){return jQuery("#righticon").trigger("click")})):void 0})},d.prototype.getLSIImages=function(a){return this.lime.cmf.getLSIImagesForTerm(a.resource.value,function(b,c){return b?console.warn("Error getting LSI images resources",b):(console.info("LSI resources for",a,c),a.lsiImageResources=_(c).map(function(a){var b;return b={image:a.image.value}}),a.getLsiImagesResources=function(){return this.lsiImageResources})})},d.prototype.showAbstractInModalWindow=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this;if(j=jQuery(b),j.css("width","450px"),j.css("height","auto"),this.index=0,o=(new Date).getTime(),f=a.getLabel(),l=a.getPage(),g=this.lime,c=a.getDescription(),i=c,m=[],i.length>=260&&(k=i.length,i.length>=260)){for(q=i.split(" "),k=q.length,p="",e=0,s=0,t=q.length;t>s;s++)r=q[s],p.length<260?p+=r+" ":(m.push(p),p="");i=m[0]}return console.log(m),d=a.getDepiction({without:"thumb"}),null===d&&(d="img/noimagenew.png"),h=("function"==typeof a.getLsiImagesResources?a.getLsiImagesResources():void 0)||[],console.log("Asociated images ",f,h),n=m.length<1?'         <div id="ifoWidgetExpanded" style="border: 1px dotted lightgray; position: relative;height: auto; width: 100%;">\n         <div id="infoWidget" style="background-color: rgba(37, 37, 37, 0.7); height: 40px; left: 0px; width: 100%; position: relative; float: left;">\n         <div class="infoWidgeticon" style="border-right: 1px dotted lightgray; position: relative; height: 100%; float: left; background-color: #3f3e3e; width: 8%;">\n         <span id="iconLabel" style="font: Times; position: relative; font-weight: bold; font-size: 23px; top: 21%; left: 45%; color: rgb(82, 207, 255); font-family: \'Times New Roman\',Times,serif; font-style: italic;">i</span>\n         </div>\n         <div class="infoWidgetTitle" style="font: Arial; position: relative; float: left; height: 100%; width: 86%; font-family: Arial,Helvetica,sans-serif; font-size: 26px; color: white; font-weight: normal; text-align: left; vertical-align: middle; text-indent: 1em; line-height: 140%;">\n'+f+'</div>\n         </div>\n         <div id="infoText" style="padding: 10px; position: relative; float: left; background-color: rgba(68, 68, 68, 0.7); height: auto; font-style: normal; width: 96%;">\n         <div id="infoTextBioTitle" style="font: Helvetica; position: relative; float: left; width: 100%; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: rgb(82, 207, 255); height: auto;">\n         Info</div>\n         <div id="infoMainTextContent" style="font: Helvetica; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: #f1f1f1; float: left; line-height: normal; position: relative; height: auto; width: 100%;">\n'+i+"\n         </div>\n         </div>\n         </div>":'         <div id="ifoWidgetExpanded" style="border: 1px dotted lightgray; position: relative;height: auto; width: 100%;">\n         <div id="infoWidget" style="background-color: rgba(37, 37, 37, 0.7); height: 40px; left: 0px; width: 100%; position: relative; float: left;">\n         <div class="infoWidgeticon" style="border-right: 1px dotted lightgray; position: relative; height: 100%; float: left; background-color: #3f3e3e; width: 8%;">\n         <span data-dojo-type="shapes.Text" id="iconLabel" style="font: Times; position: relative; font-weight: bold; font-size: 23px; top: 21%; left: 45%; color: rgb(82, 207, 255); font-family: \'Times New Roman\',Times,serif; font-style: italic;">i</span>\n         </div>\n         <div class="infoWidgetTitle" style="font: Arial; position: relative; float: left; height: 100%; width: 86%; font-family: Arial,Helvetica,sans-serif; font-size: 26px; color: white; font-weight: normal; text-align: left; vertical-align: middle; text-indent: 1em; line-height: 140%;">\n'+f+'</div>\n         </div>\n         <div id="infoText" style="padding: 10px; position: relative; float: left; background-color: rgba(68, 68, 68, 0.7); height: auto; font-style: normal; width: 96%;">\n         <div id="infoTextBioTitle" style="font: Helvetica; position: relative; float: left; width: 100%; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: rgb(82, 207, 255); height: auto;">\n         Info</div>\n           <div id="infoMainTextContent" style="font: Helvetica; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: #f1f1f1; float: left; line-height: normal; position: relative; height: auto; width: 100%;">\n'+m[this.index]+'\n           </div>\n         <div id="widgetControler" style="position: relative; height: 60px; width: 100%; float:left">\n         </div>\n\n         <div id="righticon" unselectable="on" style=" -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;cursor: hand; cursor: pointer; border-right: 1px dotted lightgray; background-color: #000000; position: absolute; z-index: 9000; right: 0px; bottom: 0px; width: 50px; height: 50px;">\n         <span style="position: relative; font-family: \'Times New Roman\',Times,serif; font-style: italic; font-weight: bold; font-size: 23px; top: 21%; left: 45%; color: rgb(82, 207, 255);">&gt;</span>\n         </div>\n         <div id="lefticon" unselectable="on" style="-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; cursor: hand; cursor: pointer; display: none; border-left: 1px dotted lightgray; background-color: #000000; position: absolute; z-index: 9000; left: 0px; bottom: 0px; width: 50px; height: 50px;">\n         <span style="position: relative; font-family: \'Times New Roman\',Times,serif; font-style: italic; font-weight: bold; font-size: 23px; top: 21%; left: 45%; color: rgb(82, 207, 255);">&lt;</span>\n         </div>\n         <div id="pageNumber" style="position: absolute; z-index: 900; width: 50px; height: 35px; left: 45%; bottom: 0px; background: transparent;">'+(this.index+1)+"/"+m.length+"</div>\n        </div>\n        </div>",j.append(n),jQuery(".close").click(function(){var b,c,d,e;b=(new Date).getTime(),e=b-o,d=a.widgets[u.name].options.title;try{return _gaq.push(["_trackEvent",u.name,"viewed",d,e]),_gaq.push(["_trackTiming",u.name,d,e,"viewed"])}catch(f){c=f}}),jQuery("#mask").click(function(){var b,c,d,e;b=(new Date).getTime(),e=b-o,d=a.widgets[u.name].options.title;try{return _gaq.push(["_trackEvent",u.name,"viewed",d,e]),_gaq.push(["_trackTiming",u.name,d,e,"viewed"])}catch(f){c=f
}}),jQuery("#righticon").click(function(){return u.index++,1===u.index&&jQuery("#lefticon").css("display","block"),u.index>=m.length-1&&(u.index=m.length-1,jQuery("#righticon").css("display","none")),i=m[u.index],jQuery("#infoMainTextContent").text(i),jQuery("#pageNumber").text(""+(u.index+1)+"/"+m.length)}),jQuery("#lefticon").click(function(){return u.index--,u.index===m.length-2&&jQuery("#righticon").css("display","block"),u.index<=0&&(u.index=0,jQuery("#lefticon").css("display","none")),i=m[u.index],jQuery("#infoMainTextContent").text(i),jQuery("#pageNumber").text(""+(u.index+1)+"/"+m.length)})},d}(window.LimePlugin)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.DBPediaInfoPlugin=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.init=function(){var a,b,c,d,e,f;for(this.name="DBPediaInfoPlugin",console.info("Initialize "+this.name),d=this.lime.annotations,f=[],b=0,c=d.length;c>b;b++)a=d[b],a.resource.value.indexOf("dbpedia")>0&&("http://connectme.at/ontology#explicitlyShows"===(e=a.relation.value)||"http://connectme.at/ontology#explicitlyMentions"===e||"http://connectme.at/ontology#implicitlyShows"===e||"http://connectme.at/ontology#implicitlyMentions"===e)?f.push(this.handleAnnotation(a)):f.push(void 0);return f},d.prototype.handleAnnotation=function(a){var b=this;return a.entityPromise.done(function(){var c,d;return c=a.getDescription(),c=c.replace("No description found.",""),c.length>=3?(d=b.lime.allocateWidgetSpace(b,{thumbnail:"img/info.png",title:""+a.getLabel()+" Info",type:"DbpediaInfoWidget",sortBy:function(){return 1e4*a.start+a.end}}),d.annotation=a,jQuery(d).bind("activate",function(c){var d,e,f;try{f=c.target.options.title,e=b.name,_gaq.push(["_trackEvent",e,"clicked",f])}catch(g){d=g}return b.showAbstractInModalWindow(a,b.getModalContainer())}),a.widgets[b.name]=d,jQuery(a).bind("becomeActive",function(c){var d,e,f;try{e=c.target.widgets[b.name].options.title,f=b.name,_gaq.push(["_trackEvent",f,"becameActive",e])}catch(g){d=g}return a.widgets[b.name].setActive()}),jQuery(a).bind("becomeInactive",function(c){var d,e,f;try{e=c.target.widgets[b.name].options.title,f=b.name,_gaq.push(["_trackEvent",f,"becomeInactive",e])}catch(g){d=g}return a.widgets[b.name].setInactive()}),b.getLSIImages(a),jQuery(d).bind("leftarrow",function(){return jQuery("#lefticon").trigger("click")}),jQuery(d).bind("rightarrow",function(){return jQuery("#righticon").trigger("click")})):void 0})},d.prototype.getLSIImages=function(a){return this.lime.cmf.getLSIImagesForTerm(a.resource.value,function(b,c){return b?console.warn("Error getting LSI images resources",b):(console.info("LSI resources for",a,c),a.lsiImageResources=_(c).map(function(a){var b;return b={image:a.image.value}}),a.getLsiImagesResources=function(){return this.lsiImageResources})})},d.prototype.showAbstractInModalWindow=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this;if(j=jQuery(b),j.css("width","600px"),j.css("height","auto"),this.index=0,o=(new Date).getTime(),f=a.getLabel(),l=a.getPage(),g=this.lime,c=a.getDescription(),i=c,m=[],i.length>=260&&(k=i.length,i.length>=260)){for(q=i.split(" "),k=q.length,p="",e=0,s=0,t=q.length;t>s;s++)r=q[s],p.length<260?p+=r+" ":(m.push(p),p="");i=m[0]}return console.log(m),d=a.getDepiction({without:"thumb"}),null===d&&(d="img/noimagenew.png"),h=("function"==typeof a.getLsiImagesResources?a.getLsiImagesResources():void 0)||[],console.log("Asociated images ",f,h),n=m.length<1?'<div id="infoWidgetExpanded" unselectable="on" style="-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: relative; height: 600px; width: auto; ">\n<div id="infoMainText" style="position: relative; float: right; background-color: #242424; width: 300px; height: 300px; font-family: caviardreamsregular;">\n<span id="infoMainTextContent" >'+i+'</span>\n<div style="position: absolute; z-index: 900; width: 100px; height: 50px; right: 0px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-size: contain; background-image: url(\'img/120px-DBpediaLogo.svg.png\');"></div>\n</div>\n\n<div id="infoMainPicture" style="position: relative; float: right; width: 300px; height: 300px; background-color: #6ab1e7;">\n   <div id="pic" style="position: relative; float: left; height: 100%; background-image: url(\''+d+'\'); background-repeat: no-repeat; background-position: center center; background-size: cover; width: 100%;">\n    <div id="icon" style="border-right: 1px dotted lightgray; float: left; background-color: #3f3e3e; position: absolute; z-index: 9000; right: 0px; bottom: 0px; width: 50px; height: 50px;">\n    <span style="text-align:center; position: relative; font-family: \'Times New Roman\',Times,serif; font-style: italic; font-weight: bold; font-size: 23px; top: 21%; left: 45%; color: rgb(112, 196, 243);">i</span>\n    </div>\n    </div>\n    <div style="position: absolute; left: 0px; bottom: 0; width: 300px; height: 100px;">\n    <div id="titlebackground" style="float: left; position: absolute; z-index: 900; width: 100%; bottom: 0px; background-color: #000000; left: 0px; top: 0px; height: 100%; opacity: 0.5;">\n    </div>\n  <span id="titletext" style="text-align:center; font-family: CaviarDreamsBold; font-size: 29px; line-height: 140%; position: absolute; z-index: 900; left: 5px; width: 100%; bottom: 0px; height: 100%; color: #fcf7f7; opacity: 1.0;">'+f+"</span></div>\n </div>\n\n</div>":'<div id="infoWidgetExpanded" unselectable="on" style="-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: relative; height: 600px; width: auto; ">\n<div id="infoMainText" style="position: relative; float: right; background-color: #242424; width: 300px; height: 300px; font-family: caviardreamsregular;">\n<span id="infoMainTextContent" >'+m[this.index]+'</span>\n<div style="position: absolute; z-index: 900; width: 100px; height: 50px; left: 0px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-size: contain; background-image: url(\'img/120px-DBpediaLogo.svg.png\'); background-color: #3f3e3e;"></div>\n<div id="pageNumber" style="position: absolute; z-index: 900; width: 50px; height: 35px; left: 135px; bottom: 0px; background: transparent;">'+(this.index+1)+"/"+m.length+'</div>\n<div id="righticon" unselectable="on" style=" -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;cursor: hand; cursor: pointer; border-right: 1px dotted lightgray; background-color: #000000; position: absolute; z-index: 9000; right: 0px; bottom: 0px; width: 50px; height: 50px;">\n<span style="position: relative; font-family: \'Times New Roman\',Times,serif; font-style: italic; font-weight: bold; font-size: 23px; top: 21%; left: 45%; color: rgb(112, 196, 243);">&gt;</span>\n</div>\n</div>\n\n<div id="infoMainPicture" style="position: relative; float: right; width: 300px; height: 300px; background-color: #6ab1e7;">\n<div id="pic" style="position: relative; float: left; height: 100%; background-image: url(\''+d+'\'); background-repeat: no-repeat; background-position: center center; background-size: cover; width: 100%;">\n<div id="icon" style="border-right: 1px dotted lightgray; float: left; background-color: #3f3e3e; position: absolute; z-index: 9000; right: 0px; bottom: 0px; width: 50px; height: 50px;">\n<span style="position: relative; font-family: \'Times New Roman\',Times,serif; font-style: italic; font-weight: bold; font-size: 23px; top: 21%; left: 45%; color: rgb(112, 196, 243);">i</span>\n</div>\n<div id="lefticon" unselectable="on" style="-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; cursor: hand; cursor: pointer; display: none; border-left: 1px dotted lightgray; background-color: #000000; position: absolute; z-index: 9000; left: 0px; bottom: 0px; width: 50px; height: 50px;">\n<span style="position: relative; font-family: \'Times New Roman\',Times,serif; font-style: italic; font-weight: bold; font-size: 23px; top: 21%; left: 45%; color: rgb(112, 196, 243);">&lt;</span>\n</div>\n</div>\n<div style="position: absolute; left: 0px; bottom: 0; width: 300px; height: 100px;">\n<div id="titlebackground" style="float: left; position: absolute; z-index: 900; width: 100%; bottom: 0px; background-color: #000000; left: 0px; top: 0px; height: 100%; opacity: 0.5;">\n</div>\n<span id="titletext" style="text-align:center; font-family: CaviarDreamsBold; font-size: 29px; line-height: 140%; position: absolute; z-index: 900; left: 5px; width: 100%; bottom: 0px; height: 100%; color: #fcf7f7; opacity: 1.0;">'+f+"</span></div>\n</div>\n\n\n</div>",j.append(n),jQuery(".close").click(function(){var b,c,d,e;b=(new Date).getTime(),e=b-o,d=a.widgets[u.name].options.title;try{return _gaq.push(["_trackEvent",u.name,"viewed",d,e]),_gaq.push(["_trackTiming",u.name,d,e,"viewed"])}catch(f){c=f}}),jQuery("#mask").click(function(){var b,c,d,e;b=(new Date).getTime(),e=b-o,d=a.widgets[u.name].options.title;try{return _gaq.push(["_trackEvent",u.name,"viewed",d,e]),_gaq.push(["_trackTiming",u.name,d,e,"viewed"])}catch(f){c=f}}),jQuery("#righticon").click(function(){return u.index++,1===u.index&&jQuery("#lefticon").css("display","block"),u.index>=m.length-1&&(u.index=m.length-1,jQuery("#righticon").css("display","none")),i=m[u.index],jQuery("#infoMainTextContent").text(i),jQuery("#pageNumber").text(""+(u.index+1)+"/"+m.length)}),jQuery("#lefticon").click(function(){return u.index--,u.index===m.length-2&&jQuery("#righticon").css("display","block"),u.index<=0&&(u.index=0,jQuery("#lefticon").css("display","none")),i=m[u.index],jQuery("#infoMainTextContent").text(i),jQuery("#pageNumber").text(""+(u.index+1)+"/"+m.length)})},d}(window.LimePlugin)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.GeoNamesMapForTVPlugin=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.init=function(){var a,b,c,d,e,f;for(this.name="GeoNamesMapForTVPlugin",a=void 0,console.info("Initialize GeoNamesMapForTVPlugin"),d=this.lime.annotations,f=[],b=0,c=d.length;c>b;b++)a=d[b],a.resource.value.indexOf("sws.geonames.org")>0&&("http://connectme.at/ontology#explicitlyShows"===(e=a.relation.value)||"http://connectme.at/ontology#explicitlyMentions"===e||"http://connectme.at/ontology#implicitlyShows"===e||"http://connectme.at/ontology#implicitlyMentions"===e)?f.push(this.handleAnnotation(a)):f.push(void 0);return f},d.prototype.handleAnnotation=function(a){var b=this;return a.entityPromise.done(function(){var c;return c=b.lime.allocateWidgetSpace(b,{thumbnail:"img/mapIcon.png",title:""+a.getLabel()+" Map",type:"GeoNamesMapForTVWidget",sortBy:function(){return 1e4*a.start+a.end}}),c.annotation=a,jQuery(c).bind("activate",function(c){var d,e,f;try{f=c.target.options.title,e=b.name,_gaq.push(["_trackEvent",e,"clicked",f])}catch(g){d=g}return b.showInModalWindow(a,b.getModalContainer())}),a.widgets[b.name]=c,jQuery(a).bind("becomeActive",function(c){var d,e,f;try{e=c.target.widgets[b.name].options.title,f=b.name,_gaq.push(["_trackEvent",f,"becameActive",e])}catch(g){d=g}return a.widgets[b.name].setActive()}),jQuery(a).bind("becomeInactive",function(c){var d,e,f;try{e=c.target.widgets[b.name].options.title,f=b.name,_gaq.push(["_trackEvent",f,"becomeInactive",e])}catch(g){d=g}return a.widgets[b.name].setInactive()}),jQuery(c).bind("leftarrow",function(){return b.geotabsiterator=b.geotabs.length===b.geotabsiterator+1?0:b.geotabsiterator+1,0===b.geotabsiterator&&jQuery("#geoMap").trigger("click"),2===b.geotabsiterator&&jQuery("#geoWeather").trigger("click"),1===b.geotabsiterator&&jQuery("#geoRout").trigger("click"),3===b.geotabsiterator?jQuery("#geoPanoramio").trigger("click"):void 0}),jQuery(c).bind("rightarrow",function(){return b.geotabsiterator=0===b.geotabsiterator?b.geotabs.length-1:b.geotabsiterator-1,0===b.geotabsiterator&&jQuery("#geoMap").trigger("click"),2===b.geotabsiterator&&jQuery("#geoWeather").trigger("click"),1===b.geotabsiterator&&jQuery("#geoRout").trigger("click"),3===b.geotabsiterator?jQuery("#geoPanoramio").trigger("click"):void 0}),jQuery(c).bind("uparrow",function(){return b.mapzoom++,b.routemapzoom++,jQuery(".selected:first").trigger("click")}),jQuery(c).bind("downarrow",function(){return b.mapzoom--,b.routemapzoom--,jQuery(".selected:first").trigger("click")})})},d.prototype.showInModalWindow=function(a,b){var c,d,e,f,g,h=this;e=void 0,f=void 0,d=UTILS.getParameterByName("lang"),g=(new Date).getTime(),c=a.getLabel(),e=jQuery(b),e.css("width","450px"),e.css("height","450px"),f=d.indexOf("en")>=0?'<div id="ifoWidgetExpanded" style="border: 1px dotted lightgray; position: absolute; top: 0; z-index: 100; width: 450px; right: 0; height: 100%;">\n<div id="map_area" style="left: 0px; top: 0px; width: 450px; height: 100%; position: relative;"><img></img></div>\n<div id="mapMenu" style="position: absolute; z-index: 900; width: 100%; background-color: rgba(37, 37, 37, 0.7); right: 1px; bottom: 0px; height: 41px;">\n<div if="mapLabel" style="position: relative; float: left; height: 40px; width: auto;">&nbsp;'+c+'</div>\n<div id="geoMap" class="geotab" style="position: relative; background-position: center center; background-image: url(\'img/mapIcon.png\'); background-size: contain; float: right; height: 40px; width: 86px;"></div>\n<div id="geoWeather" class="geotab disabled" style="display: none; position: relative; background-position: center center; background-image: url(\'img/weather.png\'); background-size: contain; float: right; width: 86px; height: 40px;"></div>\n<div id="geoRout" class="geotab disabled" style="display: none; background-position: center center; background-size: contain; background-image: url(\'img/directionIcon.png\'); float: right; width: 86px; height: 40px;"></div>\n<div id="geoPanoramio" class="geotab disabled" style="display: none; background-position: center center; background-size: contain; background-image: url(\'img/directionIcon.png\'); float: right; width: 86px; height: 40px;"></div>\n</div>\n<!-- <div id="closingButton" style="position: absolute; z-index: 900; width: 87px; height: 38px; background-color: #414040; left: 513px; top: 408px;"><span data-dojo-type="shapes.Text" style="font-size: 14px; position: absolute; z-index: 900; color: #ffffff; left: 41px; top: 8.5px;">X</span></div> -->\n</div>':'<div id="ifoWidgetExpanded" style="border: 1px dotted lightgray; position: absolute; top: 0; z-index: 100; width: 450px; right: 0; height: 80%;">\n<div id="map_area" style="left: 0px; top: 0px; width: 450px; height: 100%; position: relative;"></div>\n<div id="mapMenu" style="position: absolute; z-index: 900; width: 100%; background-color: rgba(37, 37, 37, 0.7); right: 1px; bottom: 0px; height: 41px;">\n<div if="mapLabel" style="position: relative; float: left; height: 40px; width: auto;">&nbsp;'+c+'</div>\n<div id="geoMap" class="geotab" style="position: relative; background-position: center center; background-image: url(\'img/mapIcon.png\'); background-size: contain; float: right; height: 40px; width: 86px;"></div>\n<div id="geoWeather" class="geotab disabled" style="display: none; position: relative; background-position: center center; background-image: url(\'img/weather.png\'); background-size: contain; float: right; width: 86px; height: 40px;"></div>\n<div id="geoRout" class="geotab disabled" style="display: none; background-position: center center; background-size: contain; background-image: url(\'img/directionIcon.png\'); float: right; width: 86px; height: 40px;"></div>\n<div id="geoPanoramio" class="geotab disabled" style="display: none; background-position: center center; background-size: contain; background-image: url(\'img/directionIcon.png\'); float: right; width: 86px; height: 40px;"></div>\n</div>\n<!-- <div id="closingButton" style="position: absolute; z-index: 900; width: 87px; height: 38px; background-color: #414040; left: 513px; top: 408px;"><span data-dojo-type="shapes.Text" style="font-size: 14px; position: absolute; z-index: 900; color: #ffffff; left: 41px; top: 8.5px;">X</span></div> -->\n</div>',e.append(f),jQuery(".close").click(function(){var b,c,d,e;b=(new Date).getTime(),e=b-g,d=a.widgets[h.name].options.title;try{return _gaq.push(["_trackEvent",h.name,"viewed",d,e]),_gaq.push(["_trackTiming",h.name,d,e,"viewed"])}catch(f){c=f}}),jQuery("#mask").click(function(){var b,c,d,e;b=(new Date).getTime(),e=b-g,d=a.widgets[h.name].options.title;try{return _gaq.push(["_trackEvent",h.name,"viewed",d,e]),_gaq.push(["_trackTiming",h.name,d,e,"viewed"])}catch(f){c=f}}),this.geotabs=jQuery(".geotab:not(.disabled)"),this.geotabsiterator=0,jQuery("#geoMap").click(function(){var b,c,d,e,f,g,i,j,k;return jQuery(".geotab.selected").removeClass("selected"),jQuery("#location_bar").css("visibility","visible"),jQuery("#weather_bar").css("visibility","hidden"),jQuery("#rout_bar").css("visibility","hidden"),jQuery("#map_area").empty(),b=void 0,c=void 0,d=void 0,e=void 0,f=void 0,g=void 0,i=void 0,k=void 0,e=a.getLabel(),c=a.getLatitude(),f=a.getLongitude(),g="#map_area",jQuery(g).empty(),j='<img src="http://maps.google.com/maps/api/staticmap?center='+c+","+f+"&zoom="+h.mapzoom+'&size=450x450&maptype=roadmap&visual_refresh=true&sensor=false"></img>',jQuery(g).append(j),jQuery("#geoMap").addClass("selected")}),jQuery("#geoWeather").click(function(){var b,c,d,e,f,g,h,i,j,k;return jQuery(".geotab.selected").removeClass("selected"),jQuery("#location_bar").css("visibility","hidden"),jQuery("#weather_bar").css("visibility","visible"),jQuery("#rout_bar").css("visibility","hidden"),jQuery("#map_area").empty(),b=void 0,c=void 0,d=void 0,e=void 0,f=void 0,g=void 0,i=void 0,j=void 0,k=void 0,e=a.getLabel(),c=a.getLatitude(),f=a.getLongitude(),e=a.getLabel(),c=a.getLatitude(),f=a.getLongitude(),h=12,g="#map_area",jQuery(g).attr("src","http://maps.google.com/maps/api/staticmap?center="+c+","+f+"&zoom="+h+"&size=450x450&maptype=roadmap&visual_refresh=true&sensor=false"),jQuery("#geoWeather").addClass("selected")}),jQuery("#geoRout").click(function(){return jQuery(".geotab.selected").removeClass("selected"),jQuery("#location_bar").css("visibility","hidden"),jQuery("#weather_bar").css("visibility","hidden"),jQuery("#rout_bar").css("visibility","visible"),jQuery("#map_area").empty(),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(b){var c,d,e,f,g,h,i,j,k,l,m,n;return e=void 0,f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,l=void 0,d=new google.maps.DirectionsService,g=a.getLabel(),f=a.getLatitude(),h=a.getLongitude(),c=new google.maps.LatLng(f,h),n=new google.maps.LatLng(b.coords.latitude,b.coords.longitude),m={origin:n,destination:c,travelMode:google.maps.TravelMode.DRIVING},this.directionString=""+b.coords.latitude+","+b.coords.longitude+"|",d.route(m,function(a,b){var c,d,f,g,h;if(b===google.maps.DirectionsStatus.OK){for(c=a.routes[0].legs[0],g=c.steps,h=[],d=0,f=g.length;f>d;d+=1)e=g[d],console.log(e.end_location),h.push(this.directionString+=e.end_location+"|");return h}}),console.log("route: "+b.coords.latitude+","+b.coords.longitude+"|"+f+","+h+" - @directionString= ",this.directionString),i="#map_area",jQuery(i).empty(),k='<img src="http://maps.google.com/maps/api/staticmap?path=color:0x0000ff|weight:5|'+this.directionString+'&zoom=6&size=450x450&visual_refresh=true&maptype=roadmap&sensor=false"></img>',jQuery(i).append(k)},function(a){switch(a.code){case a.TIMEOUT:return alert("Timeout");case a.POSITION_UNAVAILABLE:return alert("Position unavailable");case a.PERMISSION_DENIED:return alert("Permission denied");case a.UNKNOWN_ERROR:return alert("Unknown error")}}),jQuery("#geoRout").addClass("selected")}),jQuery("#geoPanoramio").click(function(){return jQuery(".geotab.selected").removeClass("selected"),jQuery("#geoPanoramio").addClass("selected")}),this.mapzoom=12,this.routemapzoom=6,jQuery("#geoMap").trigger("click"),jQuery("#geoMap").addClass("selected")},d}(window.LimePlugin)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.GeoNamesMapPlugin=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.init=function(){var a,b,c,d,e,f,g;for(this.name="GeoNamesMapPlugin",a=void 0,console.info("Initialize GeoNamesMapPlugin"),e=this.lime.annotations,g=[],c=0,d=e.length;d>c;c++)a=e[c],b=!1,b=a.resource.value.indexOf("sws.geonames.org")>0||a.hash.latitude&&a.hash.latitude,"http://connectme.at/ontology#explicitlyShows"!==(f=a.relation.value)&&"http://connectme.at/ontology#explicitlyMentions"!==f&&"http://connectme.at/ontology#implicitlyShows"!==f&&"http://connectme.at/ontology#implicitlyMentions"!==f&&(b=!1),b?g.push(this.handleAnnotation(a)):g.push(void 0);return g},d.prototype.handleAnnotation=function(a){var b=this;return a.entityPromise.done(function(){var c;return c=b.lime.allocateWidgetSpace(b,{thumbnail:"img/mapIcon.png",title:""+a.getLabel()+" Map",type:"GeoNamesMapWidget",sortBy:function(){return 1e4*a.start+a.end}}),c.annotation=a,jQuery(c).bind("activate",function(c){var d,e,f;try{f=c.target.options.title,e=b.name,_gaq.push(["_trackEvent",e,"clicked",f])}catch(g){d=g}return b.showInModalWindow(a,b.getModalContainer())}),a.widgets[b.name]=c,jQuery(a).bind("becomeActive",function(c){var d,e,f;try{e=c.target.widgets[b.name].options.title,f=b.name,_gaq.push(["_trackEvent",f,"becameActive",e])}catch(g){d=g}return a.widgets[b.name].setActive()}),jQuery(a).bind("becomeInactive",function(c){var d,e,f;try{e=c.target.widgets[b.name].options.title,f=b.name,_gaq.push(["_trackEvent",f,"becomeInactive",e])}catch(g){d=g}return a.widgets[b.name].setInactive()}),jQuery(c).bind("leftarrow",function(){return b.geotabsiterator=b.geotabs.length===b.geotabsiterator+1?0:b.geotabsiterator+1,0===b.geotabsiterator&&$("#geoMap").trigger("click"),1===b.geotabsiterator&&$("#geoWeather").trigger("click"),2===b.geotabsiterator&&$("#geoRout").trigger("click"),3===b.geotabsiterator?$("#geoPanoramio").trigger("click"):void 0}),jQuery(c).bind("rightarrow",function(){return b.geotabsiterator=0===b.geotabsiterator?b.geotabs.length-1:b.geotabsiterator-1,0===b.geotabsiterator&&$("#geoMap").trigger("click"),1===b.geotabsiterator&&$("#geoWeather").trigger("click"),2===b.geotabsiterator&&$("#geoRout").trigger("click"),3===b.geotabsiterator?$("#geoPanoramio").trigger("click"):void 0}),jQuery(c).bind("uparrow",function(){var a;return a=b.geomap.getZoom(),b.geomap.setZoom(a+1)}),jQuery(c).bind("downarrow",function(){var a;return a=b.geomap.getZoom(),b.geomap.setZoom(a-1)})})},d.prototype.showInModalWindow=function(a,b){var c,d,e,f,g=this;d=void 0,e=void 0,c=UTILS.getParameterByName("lang"),f=(new Date).getTime(),d=$(b),d.css("width","600px"),d.css("height","500px"),e=c.indexOf("en")>=0?' <div id="ifoWidgetExpanded" style="border: 1px dotted lightgray; position: absolute; top: 0; z-index: 100; width: 600px; right: 0; height: 100%;">\n <div id="map_area" style="left: 0px; top: 0px; width: 600px; height: 100%; position: relative;"></div>\n <div id="mapMenu" style="position: absolute; z-index: 900; width: auto; right: 1px; bottom: 0px; height: 41px;">\n <div id="geoMap" class="geotab" style="position: relative; background-position: center center; background-image: url(\'img/mapIcon.png\'); background-size: contain; float: right; height: 40px; width: 86px;"></div>\n <div id="geoWeather" class="geotab" style="position: relative; background-position: center center; background-image: url(\'img/weather.png\'); background-size: contain; float: right; width: 86px; height: 40px;"></div>\n <div id="geoRout" class="geotab" style="background-position: center center; background-size: contain; background-image: url(\'img/directionIcon.png\'); float: right; width: 86px; height: 40px;"></div>\n <div id="geoPanoramio" class="geotab disabled" style="display: none; background-position: center center; background-size: contain; background-image: url(\'img/directionIcon.png\'); float: right; width: 86px; height: 40px;"></div>\n </div>\n<!-- <div id="closingButton" style="position: absolute; z-index: 900; width: 87px; height: 38px; background-color: #414040; left: 513px; top: 408px;"><span data-dojo-type="shapes.Text" style="font-size: 14px; position: absolute; z-index: 900; color: #ffffff; left: 41px; top: 8.5px;">X</span></div> -->\n </div>':'<div id="ifoWidgetExpanded" style="border: 1px dotted lightgray; position: absolute; top: 0; z-index: 100; width: 600px; right: 0; height: 80%;">\n<div id="map_area" style="left: 0px; top: 0px; width: 600px; height: 100%; position: relative;"></div>\n<div id="mapMenu" style="position: absolute; z-index: 900; width: auto; right: 1px; bottom: 0px; height: 41px;">\n<div id="geoMap" class="geotab" style="position: relative; background-position: center center; background-image: url(\'img/mapIcon.png\'); background-size: contain; float: right; height: 40px; width: 86px;"></div>\n<div id="geoWeather" class="geotab" style="position: relative; background-position: center center; background-image: url(\'img/weather.png\'); background-size: contain; float: right; width: 86px; height: 40px;"></div>\n<div id="geoRout" class="geotab" style="background-position: center center; background-size: contain; background-image: url(\'img/directionIcon.png\'); float: right; width: 86px; height: 40px;"></div>\n<div id="geoPanoramio" class="geotab disabled" style="display: none; background-position: center center; background-size: contain; background-image: url(\'img/directionIcon.png\'); float: right; width: 86px; height: 40px;"></div>\n</div>\n<!-- <div id="closingButton" style="position: absolute; z-index: 900; width: 87px; height: 38px; background-color: #414040; left: 513px; top: 408px;"><span data-dojo-type="shapes.Text" style="font-size: 14px; position: absolute; z-index: 900; color: #ffffff; left: 41px; top: 8.5px;">X</span></div> -->\n</div>',d.append(e),this.geotabs=$(".geotab:not(.disabled)"),this.geotabsiterator=0,$(".close").click(function(){var b,c,d,e;b=(new Date).getTime(),e=b-f,d=a.widgets[g.name].options.title;try{return _gaq.push(["_trackEvent",g.name,"viewed",d,e]),_gaq.push(["_trackTiming",g.name,d,e,"viewed"])}catch(h){c=h}}),$("#mask").click(function(){var b,c,d,e;b=(new Date).getTime(),e=b-f,d=a.widgets[g.name].options.title;try{return _gaq.push(["_trackEvent",g.name,"viewed",d,e]),_gaq.push(["_trackTiming",g.name,d,e,"viewed"])}catch(h){c=h}}),$("#geoMap").click(function(){var b,c,d,e,f,h,i,j,k,l,m;return $(".geotab.selected").removeClass("selected"),$("#location_bar").css("visibility","visible"),$("#weather_bar").css("visibility","hidden"),$("#rout_bar").css("visibility","hidden"),$("#map_area").empty(),b=void 0,c=void 0,d=void 0,e=void 0,f=void 0,h=void 0,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0,e=a.getLabel(),c=a.getLatitude(),f=a.getLongitude(),j=document.getElementById("map_area"),d=new google.maps.LatLng(c,f),i={zoom:13,center:d,mapTypeId:google.maps.MapTypeId.ROADMAP},h=new google.maps.Map(j,i),g.geomap=h,$("#geoMap").addClass("selected")}),$("#geoWeather").click(function(){var b,c,d,e,f,h,i,j,k,l,m,n;return $(".geotab.selected").removeClass("selected"),$("#location_bar").css("visibility","hidden"),$("#weather_bar").css("visibility","visible"),$("#rout_bar").css("visibility","hidden"),$("#map_area").empty(),b=void 0,c=void 0,d=void 0,e=void 0,f=void 0,h=void 0,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0,n=void 0,e=a.getLabel(),c=a.getLatitude(),f=a.getLongitude(),j=document.getElementById("map_area"),d=new google.maps.LatLng(c,f),i={zoom:11,center:d,mapTypeId:google.maps.MapTypeId.ROADMAP},h=new google.maps.Map(j,i),k=new google.maps.weather.WeatherLayer({temperatureUnits:google.maps.weather.TemperatureUnit.CELSIUS}),k.setMap(h),g.geomap=h,$("#geoWeather").addClass("selected")}),$("#geoRout").click(function(){return $(".geotab.selected").removeClass("selected"),$("#location_bar").css("visibility","hidden"),$("#weather_bar").css("visibility","hidden"),$("#rout_bar").css("visibility","visible"),$("#map_area").empty(),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;return g=void 0,h=void 0,i=void 0,j=void 0,k=void 0,m=void 0,n=void 0,q=void 0,r=void 0,s=void 0,p=void 0,c=void 0,d=void 0,f=new google.maps.DirectionsService,i=a.getLabel(),h=a.getLatitude(),j=a.getLongitude(),n=document.getElementById("map_area"),e=new google.maps.DirectionsRenderer,c=new google.maps.LatLng(h,j),l={zoom:7,mapTypeId:google.maps.MapTypeId.ROADMAP,center:c},k=new google.maps.Map(n,l),p=new google.maps.LatLng(b.coords.latitude,b.coords.longitude),e.setMap(k),this.geomap=k,o={origin:p,destination:c,travelMode:google.maps.TravelMode.DRIVING},f.route(o,function(a,b){return b===google.maps.DirectionsStatus.OK?e.setDirections(a):void 0})},function(a){switch(a.code){case a.TIMEOUT:return alert("Timeout");case a.POSITION_UNAVAILABLE:return alert("Position unavailable");case a.PERMISSION_DENIED:return alert("Permission denied");case a.UNKNOWN_ERROR:return alert("Unknown error")}}),$("#geoRout").addClass("selected")}),$("#geoPanoramio").click(function(){return $(".geotab.selected").removeClass("selected"),$("#geoPanoramio").addClass("selected")}),$("#geoMap").trigger("click"),$("#geoMap").addClass("selected")},d}(window.LimePlugin)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.GoogleWeatherPlugin=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.init=function(){var a,b,c,d,e;for(this.name="GoogleWeatherPlugin",a=void 0,console.info("Initialize GoogleWeatherPlugin"),d=this.lime.annotations,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.resource.value.indexOf("geonames")>0&&a.resource.value.indexOf("about.rdf")<0?e.push(this.handleAnnotation(a)):e.push(void 0);return e},d.prototype.handleAnnotation=function(a){var b=this;return a.entityPromise.done(function(){var c,d;return c=a.getDescription(),c=c.replace("No description found.",""),c.length>=0?(d=b.lime.allocateWidgetSpace(b,{thumbnail:"img/weather.png",title:""+a.getLabel()+" Weather",type:"GoogleWeatherWidget",sortBy:function(){return 1e4*a.start+a.end}}),d.annotation=a,jQuery(d).bind("activate",function(){return b.showWeatherInModalWindow(a,b.getModalContainer())}),a.widgets[b.name]=d,jQuery(a).bind("becomeActive",function(){return a.widgets[b.name].setActive()}),jQuery(a).bind("becomeInactive",function(){return a.widgets[b.name].setInactive()})):void 0})},d.prototype.showWeatherInModalWindow=function(a,b){var c,d,e,f,g,h,i;return e=a.getLabel(),c=a.getLatitude(),f=a.getLongitude(),d=new google.maps.LatLng(c,f),h={zoom:11,center:d,mapTypeId:google.maps.MapTypeId.ROADMAP},g=new google.maps.Map(b[0],h),i=new google.maps.weather.WeatherLayer({temperatureUnits:google.maps.weather.TemperatureUnit.CELSIUS}),i.setMap(g)},d}(window.LimePlugin)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.Help=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)
}return c(d,b),d.prototype.init=function(){var a,b,c,d=this;return this.name="Help",a=void 0,console.info("Initialize Help"),$("div .help").click(function(){return d.lime.options.pauseOnWidgetopen&&d.lime.player.pause(),d.renderHelpInModalWindow()}),b=$("<div class='vjs-control help' title='Help' alt='Help' style='font-size: 18px;top: 2px;'>?<div></div></div>"),b.click(function(){return d.lime.options.pauseOnWidgetopen&&d.lime.player.pause(),d.renderHelpInModalWindow()}),$(this.lime.player.buttonContainer).append(b),this.options.permanentWidget?(console.info("Permanent widgets are on."),c=this.lime.allocateWidgetSpace(this,{thumbnail:"img/helpWidget.png",title:"Help",type:"HelpWidget",sortBy:function(){return 1e8}}),jQuery(c).bind("activate",function(a){var b,c,e;try{e=a.target.options.title,c=d.name,_gaq.push(["_trackEvent",c,"clicked",e])}catch(f){b=f}return d.lime.options.pauseOnWidgetopen&&d.lime.player.pause(),d.renderHelpInModalWindow()}),_.defer(function(){return c.setActive()})):void 0},d.prototype.defaults={unhidable:[],permanentWidget:!1},d.prototype.renderHelpInModalWindow=function(){var a;return a=this.getModalContainer(),a.append("<img src='img/helpMC.png'/>\n")},d}(window.LimePlugin)}.call(this),function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};window.LDPlugin=function(a){function d(){return this.recursiveFetch=c(this.recursiveFetch,this),b=d.__super__.constructor.apply(this,arguments)}return e(d,a),d.prototype.init=function(){var a,b,c,d,e,f,g,h=this;for(this.vie=this.lime.options.vie||this.options.vie,this.promises={},this.vie||(this.lime.options.local&&jQuery.noop(),this.vie=new VIE,this.vie.use(new this.vie.StanbolService({url:this.options.stanbolUrl}))),b=this.lime.player.paused(),_.defer(function(){return h.lime.player.pause(),console.info("Loading entities first... Player paused...")}),c=this.lime.annotations.length,f=this.lime.annotations,g=[],d=0,e=f.length;e>d;d++)a=f[d],a.lime=this.lime,a.vie=this.vie,g.push(this.loadAnnotation(a,function(){c--,console.info("still waiting for so many annotations...",c),0===c&&(console.info("Loading entities finished."),b||(console.info("Playing again."),h.lime.player.play())),0>c&&console.error("This should not ever happen!")}));return g},d.prototype.defaults={stanbolUrl:"http://dev.iks-project.eu/stanbolfull",followRedirects:["dbpedia:wikiPageRedirects","rdfs:seeAlso","owl:sameAs",function(a){var b;return b=VIE.Util.getPreferredLangForPreferredProperty(a,["rdfs:label","geonames:alternateName"],["en"]),b?"http://dbpedia.org/resource/"+b.replace(/\s/g,"_"):void 0}]},d.prototype.loadAnnotation=function(a,b){var c,d;return d=a.resource.value,a.isBookmark()?(a.getLabel=a.getName=function(){return a.hash.prefLabel?a.hash.prefLabel.value:void 0},b()):this.promises[d]?(a.entityPromise=this.promises[d],a.entityPromise.annotations.push(a),b(),void 0):(a.entityPromise=this.promises[d]=jQuery.Deferred(),a.entityPromise.annotations=[a],c="",d===c&&this.lime.player.pause(),this.recursiveFetch(d,this.options.followRedirects,2,function(e){var f,g,h;for(e=_(e).uniq(function(a){return a.getSubject()}),console.info("LDPlugin loaded",e),d===c&&this.lime.player.pause(),h=a.entityPromise.annotations,f=0,g=h.length;g>f;f++)a=h[f],a.entities=e||[],a._detectPropertyLanguageOnEntity=function(a,b,c){var d,e,f,g,h;for(h=this.entities,f=0,g=h.length;g>f;f++)if(d=h[f],e=VIE.Util.getPreferredLangForPreferredProperty(d,a,b),"n/a"!==e)return e;return c},a._detectProperty=function(a){var b,c,d,e,f;for(f=this.entities,d=0,e=f.length;e>d;d++){if(b=f[d],c=b.get(a))return c;this.entities[0].fromReference(b.getSubject())}},a.getLabel=a.getName=function(){return a.hash.prefLabel?a.hash.prefLabel.value:this._detectPropertyLanguageOnEntity(["rdfs:label","geonames:alternateName"],[this.lime.options.preferredLanguage,"en"],"No label found.")},a.getDescription=function(){return this._detectPropertyLanguageOnEntity(["dbpedia:abstract","rdfs:comment"],[this.lime.options.preferredLanguage,"en"],"No description found.")},a.getDepiction=function(a){var b,c,d,f,g,h,i;for(i=this.entities,g=0,h=i.length;h>g;g++)if(c=i[g],d="",b=c.get("foaf:depiction"),b&&(_.isArray(b)?(f=_.detect(b,function(b){return e=!0,(null!=a?a["with"]:void 0)&&(e=e&&-1!==b.indexOf(null!=a?a["with"]:void 0)),(null!=a?a.without:void 0)&&(e=e&&-1===b.indexOf(null!=a?a.without:void 0)),e}),f||(f=b[0])):f=b,d=c.fromReference(f)),d)return d;return null},a.getPage=function(){var a,b,c,d,e,f,g;if(b=this._detectProperty(this.entities,"foaf:homepage"),!b){for(g=this.entities,e=0,f=g.length;f>e;e++){if(a=g[e],-1!==a.getSubject().indexOf("dbpedia"))return c=VIE.Util.getPreferredLangForPreferredProperty(a,["rdfs:label"],[this.lime.options.preferredLanguage]),"http://"+this.lime.options.preferredLanguage+".wikipedia.org/wiki/"+c;if(d=a.get("foaf:homepage"))return d}return this.entities.length?this.entities[0].fromReference(a.getSubject()):this.resource.value}return b},a.getType=function(){var a,b,c,d,e,f;for(f=this.entities,d=0,e=f.length;e>d;d++)a=f[d],c=a.get("@type"),b=_.isArray(c)?c:[c];return b},a.getStarring=function(){var a,b,c,d,e,f;if(b=this._detectProperty(this.entities,"dbpedia-owl:knownFor"),!b)for(f=this.entities,d=0,e=f.length;e>d;d++)a=f[d],c=a.get("dbpedia-owl:knownFor"),b=_.isArray(c)?c:[c];return console.log("===== LDPlugin - getStarring result: ",b),b},a.getLatitude=function(){var b,c,d,e,f;if(a.hash.latitude)return console.info("annotation.hash.latitude:",a.hash,a.hash.latitude),a.hash.latitude.value;for(c=0,f=this.entities,d=0,e=f.length;e>d;d++)b=f[d],-1!==b.getSubject().indexOf("geonames")&&(c=b.attributes["<http://www.w3.org/2003/01/geo/wgs84_pos#lat>"]);return console.log("Latitude = ",c),c},a.getLongitude=function(){var b,c,d,e,f;if(a.hash.longitude)return a.hash.longitude.value;for(c=0,f=this.entities,d=0,e=f.length;e>d;d++)b=f[d],-1!==b.getSubject().indexOf("geonames")&&(c=b.attributes["<http://www.w3.org/2003/01/geo/wgs84_pos#long>"]);return console.log("Latitude = ",c),c};return a.entityPromise.resolve(a.entities),b()}))},d.prototype.recursiveFetch=function(a,b,c,d){var e,f,g,h,i,j=this;return g=[],i=0,f=function(){return asdf},e=function(b){return i--,console.error("Couldn't load entity "+a,b),i>0?void 0:d([])},h=function(e){var f,h,k,l,m,n,o,p,q,r;if(f=_.detect(e,function(b){return b.fromReference(b.getSubject())===b.fromReference(a)}),f&&g.push(f),0===c)return d(_.flatten(g));if(m=[],f)for(n=0,p=b.length;p>n;n++)h=b[n],_.isString(h)&&(k=f.get(h),(null!=k?k.isEntity:void 0)||m.push(k)),_.isFunction(h)&&m.push(h(f));if(m=_.flatten(m),m=_.uniq(m),m=_.compact(m),i=m.length){for(r=[],o=0,q=m.length;q>o;o++)l=m[o],r.push(j.recursiveFetch(l,b,c-1,function(a){return g.push(a),i--,0>=i?d(_(g).flatten()):void 0}));return r}return d(_(g).flatten())},this.vie.load({entity:a}).using("stanbol").execute().fail(e).success(h)},d}(window.LimePlugin),a=function(){function a(){}return a}()}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.LSIImagePlugin=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.init=function(){var a,b,c,d,e;for(this.name="LSIImagePlugin",a=void 0,console.info("Initialize LSIImagePlugin"),d=this.lime.annotations,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.resource.value.indexOf("geonames")<0?e.push(this.handleAnnotation(a)):e.push(void 0);return e},d.prototype.handleAnnotation=function(a){var b=this;return a.entityPromise.done(function(){var c,d;return c=a.getDescription(),c=c.replace("No description found.",""),c.length>=3?(d=b.lime.allocateWidgetSpace(b,{thumbnail:"img/pic.png",title:""+a.getLabel()+" Pics",type:"DbpediaInfoWidget",sortBy:function(){return 1e4*a.start+a.end}}),d.annotation=a,jQuery(d).bind("activate",function(){return b.getModalContainer().html(b.renderAnnotation(a))}),a.widgets[b.name]=d,jQuery(a).bind("becomeActive",function(){return a.widgets[b.name].setActive()}),jQuery(a).bind("becomeInactive",function(){return a.widgets[b.name].setInactive()})):void 0})},d.prototype.renderAnnotation=function(a){var b,c,d,e,f=this;return e="",a&&(c=_(a.entity["rdfs:label"]).detect(function(a){return a["@language"]===f.lime.options.preferredLanguage}),b=c["@value"],d='<div class="LSIImageWidget">\n <table style="margin:0 auto; width: 100%;">\n   <tr>\n     <td>\n       <b class="utility-text">'+a.getLabel()+' Pics </b>\n     </td>\n     <td>\n       <img class="utility-icon" src="img/pic.png" style="float: right; width: 25px; height: 25px; " >\n    </td>\n   </tr>\n </table>\n</div>'),d},d}(window.LimePlugin)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.LSIImagePlugin=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.init=function(){var a,b,c,d,e;for(this.name="LSIImagePlugin",a=void 0,console.info("Initialize LSIImagePlugin"),d=this.lime.annotations,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.resource.value.indexOf("geonames")<0?e.push(this.handleAnnotation(a)):e.push(void 0);return e},d.prototype.handleAnnotation=function(a){var b=this;return a.entityPromise.done(function(){var c,d;return c=a.getDescription(),c=c.replace("No description found.",""),c.length>=3?(d=b.lime.allocateWidgetSpace(b,{thumbnail:"img/pic.png",title:""+a.getLabel()+" Pics",type:"DbpediaInfoWidget",sortBy:function(){return 1e4*a.start+a.end}}),d.annotation=a,jQuery(d).bind("activate",function(){return b.showDepictionInModalWindow(a)}),a.widgets[b.name]=d,jQuery(a).bind("becomeActive",function(){return a.widgets[b.name].setActive()}),jQuery(a).bind("becomeInactive",function(){return a.widgets[b.name].setInactive()})):void 0})},d.prototype.showDepictionInModalWindow=function(a){var b;try{return b="http://new.devserver.sti2.org:8080/lsi/api/invoke?lod="+a.resource.value+"&mediaType=video&limit=9&ner=yes",$.ajax(b,{type:"GET",dataType:"xml",success:function(a,b){var c,d,e,f,g;for(console.log("success "+b),g=a.Description,f='<div id="listContainer" style="position:relative; float: left; z-index: 10; width:35%; height: 95%; background: white; box-shadow: rgba(85,85,85,0.5) 0px 0px 24px;" >\n<ul style="overflow: hidden; padding-left: 20px; padding-right: 10px;">',c=0,d=" ";9>c;)d=g[c].about,f+='<li style="float: left; list-style: none; margin: 0 15px 30px 0;">\n<a href="#" class="lsiLink">\n<img class="lsiLink" src="'+d+'" alt="description" style="width: 80px; height: 70px; border: 3px solid #777"/>\n</a>\n</li>',c++;return f+='</ul>\n</div>\n<div id="displayArea" style="position:relative; float: left; z-index: 1; width: 65%; height:95%; background: #DBDBDB; ">\n<img id="bigImage" src="'+d+'" style="display: block; min-height: 300px; max-height: 330px; max-width: 600px; margin-top: 10px; margin-left: auto; margin-right: auto; border: 5px solid white;"/>\n</div>',e=this.getModalContainer().html(f),$(".lsiLink",e).click(function(a){var b;return a.preventDefault(),b=$(a.target).attr("src"),$("#bigImage",e).attr("src",b)})},error:function(a,b){return $(modalContent).append("AJAX Error: "+b)}})}catch(c){}},d}(window.LimePlugin)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};window.MediaPlugin=function(c){function e(){return this._getStarringList=b(this._getStarringList,this),this._loadFullDbpediaEntity=b(this._loadFullDbpediaEntity,this),this.renderMedia=b(this.renderMedia,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.init=function(){var a,b,c,d,e;for(this.name="MediaPlugin",console.info("Initialize "+this.name),d=this.lime.annotations,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.resource.value.indexOf("dbpedia")>0?e.push(this.handleAnnotation(a)):e.push(void 0);return e},e.prototype.defaults={activityTypes:["<http://dbpedia.org/page/Category:Sledding>","<http://dbpedia.org/page/Category:Winter_sports>","<http://dbpedia.org/page/Category:Racing_sports>","<http://dbpedia.org/class/yago/LeisureActivities>","<http://dbpedia.org/page/Category:Leisure_activities>","<http://dbpedia.org/page/Category:Mountain_biking>","<http://dbpedia.org/page/Category:Rock_climbing>","<http://dbpedia.org/page/Category:Paragliding>","<http://dbpedia.org/page/Category:Archery>","<http://dbpedia.org/page/Category:Olympic_sports>","<http://dbpedia.org/class/yago/ActorsFromCalifornia>","<http://dbpedia.org/class/yago/WhitewaterSports>","<http://dbpedia.org/page/Category:Whitewater_sports>","<http://dbpedia.org/page/Category:Rafting>"]},e.prototype.handleAnnotation=function(a){var b=this;return a.entityPromise.done(function(){var c;return b.vie||(b.vie=a.vie,b.vie.namespaces.add({umbel:"http://umbel.org/umbel/rc/"}),b.vie.use(new b.vie.DBPediaService)),-1!==a.resource.value.indexOf("dbpedia")?(c=b.vie.entities.get(a.resource.value),b._loadFullDbpediaEntity(c,function(c){return b.processAnnotation(a,c)})):void 0})},e.prototype.processAnnotation=function(a,b){var c,d;return _.intersection(b.attributes["@type"],this.options.activityTypes).length||_.intersection(b.attributes["dcterms:subject"],this.options.activityTypes).length?(console.info("Render Media widget"),d="MediaWidget",c=this._initWidget(a,b,d,this.renderMedia,{thumbnail:"img/youtube.png",title:""+a.getLabel(),type:d,sortBy:function(){return 1e4*a.start+a.end}})):void 0},e.prototype.renderMedia=function(a,b,c){var d,e,f,g,h,i=this;return d=jQuery(c),d.css("width","600px"),d.css("height","auto"),f=(new Date).getTime(),h=[{description:"Nachtrodeln auf der ca. 6,3 km langen Rodelbahn von der Bergstation der Hochwurzen Gipfelbahn bis zur Talstation in Rohrmoos. Mit 4 sch??nen urigen H??tten - H...",duration:"95.0",locator:"https://www.youtube.com/watch?v=tzBRpNI1Mck",title:"Nachtrodeln Schladming - Rohrmoos Hochwurzen Schlittenfahren",img:"http://i.ytimg.com/vi/tzBRpNI1Mck/0.jpg",kasKeyword:{"http://dbpedia.org/resource/Sledding":"http://dbpedia.org/resource/Sledding","http://dbpedia.org/resource/Schladming":"http://dbpedia.org/resource/Schladming","http://dbpedia.org/resource/Planai":"http://dbpedia.org/resource/Planai"}},{description:"Hochwurzen 1850 m.",duration:"596.0",locator:"https://www.youtube.com/watch?v=AXgZ98Z9EFw",title:"Schladming- rodeln-Puzanje 2012.AVI",img:"http://i.ytimg.com/vi/AXgZ98Z9EFw/0.jpg",kasKeyword:{"http://dbpedia.org/resource/Sledding":"http://dbpedia.org/resource/Sledding","http://dbpedia.org/resource/Schladming":"http://dbpedia.org/resource/Schladming","http://dbpedia.org/resource/Hochwurzen":"http://dbpedia.org/resource/Hochwurzen"}},{description:"Rodeln vom Feinsten auf der Hochwurzen ( Planai / Schladming). Musste Video leider auf 10min k??rzen. Fahrt dauerte 12min!",duration:"600.0",locator:"https://www.youtube.com/watch?v=zOzeGapneoY",title:"Rodeln Hochwurzen",img:"http://i.ytimg.com/vi/zOzeGapneoY/0.jpg",kasKeyword:{"http://dbpedia.org/resource/Sledding":"http://dbpedia.org/resource/Sledding","http://dbpedia.org/resource/Hochwurzen":"http://dbpedia.org/resource/Hochwurzen"}},{description:"Ein Ausschnitt aus der Helmkamera vom Rodeln im J??nner 2013. Kamerafahrt wurde nicht von mir gemacht...Ich bin der gefilmte =) Musik: Ski or die - Snowboard ...",duration:"55.0",locator:"https://www.youtube.com/watch?v=AWK9lkChVpA",title:"Rodelbahn Hochwurzen, Sturz (Helmkamera)",img:"http://i.ytimg.com/vi/AWK9lkChVpA/0.jpg",kasKeyword:{"http://dbpedia.org/resource/Sledding":"http://dbpedia.org/resource/Sledding"}}],h=a.getLsiVideoResources(),g=h[0].locator,g=g.split("=")[1],e='<div id="videoWidgetExpanded" style="border-top: 1px dotted lightgray; position: relative; width: 600px; height: auto;">\n<div id="videoArea" style="left: 0px; top: 0px; width: 600px; position: relative; height: 450px; background-color: #f16f6f; float: left;">\n<iframe id="embededVideo" width="600" height="450" style="margin: 0 auto; display: block;" src="http://www.youtube.com/embed/'+g+'?autoplay=1" frameborder="0" allowfullscreen>\n<p>Your browser does not support iframes.</p>\n</iframe>\n</div>',2===h.length&&(e+='<div id="videoList" style="background-color: #0a0a0a; position: relative; float: left; width: 600px; height: 150px;">\n<div id="video1" class="videotab" style="border: 1px solid black; position: relative; float: right; width: 298px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+h[0].img+'\');">\n<div id="expandedwidget-videoicon1" style="position: absolute; z-index: 900; width: 50px; height: 50px; bottom: 0px; left: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover;" class="expandedwidget-videoicon"></div>\n</div>\n<div id="video2" class="videotab" style="border: 1px solid black; position: relative; float: right; width: 298px; height: 148px; background-color: #9b9393; background-image: url(\''+h[1].img+'\'); background-repeat: no-repeat; background-position: center center; background-size: cover;">\n<div id="expandedwidget-videoicon2" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n</div>\n<div id="video3" class="videotab disabled" style="display:none; border: 1px solid black; position: relative; float: right; width: 198px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+h[2].img+'\');">\n<div id="expandedwidget-videoicon3" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n</div>\n<div id="video4" class="videotab disabled" style="display: none; border: 1px solid black; position: relative; float: right; width: 148px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+h[3].img+'\');">\n<div id="expandedwidget-videoicon4" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n</div>\n</div>'),3===h.length&&(e+='<div id="videoList" style="background-color: #0a0a0a; position: relative; float: left; width: 600px; height: 150px;">\n<div id="video1" class="videotab" style="border: 1px solid black; position: relative; float: right; width: 198px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+h[0].img+'\');">\n<div id="expandedwidget-videoicon1" style="position: absolute; z-index: 900; width: 50px; height: 50px; bottom: 0px; left: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover;" class="expandedwidget-videoicon"></div>\n</div>\n<div id="video2" class="videotab" style="border: 1px solid black; position: relative; float: right; width: 198px; height: 148px; background-color: #9b9393; background-image: url(\''+h[1].img+'\'); background-repeat: no-repeat; background-position: center center; background-size: cover;">\n<div id="expandedwidget-videoicon2" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n</div>\n<div id="video3" class="videotab" style="border: 1px solid black; position: relative; float: right; width: 198px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+h[2].img+'\');">\n<div id="expandedwidget-videoicon3" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n</div>\n<div id="video4" class="videotab disabled" style="display: none; border: 1px solid black; position: relative; float: right; width: 148px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+h[3].img+'\');">\n<div id="expandedwidget-videoicon4" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n</div>\n</div>'),h.length>=4&&(e+='<div id="videoList" style="background-color: #0a0a0a; position: relative; float: left; width: 600px; height: 150px; ">\n<div id="video1" class="videotab" style="border: 1px solid black; position: relative; float: right; width: 147px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+h[0].img+'\');">\n<div id="expandedwidget-videoicon1" style="position: absolute; z-index: 900; width: 50px; height: 50px; bottom: 0px; left: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover;" class="expandedwidget-videoicon"></div>\n</div>\n<div id="video2" class="videotab" style="border: 1px solid black; position: relative; float: right; width: 147px; height: 148px; background-color: #9b9393; background-image: url(\''+h[1].img+'\'); background-repeat: no-repeat; background-position: center center; background-size: cover;">\n<div id="expandedwidget-videoicon2" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n</div>\n<div id="video3" class="videotab" style="border: 1px solid black; position: relative; float: right; width: 147px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+h[2].img+'\');">\n<div id="expandedwidget-videoicon3" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n</div>\n<div id="video4" class="videotab" style=" border: 1px solid black; position: relative; float: right; width: 147px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+h[3].img+'\');">\n<div id="expandedwidget-videoicon4" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n</div>\n</div>'),e+=" </div>",d.append(e),$(".close").click(function(){var b,c,d,e;b=(new Date).getTime(),e=b-f,d=a.widgets[i.name].options.title;try{return _gaq.push(["_trackEvent",i.name,"viewed",d,e]),_gaq.push(["_trackTiming",i.name,d,e,"viewed"])}catch(g){c=g}}),$("#mask").click(function(){var b,c,d,e;b=(new Date).getTime(),e=b-f,d=a.widgets[i.name].options.title;try{return _gaq.push(["_trackEvent",i.name,"viewed",d,e]),_gaq.push(["_trackTiming",i.name,d,e,"viewed"])}catch(g){c=g}}),this.videotabs=$(".videotab:not(.disabled)"),this.videotabsiterator=0,jQuery("#video1").click(function(){return jQuery(".videotab.selected").removeClass("selected"),g=h[0].locator,g=g.split("=")[1],jQuery("#embededVideo").empty(),jQuery("#embededVideo").attr("src","http://www.youtube.com/embed/"+g+"?autoplay=1"),jQuery(".expandedwidget-videoicon").css("background-image","url('img/youtube.png')"),jQuery("#expandedwidget-videoicon1").css("background-image","url('img/youtube_gr.png')"),jQuery("#video1").addClass("selected")}),jQuery("#video2").click(function(){return jQuery(".videotab.selected").removeClass("selected"),g=h[1].locator,g=g.split("=")[1],jQuery("#embededVideo").empty(),jQuery("#embededVideo").attr("src","http://www.youtube.com/embed/"+g+"?autoplay=1"),jQuery(".expandedwidget-videoicon").css("background-image","url('img/youtube.png')"),jQuery("#expandedwidget-videoicon2").css("background-image","url('img/youtube_gr.png')"),jQuery("#video2").addClass("selected")}),jQuery("#video3").click(function(){return jQuery(".videotab.selected").removeClass("selected"),g=h[2].locator,g=g.split("=")[1],jQuery("#embededVideo").empty(),jQuery("#embededVideo").attr("src","http://www.youtube.com/embed/"+g+"?autoplay=1"),jQuery(".expandedwidget-videoicon").css("background-image","url('img/youtube.png')"),jQuery("#expandedwidget-videoicon3").css("background-image","url('img/youtube_gr.png')"),jQuery("#video3").addClass("selected")}),jQuery("#video4").click(function(){return jQuery(".videotab.selected").removeClass("selected"),g=h[3].locator,g=g.split("=")[1],jQuery("#embededVideo").empty(),jQuery("#embededVideo").attr("src","http://www.youtube.com/embed/"+g+"?autoplay=1"),jQuery(".expandedwidget-videoicon").css("background-image","url('img/youtube.png')"),jQuery("#expandedwidget-videoicon4").css("background-image","url('img/youtube_gr.png')"),jQuery("#video4").addClass("selected")}),jQuery("#video1").trigger("click")},e.prototype.getLSIVideos=function(a){return this.lime.cmf.getLSIVideosForTerm(a.resource.value,function(b,c){return b?console.warn("Error getting LSI Video resources",b):(a.lsiVideoResources=_(c).map(function(a){var b;return b={title:a.title.value,description:a.description.value,duration:Number(a.duration.value),locator:a.locator.value,img:a.img.value,video:a.video.value}}),a.getLsiVideoResources=function(){return this.lsiVideoResources})})},e.prototype._loadFullDbpediaEntity=function(a,b){return this.vie.load({entity:a.getSubject()}).using("dbpedia").execute().success(function(c){return a.set(c),b(c)})},e.prototype._getStarringList=function(a,b){var c,d,e;return d=[],c="PREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX dbpedia-owl: <http://dbpedia.org/ontology/>\nPREFIX dbprop: <http://dbpedia.org/property/>\nPREFIX dbcat: <http://dbpedia.org/resource/Category:>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nSELECT DISTINCT ?show ?date WHERE {\n?show dbprop:starring <"+a+"> .\n?show <http://dbpedia.org/ontology/releaseDate> ?date .\n} ORDER BY DESC(?date)\nLIMIT 5",e="http://dbpedia.org/sparql?query="+escape(c)+"&format=json",$.getJSON(e,b),d},e.prototype._initWidget=function(a,b,c,d,e){var f,g=this;return f=this.lime.allocateWidgetSpace(this,e),this.getLSIVideos(a),f.annotation=a,jQuery(f).bind("activate",function(c){var e,f,h;try{h=c.target.options.title,f=g.name,_gaq.push(["_trackEvent",f,"clicked",h])}catch(i){e=i}return d(a,b,g.getModalContainer())}),a.widgets[c]=f,jQuery(a).bind("becomeActive",function(b){var d,e,f;if(a.lsiVideoResources&&a.lsiVideoResources.length>0){try{e=b.target.widgets[g.name].options.title,f=g.name,_gaq.push(["_trackEvent",f,"becameActive",e])}catch(h){d=h}return a.widgets[c].setActive()}}),jQuery(a).bind("becomeInactive",function(b){var d,e,f;try{e=b.target.widgets[g.name].options.title,f=g.name,_gaq.push(["_trackEvent",f,"becomeInactive",e])}catch(h){d=h}return a.widgets[c].setInactive()}),jQuery(f).bind("leftarrow",function(){return g.videotabsiterator=g.videotabs.length===g.videotabsiterator+1?0:g.videotabsiterator+1,0===g.videotabsiterator&&jQuery("#video1").trigger("click"),1===g.videotabsiterator&&jQuery("#video2").trigger("click"),2===g.videotabsiterator&&jQuery("#video3").trigger("click"),3===g.videotabsiterator?jQuery("#video4").trigger("click"):void 0}),jQuery(f).bind("rightarrow",function(){return g.videotabsiterator=0===g.videotabsiterator?g.videotabs.length-1:g.videotabsiterator-1,jQuery(".videotab.selected").removeClass("selected"),0===g.videotabsiterator&&jQuery("#video1").trigger("click"),1===g.videotabsiterator&&jQuery("#video2").trigger("click"),2===g.videotabsiterator&&jQuery("#video3").trigger("click"),3===g.videotabsiterator?jQuery("#video4").trigger("click"):void 0})},e}(window.LimePlugin)}.call(this),function(){}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};window.TVPlugin=function(c){function e(){return this._getStarringList=b(this._getStarringList,this),this._loadFullDbpediaEntity=b(this._loadFullDbpediaEntity,this),this.renderActor=b(this.renderActor,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.init=function(){var a,b,c,d,e,f;for(this.name="TVPlugin",console.info("Initialize "+this.name),d=this.lime.annotations,f=[],b=0,c=d.length;c>b;b++)a=d[b],a.resource.value.indexOf("dbpedia")>0&&("http://connectme.at/ontology#explicitlyShows"===(e=a.relation.value)||"http://connectme.at/ontology#explicitlyMentions"===e||"http://connectme.at/ontology#implicitlyShows"===e||"http://connectme.at/ontology#implicitlyMentions"===e)?f.push(this.handleAnnotation(a)):f.push(void 0);return f},e.prototype.defaults={actorTypes:["<http://dbpedia.org/class/yago/Actor109765278>","<http://dbpedia.org/class/yago/AustrianFilmActors>","<http://dbpedia.org/class/yago/FilmActors>","<http://dbpedia.org/class/yago/AmericanTelevisionActors>","<http://dbpedia.org/class/yago/AmericanVoiceActors>","<http://dbpedia.org/class/yago/AmericanActorsOfEnglishDescent>","<http://dbpedia.org/class/yago/AmericanSoapOperaActors>","<http://dbpedia.org/class/yago/AmericanFilmActors>","<http://dbpedia.org/class/yago/Actress109767700>","<http://dbpedia.org/class/yago/AmericanChildActors>","<http://dbpedia.org/class/yago/ActorsFromCalifornia>"],characterTypes:["<http://dbpedia.org/ontology/FictionalCharacter>","<http://dbpedia.org/class/yago/FictionalCharactersFromCalifornia>","<http://dbpedia.org/class/yago/FictionalCharacter109587565>"],directorTypes:["<http://dbpedia.org/class/yago/Director110014939>","<http://dbpedia.org/class/yago/EnglishFilmDirectors>","<http://dbpedia.org/class/yago/DanishFilmDirectors>","<http://dbpedia.org/class/yago/SilentFilmDirectors>","<http://dbpedia.org/class/yago/ItalianFilmDirectors>","<http://dbpedia.org/class/yago/ScottishFilmDirectors>","<http://dbpedia.org/class/yago/EnglishTheatreDirectors>","<http://dbpedia.org/class/yago/DutchFilmDirectors>","<http://dbpedia.org/class/yago/ArtisticDirectors>","<http://dbpedia.org/class/yago/IndianFilmDirectors>","<http://dbpedia.org/class/yago/TurkishFilmDirectors>","<http://dbpedia.org/class/yago/HindiFilmDirectors>","<http://dbpedia.org/class/yago/PolishFilmDirectors>","<http://dbpedia.org/class/yago/RomanianFilmDirectors>","<http://dbpedia.org/class/yago/MuslimAmericanFilmDirectors>","<http://dbpedia.org/class/yago/SpanishFilmDirectors>","<http://dbpedia.org/class/yago/BelgianFilmDirectors>","<http://dbpedia.org/class/yago/EgyptianFilmDirectors>","<http://dbpedia.org/class/yago/PakistaniFilmDirectors>","<http://dbpedia.org/class/yago/IranianFilmDirectors>","<http://dbpedia.org/class/yago/ItalianBritishFilmDirectors>","<http://dbpedia.org/class/yago/BrazilianFilmDirectors>","<http://dbpedia.org/class/yago/IcelandicFilmDirectors>","<http://dbpedia.org/class/yago/AustralianTelevisionDirectors>","<http://dbpedia.org/class/yago/M%C3%A9tisFilmDirectors>","<http://dbpedia.org/class/yago/BengaliFilmDirectors>","<http://dbpedia.org/class/yago/ColombianFilmDirectors>","<http://dbpedia.org/class/yago/KannadaFilmDirectors>","<http://dbpedia.org/class/yago/AmericanFilmDirectorsOfArmenianDescent>","<http://dbpedia.org/class/yago/BangladeshiFilmDirectors>","<http://dbpedia.org/class/yago/KurdishFilmDirectors>","<http://dbpedia.org/class/yago/NativeAmericanFilmDirectors>","<http://dbpedia.org/class/yago/PortuguEseFilmDirectors>","<http://dbpedia.org/class/yago/AmericanFilmDirectors>","<http://dbpedia.org/class/yago/English-languAgeFilmDirectors>","<http://dbpedia.org/class/yago/AmericanTelevisionDirectors>"]},e.prototype.handleAnnotation=function(a){var b=this;
return a.entityPromise.done(function(){var c;return b.vie||(b.vie=a.vie,b.vie.namespaces.add({umbel:"http://umbel.org/umbel/rc/"}),b.vie.use(new b.vie.DBPediaService)),-1!==a.resource.value.indexOf("dbpedia")&&(c=b.vie.entities.get(a.resource.value),c&&c.isof("dbpedia:Person"))?b.processAnnotation(a):void 0})},e.prototype.processAnnotation=function(a){var b,c;return _.intersection(a.entities[0].attributes["@type"],this.options.actorTypes).length&&(console.info("Render Actor widget"),c="ActorWidget",b=this._initWidget(a,c,this.renderActor,{thumbnail:"img/starIcon.png",title:""+a.getLabel()+" (Actor)",type:c,sortBy:function(){return 1e4*a.start+a.end}})),_.intersection(a.entities[0].attributes["@type"],this.options.characterTypes).length&&(console.info("Render Character widget"),c="CharacterWidget",b=this._initWidget(a,c,this.renderCharacter,{thumbnail:"img/characterIcon.png",title:""+a.getLabel()+" (Character)",type:c,sortBy:function(){return 1e4*a.start+a.end}})),_.intersection(a.entities[0].attributes["@type"],this.options.directorTypes).length?(console.info("Render Director widget"),c="DirectorWidget",b=this._initWidget(a,c,this.renderDirector,{thumbnail:"img/directorIcon.png",title:""+a.getLabel()+" (Director)",type:c,sortBy:function(){return 1e4*a.start+a.end}})):void 0},e.prototype.renderActor=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this;if(n=jQuery(b),n.css("width","450px"),n.css("height","auto"),s=(new Date).getTime(),l=a.getLabel(),o=a.getPage(),r=[],q="",this._getStarringList(a.resource.value,function(a,b){var c,d,e,f,g,h,i;for(b=[],i=a.results.bindings,e=0,g=i.length;g>e;e++)c=i[e],b.push("<"+c.date.value+"> - <"+c.show.value+">");if(r=b){for(f=0,h=r.length;h>f;f++)d=r[f],d=v._cleanupLabel(d)+"</br>",q+=d;jQuery("#infoText").append('<div id="infoTextCareerTitle" style="font: Helvetica; position: relative; float: left; width: 100%; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: orange;">\n                      Movies and TV Series</div>\n                      <div id="infoTextCareer" style="font: Helvetica; width: 100%; position: relative; float: left; height: auto; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: #f1f1f1; line-height: normal;">\n'+q+"</div>")}return console.log("1) starringListArray = ",r),b}),console.log("2) starringListArray = ",r),e=[],e=a._detectProperty("dcterms:subject"),d="",e)for(t=0,u=e.length;u>t;t++)c=e[t],c=this._cleanupLabel(c)+"</br>",(c.indexOf("winners")>0||c.indexOf("award")>0||c.indexOf("awards")>0)&&(c.indexOf("winners")>0&&(c=c.replace(/winners/,"")),d+=c);console.log("awardsListArray = ",d," from this list: ",e),m=this.lime,j=a.getDescription(),j=j.split(". ")[0]+". ",f="";try{g=a._detectProperty("dbprop:birthDate"),void 0!==g&&(g=g.split("T")[0],f+="Birth date: "+g+"<br>")}catch(w){k=w;try{g=a._detectProperty("dbprop:dateOfBirth"),g=g.split("T")[0],void 0!==g&&(f+="Birth date: "+g+"<br>")}catch(w){k=w}}h="";try{i=a._detectProperty("dbprop:birthPlace")["@value"],void 0!==i&&(h+="Birth place: "+i+"<br>")}catch(w){k=w;try{i=a._detectProperty("dbprop:placeOfBirth")["@value"],void 0!==i&&(h+="Birth place: "+i+"<br>")}catch(w){k=w}}return p='         <div id="ifoWidgetExpanded" style="border: 1px dotted lightgray; position: relative;height: auto; width: 100%;">\n         <div id="infoWidget" style="background-color: rgba(37, 37, 37, 0.7); height: 40px; left: 0px; width: 100%; position: relative; float: left;">\n         <div class="infoWidgeticon" style="border-right: 1px dotted lightgray; position: relative; height: 100%; float: left; background-color: #3f3e3e; width: 8%;">\n         <span data-dojo-type="shapes.Text" id="iconLabel" style="font: Times; position: relative; font-weight: bold; font-size: 23px; top: 21%; left: 45%; color: #f38f0b; font-family: \'Times New Roman\',Times,serif; font-style: italic;">i</span>\n         </div>\n         <div class="infoWidgetTitle" style="font: Arial; position: relative; float: left; height: 100%; width: 86%; font-family: Arial,Helvetica,sans-serif; font-size: 26px; color: white; font-weight: normal; text-align: left; vertical-align: middle; text-indent: 1em; line-height: 140%;">\n'+l+'</div>\n         </div>\n         <div id="infoText" style="padding: 10px; position: relative; float: left; background-color: rgba(68, 68, 68, 0.7); height: auto; font-style: normal; width: 96%;">\n         <div id="infoTextBioTitle" style="font: Helvetica; position: relative; float: left; width: 100%; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: orange; height: auto;">\n         Bio</div>\n         <div id="infoTextBio" style="font: Helvetica; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: #f1f1f1; float: left; line-height: normal; position: relative; height: auto; width: 100%;">\n'+j+" <br>\n"+f+"\n"+h+"\n\n         </div>",d.length>0&&(p+=' <div id="infoTextAwardsTitle" style="font: Helvetica; position: relative; float: left; width: 100%; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: orange;">\n Awards</div>\n <div id="infoTextAwards" style="font: Helvetica; width: 100%; position: relative; float: left; height: auto; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: #f1f1f1; line-height: normal;">\n'+d+"</div>"),p+="</div>\n</div>",b.append(p)},e.prototype.renderCharacter=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;g=jQuery(b),g.css("width","450px"),g.css("height","auto"),p=(new Date).getTime(),f=a.getLabel(),m=a.getPage(),c=a.getDescription(),l="";try{l=a._detectProperty("dbprop:occupation"),l=this._cleanupLabel(l),l="<b>Occupation:</b> "+l+"<br>"}catch(s){d=s}h="";try{h=a._detectProperty("dbprop:nationality"),h=this._cleanupLabel(h),h="<b>Nationality:</b> "+h+"<br>"}catch(s){d=s}e="";try{e=a._detectProperty("dbprop:firstAppearance"),e=this._cleanupLabel(e),e="<b>First Appearance:</b> "+e+"<br>"}catch(s){d=s}j="";try{for(j="<b>Nick name:</b> ",k=a._detectProperty("foaf:nick"),q=0,r=k.length;r>q;q++)i=k[q],j+=i["@value"]+"<br>"}catch(s){d=s}n="";try{n=a._detectProperty("dbprop:portrayer"),n=this._cleanupLabel(n),n="<b>Played by:</b> "+n+"<br>"}catch(s){d=s}return o='         <div id="ifoWidgetExpanded" style="border: 1px dotted lightgray; position: relative;height: auto; width: 100%;">\n         <div id="infoWidget" style="background-color: rgba(37, 37, 37, 0.7); height: 40px; left: 0px; width: 100%; position: relative; float: left;">\n         <div class="infoWidgeticon" style="border-right: 1px dotted lightgray; position: relative; height: 100%; float: left; background-color: #3f3e3e; width: 8%;">\n         <span data-dojo-type="shapes.Text" id="iconLabel" style="font: Times; position: relative; font-weight: bold; font-size: 23px; top: 21%; left: 45%; color: #f38f0b; font-family: \'Times New Roman\',Times,serif; font-style: italic;">i</span>\n         </div>\n         <div class="infoWidgetTitle" style="font: Arial; position: relative; float: left; height: 100%; width: 86%; font-family: Arial,Helvetica,sans-serif; font-size: 26px; color: white; font-weight: normal; text-align: left; vertical-align: middle; text-indent: 1em; line-height: 140%;">\n'+f+'</div>\n         </div>\n         <div id="infoText" style="padding: 10px; position: relative; float: left; background-color: rgba(68, 68, 68, 0.7); height: auto; font-style: normal; width: 96%;">\n         <div id="infoTextBioTitle" style="font: Helvetica; position: relative; float: left; width: 100%; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: orange; height: auto;">\n         Bio</div>\n         <div id="infoTextBio" style="font: Helvetica; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: #f1f1f1; float: left; line-height: normal; position: relative; height: auto; width: 100%;">\n'+n+"\n"+e+"\n"+h+"\n"+l+"\n"+j+"\n          <br>\n\n         </div>\n         </div>\n         </div>",b.append(o)},e.prototype.renderDirector=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;if(n=jQuery(b),n.css("width","450px"),n.css("height","auto"),t=(new Date).getTime(),l=a.getLabel(),o=a.getPage(),console.log(o),s=[],s=a._detectProperty("dbprop:knownFor"),r="",s)for(u=0,w=s.length;w>u;u++)q=s[u],r+=this._cleanupLabel(q);if(e=[],e=a._detectProperty("dcterms:subject"),d="",e)for(v=0,x=e.length;x>v;v++)c=e[v],c=this._cleanupLabel(c)+"</br>",(c.indexOf("winners")>0||c.indexOf("award")>0||c.indexOf("awards")>0)&&(d+=c);console.log("awardsListArray = ",d," from this list: ",e),m=this.lime,j=a.getDescription(),f="";try{g=a._detectProperty("dbprop:birthDate"),void 0!==g&&(g=g.split("T")[0],f+="Birth date: "+g+"<br>")}catch(y){k=y;try{g=a._detectProperty("dbprop:dateOfBirth"),void 0!==g&&(g=g.split("T")[0],f+="Birth date: "+g+"<br>")}catch(y){k=y}}h="";try{i=a._detectProperty("dbprop:birthPlace")["@value"],void 0!==i&&(h+="Birth place: "+i+"<br>")}catch(y){k=y;try{i=a._detectProperty("dbprop:placeOfBirth")["@value"],void 0!==i&&(h+="Birth place: "+i+"<br>")}catch(y){k=y}}return p='         <div id="ifoWidgetExpanded" style="border: 1px dotted lightgray; position: relative;height: auto; width: 100%;">\n         <div id="infoWidget" style="background-color: rgba(37, 37, 37, 0.7); height: 40px; left: 0px; width: 100%; position: relative; float: left;">\n         <div class="infoWidgeticon" style="border-right: 1px dotted lightgray; position: relative; height: 100%; float: left; background-color: #3f3e3e; width: 8%;">\n         <span data-dojo-type="shapes.Text" id="iconLabel" style="font: Times; position: relative; font-weight: bold; font-size: 23px; top: 21%; left: 45%; color: #f38f0b; font-family: \'Times New Roman\',Times,serif; font-style: italic;">i</span>\n         </div>\n         <div class="infoWidgetTitle" style="font: Arial; position: relative; float: left; height: 100%; width: 86%; font-family: Arial,Helvetica,sans-serif; font-size: 26px; color: white; font-weight: normal; text-align: left; vertical-align: middle; text-indent: 1em; line-height: 140%;">\n'+l+'</div>\n         </div>\n         <div id="infoText" style="padding: 10px; position: relative; float: left; background-color: rgba(68, 68, 68, 0.7); height: auto; font-style: normal; width: 96%;">\n         <div id="infoTextBioTitle" style="font: Helvetica; position: relative; float: left; width: 100%; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: orange; height: auto;">\n         Bio</div>\n         <div id="infoTextBio" style="font: Helvetica; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: #f1f1f1; float: left; line-height: normal; position: relative; height: auto; width: 100%;">\n'+f+"\n"+h+"  <br>\n"+j+"\n\n         </div>",r.length>3&&(p+='          <div id="infoTextCareerTitle" style="font: Helvetica; position: relative; float: left; width: 100%; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: orange;">\n          Movies and TV Series</div>\n               <div id="infoTextCareer" style="font: Helvetica; width: 100%; position: relative; float: left; height: auto; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: #f1f1f1; line-height: normal;">\n'+r+"</div>"),d.length>3&&(p+=' <div id="infoTextAwardsTitle" style="font: Helvetica; position: relative; float: left; width: 100%; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: orange;">\n          Awards</div>\n             <div id="infoTextAwards" style="font: Helvetica; width: 100%; position: relative; float: left; height: auto; font-family: Arial,Helvetica,sans-serif; font-size: 18px; color: #f1f1f1; line-height: normal;">\n'+d+"</div>"),p+="</div>\n</div>",b.append(p)},e.prototype._cleanupLabel=function(a){return a=a.replace(/<http:\/\/dbpedia.org\/resource\/(Category:)?/,""),a=a.replace(/_/g," "),a=a.replace(/[<>]/g,""),a=decodeURIComponent(a)},e.prototype._loadFullDbpediaEntity=function(a,b){return this.vie.load({entity:a}).using("dbpedia").execute().success(function(c){return a.set(c),b(c)})},e.prototype._getStarringList=function(a,b){var c,d,e;return d=[],c="PREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX dbpedia-owl: <http://dbpedia.org/ontology/>\nPREFIX dbprop: <http://dbpedia.org/property/>\nPREFIX dbcat: <http://dbpedia.org/resource/Category:>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nSELECT DISTINCT ?show ?date WHERE {\n     ?show dbprop:starring <"+a+"> .\n     ?show <http://dbpedia.org/ontology/releaseDate> ?date .\n    } ORDER BY DESC(?date)\n    LIMIT 5",e="http://dbpedia.org/sparql?query="+escape(c)+"&format=json",jQuery.getJSON(e,b),d},e.prototype._initWidget=function(a,b,c,d){var e,f=this;return e=this.lime.allocateWidgetSpace(this,d),e.annotation=a,jQuery(e).bind("activate",function(b){var d,e,g;try{g=b.target.options.title,e=f.name,_gaq.push(["_trackEvent",e,"clicked",g])}catch(h){d=h}return c.apply(f,[a,f.getModalContainer()])}),a.widgets[b]=e,jQuery(a).bind("becomeActive",function(c){var d,e,g;try{e=c.target.widgets[f.name].options.title,g=f.name,_gaq.push(["_trackEvent",g,"becameActive",e])}catch(h){d=h}return a.widgets[b].setActive()}),jQuery(a).bind("becomeInactive",function(c){var d,e,g;try{e=c.target.widgets[f.name].options.title,g=f.name,_gaq.push(["_trackEvent",g,"becomeInactive",e])}catch(h){d=h}return a.widgets[b].setInactive()})},e}(window.LimePlugin)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.VideoPlugin=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.init=function(){var a,b,c,d,e,f;for(this.name="VideoPlugin",console.info("Initialize "+this.name),d=this.lime.annotations,f=[],b=0,c=d.length;c>b;b++)a=d[b],a.resource.value.indexOf("dbpedia.org")>0&&("http://connectme.at/ontology#explicitlyShows"===(e=a.relation.value)||"http://connectme.at/ontology#explicitlyMentions"===e||"http://connectme.at/ontology#implicitlyShows"===e||"http://connectme.at/ontology#implicitlyMentions"===e)?f.push(this.handleAnnotation(a)):f.push(void 0);return f},d.prototype.handleAnnotation=function(a){var b=this;return a.entityPromise.done(function(){var c,d;return c=a.getDescription(),c=c.replace("No description found.",""),c.length>=3?(console.log("++++++ I should render a LSI video widget"),d=b.lime.allocateWidgetSpace(b,{thumbnail:"img/youtube.png",title:""+a.getLabel()+" Videos",type:"VideoWidget",sortBy:function(){return 1e4*a.start+a.end}}),b.getLSIVideos(a),d.annotation=a,jQuery(d).bind("activate",function(c){var d,e,f;try{f=c.target.options.title,e=b.name,_gaq.push(["_trackEvent",e,"clicked",f])}catch(g){d=g}return b.showAbstractInModalWindow(a,b.getModalContainer())}),a.widgets[b.name]=d,jQuery(a).bind("becomeActive",function(c){var d,e,f;if(a.lsiVideoResources&&a.lsiVideoResources.length>0){try{e=c.target.widgets[b.name].options.title,f=b.name,_gaq.push(["_trackEvent",f,"becameActive",e])}catch(g){d=g}return a.widgets[b.name].setActive()}}),jQuery(a).bind("becomeInactive",function(c){var d,e,f;try{e=c.target.widgets[b.name].options.title,f=b.name,_gaq.push(["_trackEvent",f,"becomeInactive",e])}catch(g){d=g}return a.widgets[b.name].setInactive()}),jQuery(d).bind("leftarrow",function(){return b.videotabsiterator=b.videotabs.length===b.videotabsiterator+1?0:b.videotabsiterator+1,0===b.videotabsiterator&&$("#video1").trigger("click"),1===b.videotabsiterator&&$("#video2").trigger("click"),2===b.videotabsiterator&&$("#video3").trigger("click"),3===b.videotabsiterator?$("#video4").trigger("click"):void 0}),jQuery(d).bind("rightarrow",function(){return b.videotabsiterator=0===b.videotabsiterator?b.videotabs.length-1:b.videotabsiterator-1,$(".videotab.selected").removeClass("selected"),0===b.videotabsiterator&&$("#video1").trigger("click"),1===b.videotabsiterator&&$("#video2").trigger("click"),2===b.videotabsiterator&&$("#video3").trigger("click"),3===b.videotabsiterator?$("#video4").trigger("click"):void 0})):void 0})},d.prototype.getLSIVideos=function(a){return this.lime.cmf.getLSIVideosForTerm(a.resource.value,function(b,c){return b?console.warn("Error getting LSI Video resources",b):(console.info("LSI resources for",a,c),a.lsiVideoResources=_(c).map(function(a){var b;return b={title:a.title.value,locator:a.locator.value,img:a.img.value,video:a.video.value}}),a.getLsiVideoResources=function(){return this.lsiVideoResources})})},d.prototype.showAbstractInModalWindow=function(a,b){var c,d,e,f,g,h=this;return c=$(b),c.css("width","600px"),c.css("height","auto"),e=(new Date).getTime(),g=[{description:"Nachtrodeln auf der ca. 6,3 km langen Rodelbahn von der Bergstation der Hochwurzen Gipfelbahn bis zur Talstation in Rohrmoos. Mit 4 sch??nen urigen H??tten - H...",duration:"95.0",locator:"https://www.youtube.com/watch?v=tzBRpNI1Mck",title:"Nachtrodeln Schladming - Rohrmoos Hochwurzen Schlittenfahren",img:"http://i.ytimg.com/vi/tzBRpNI1Mck/0.jpg",kasKeyword:{"http://dbpedia.org/resource/Sledding":"http://dbpedia.org/resource/Sledding","http://dbpedia.org/resource/Schladming":"http://dbpedia.org/resource/Schladming","http://dbpedia.org/resource/Planai":"http://dbpedia.org/resource/Planai"}},{description:"Hochwurzen 1850 m.",duration:"596.0",locator:"https://www.youtube.com/watch?v=AXgZ98Z9EFw",title:"Schladming- rodeln-Puzanje 2012.AVI",img:"http://i.ytimg.com/vi/AXgZ98Z9EFw/0.jpg",kasKeyword:{"http://dbpedia.org/resource/Sledding":"http://dbpedia.org/resource/Sledding","http://dbpedia.org/resource/Schladming":"http://dbpedia.org/resource/Schladming","http://dbpedia.org/resource/Hochwurzen":"http://dbpedia.org/resource/Hochwurzen"}},{description:"Rodeln vom Feinsten auf der Hochwurzen ( Planai / Schladming). Musste Video leider auf 10min k??rzen. Fahrt dauerte 12min!",duration:"600.0",locator:"https://www.youtube.com/watch?v=zOzeGapneoY",title:"Rodeln Hochwurzen",img:"http://i.ytimg.com/vi/zOzeGapneoY/0.jpg",kasKeyword:{"http://dbpedia.org/resource/Sledding":"http://dbpedia.org/resource/Sledding","http://dbpedia.org/resource/Hochwurzen":"http://dbpedia.org/resource/Hochwurzen"}},{description:"Ein Ausschnitt aus der Helmkamera vom Rodeln im J??nner 2013. Kamerafahrt wurde nicht von mir gemacht...Ich bin der gefilmte =) Musik: Ski or die - Snowboard ...",duration:"55.0",locator:"https://www.youtube.com/watch?v=AWK9lkChVpA",title:"Rodelbahn Hochwurzen, Sturz (Helmkamera)",img:"http://i.ytimg.com/vi/AWK9lkChVpA/0.jpg",kasKeyword:{"http://dbpedia.org/resource/Sledding":"http://dbpedia.org/resource/Sledding"}}],g=a.getLsiVideoResources(),f=g[0].locator,f=f.split("v=")[1],f=f.split("&")[0],d='<div id="videoWidgetExpanded" style="border-top: 1px dotted lightgray; position: relative; width: 600px; height: auto;">\n   <div id="videoArea" style="left: 0px; top: 0px; width: 600px; position: relative; height: 450px; background-color: #f16f6f; float: left;">\n   <iframe id="embededVideo" width="600" height="450" style="margin: 0 auto; display: block;" src="http://www.youtube.com/embed/'+f+'?autoplay=1" frameborder="0" allowfullscreen>\n   <p>Your browser does not support iframes.</p>\n   </iframe>\n   </div>',2===g.length&&(d+='<div id="videoList" style="background-color: #0a0a0a; position: relative; float: left; width: 600px; height: 150px;">\n<div id="video1" class="videotab" style="border: 1px solid black; position: relative; float: right; width: 298px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+g[0].img+'\');">\n<div id="expandedwidget-videoicon1" style="position: absolute; z-index: 900; width: 50px; height: 50px; bottom: 0px; left: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover;" class="expandedwidget-videoicon"></div>\n</div>\n<div id="video2" class="videotab" style="border: 1px solid black; position: relative; float: right; width: 298px; height: 148px; background-color: #9b9393; background-image: url(\''+g[1].img+'\'); background-repeat: no-repeat; background-position: center center; background-size: cover;">\n<div id="expandedwidget-videoicon2" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n</div>\n<div id="video3" class="videotab disabled" style="display:none; border: 1px solid black; position: relative; float: right; width: 198px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+g[2].img+'\');">\n<div id="expandedwidget-videoicon3" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n</div>\n<div id="video4" class="videotab disabled" style="display: none; border: 1px solid black; position: relative; float: right; width: 148px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+g[3].img+'\');">\n<div id="expandedwidget-videoicon4" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n</div>\n</div>'),3===g.length&&(d+='<div id="videoList" style="background-color: #0a0a0a; position: relative; float: left; width: 600px; height: 150px;">\n    <div id="video1" class="videotab" style="border: 1px solid black; position: relative; float: right; width: 198px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+g[0].img+'\');">\n        <div id="expandedwidget-videoicon1" style="position: absolute; z-index: 900; width: 50px; height: 50px; bottom: 0px; left: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover;" class="expandedwidget-videoicon"></div>\n    </div>\n    <div id="video2" class="videotab" style="border: 1px solid black; position: relative; float: right; width: 198px; height: 148px; background-color: #9b9393; background-image: url(\''+g[1].img+'\'); background-repeat: no-repeat; background-position: center center; background-size: cover;">\n        <div id="expandedwidget-videoicon2" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n    </div>\n    <div id="video3" class="videotab" style="border: 1px solid black; position: relative; float: right; width: 198px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+g[2].img+'\');">\n        <div id="expandedwidget-videoicon3" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n    </div>\n    <div id="video4" class="videotab disabled" style="display: none; border: 1px solid black; position: relative; float: right; width: 148px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+g[3].img+'\');">\n        <div id="expandedwidget-videoicon4" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n    </div>\n</div>'),g.length>=4&&(d+='<div id="videoList" style="background-color: #0a0a0a; position: relative; float: left; width: 600px; height: 150px; ">\n<div id="video1" class="videotab" style="border: 1px solid black; position: relative; float: right; width: 147px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+g[0].img+'\');">\n<div id="expandedwidget-videoicon1" style="position: absolute; z-index: 900; width: 50px; height: 50px; bottom: 0px; left: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover;" class="expandedwidget-videoicon"></div>\n</div>\n<div id="video2" class="videotab" style="border: 1px solid black; position: relative; float: right; width: 147px; height: 148px; background-color: #9b9393; background-image: url(\''+g[1].img+'\'); background-repeat: no-repeat; background-position: center center; background-size: cover;">\n<div id="expandedwidget-videoicon2" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n</div>\n<div id="video3" class="videotab" style="border: 1px solid black; position: relative; float: right; width: 147px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+g[2].img+'\');">\n<div id="expandedwidget-videoicon3" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n</div>\n<div id="video4" class="videotab" style=" border: 1px solid black; position: relative; float: right; width: 147px; height: 148px; background-color: #9b9393; background-repeat: no-repeat; background-position: center center; background-size: cover; background-image: url(\''+g[3].img+'\');">\n<div id="expandedwidget-videoicon4" style="width: 50px; height: 50px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-image: url(\'img/youtube.png\'); background-size: cover; position: absolute; z-index: 900; left: 0px;" class="expandedwidget-videoicon"></div>\n</div>\n</div>'),d+=" </div>",c.append(d),$(".close").click(function(){var b,c,d,f;b=(new Date).getTime(),f=b-e,d=a.widgets[h.name].options.title;try{return _gaq.push(["_trackEvent",h.name,"viewed",d,f]),_gaq.push(["_trackTiming",h.name,d,f,"viewed"])}catch(g){c=g}}),$("#mask").click(function(){var b,c,d,f;b=(new Date).getTime(),f=b-e,d=a.widgets[h.name].options.title;try{return _gaq.push(["_trackEvent",h.name,"viewed",d,f]),_gaq.push(["_trackTiming",h.name,d,f,"viewed"])}catch(g){c=g}}),this.videotabs=$(".videotab:not(.disabled)"),this.videotabsiterator=0,$("#video1").click(function(){return $(".videotab.selected").removeClass("selected"),f=g[0].locator,f=f.split("v=")[1],f=f.split("&")[0],$("#embededVideo").empty(),$("#embededVideo").attr("src","http://www.youtube.com/embed/"+f+"?autoplay=1"),$(".expandedwidget-videoicon").css("background-image","url('img/youtube.png')"),$("#expandedwidget-videoicon1").css("background-image","url('img/youtube_gr.png')"),$("#video1").addClass("selected")}),$("#video2").click(function(){return $(".videotab.selected").removeClass("selected"),f=g[1].locator,f=f.split("=")[1],$("#embededVideo").empty(),$("#embededVideo").attr("src","http://www.youtube.com/embed/"+f+"?autoplay=1"),$(".expandedwidget-videoicon").css("background-image","url('img/youtube.png')"),$("#expandedwidget-videoicon2").css("background-image","url('img/youtube_gr.png')"),$("#video2").addClass("selected")}),$("#video3").click(function(){return $(".videotab.selected").removeClass("selected"),f=g[2].locator,f=f.split("=")[1],$("#embededVideo").empty(),$("#embededVideo").attr("src","http://www.youtube.com/embed/"+f+"?autoplay=1"),$(".expandedwidget-videoicon").css("background-image","url('img/youtube.png')"),$("#expandedwidget-videoicon3").css("background-image","url('img/youtube_gr.png')"),$("#video3").addClass("selected")}),$("#video4").click(function(){return $(".videotab.selected").removeClass("selected"),f=g[3].locator,f=f.split("=")[1],$("#embededVideo").empty(),$("#embededVideo").attr("src","http://www.youtube.com/embed/"+f+"?autoplay=1"),$(".expandedwidget-videoicon").css("background-image","url('img/youtube.png')"),$("#expandedwidget-videoicon4").css("background-image","url('img/youtube_gr.png')"),$("#video4").addClass("selected")}),$("#video1").trigger("click"),console.log("videoList -",g)},d}(window.LimePlugin)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.YoutubePlugin=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.init=function(){var a,b,c,d,e;for(this.name="YoutubePlugin",a=void 0,console.info("Initialize YoutubePlugin"),d=this.lime.annotations,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.resource.value.indexOf("geonames")<0&&a.resource.value.indexOf("dbpedia")<0&&a.resource.value.indexOf("youtube")>0?e.push(this.handleAnnotation(a)):e.push(void 0);return e},d.prototype.handleAnnotation=function(a){var b,c,d=this;return b=a.resource.value,b=b.replace("No description found.",""),b.length>=3?(c=this.lime.allocateWidgetSpace(this,{thumbnail:"img/youtube.png",title:""+a.getLabel()+" Video",type:"YoutubeWidget",sortBy:function(){return 1e4*a.start+a.end}}),c.annotation=a,jQuery(c).bind("activate",function(b){var c,e,f;try{f=b.target.options.title,e=d.name,_gaq.push(["_trackEvent",e,"clicked",f])}catch(g){c=g}return d.showAbstractInModalWindow(a,d.getModalContainer())}),a.widgets[this.name]=c,jQuery(a).bind("becomeActive",function(b){var c,e,f;try{e=b.target.widgets[d.name].options.title,f=d.name,_gaq.push(["_trackEvent",f,"becameActive",e])}catch(g){c=g}return a.widgets[d.name].setActive()}),jQuery(a).bind("becomeInactive",function(b){var c,e,f;try{e=b.target.widgets[d.name].options.title,f=d.name,_gaq.push(["_trackEvent",f,"becomeInactive",e])}catch(g){c=g}return a.widgets[d.name].setInactive()})):void 0},d.prototype.showAbstractInModalWindow=function(a,b){var c,d,e,f,g,h=this;return d=$(b),d.css("width","600px"),d.css("height","auto"),f=(new Date).getTime(),c=this.lime,g=a.resource.value,g=g.split("v=")[1],console.info(a.resource.value,g),e='<iframe width="600" height="338" style="margin: 0 auto; display: block;" src="http://www.youtube.com/embed/'+g+'?autoplay=1" frameborder="0" allowfullscreen>\n     <p>Your browser does not support iframes.</p>\n </iframe>',d.append(e),$(".close").click(function(){var b,c,d,e;b=(new Date).getTime(),e=b-f,d=a.widgets[h.name].options.title;try{return _gaq.push(["_trackEvent",h.name,"viewed",d,e]),_gaq.push(["_trackTiming",h.name,d,e,"viewed"])}catch(g){c=g}}),$("#mask").click(function(){var b,c,d,e;b=(new Date).getTime(),e=b-f,d=a.widgets[h.name].options.title;try{return _gaq.push(["_trackEvent",h.name,"viewed",d,e]),_gaq.push(["_trackTiming",h.name,d,e,"viewed"])}catch(g){c=g}})},d
}(window.LimePlugin)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.AdminPlugin=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.init=function(){var a,b=this;return this.name="AdminPlugin",a=void 0,console.info("Initialize AdminPlugin"),$("div .admin").click(function(){return b.lime.player.pause(),b.displayAdminSettingsInModal()})},d.prototype.renderAdminSettingsInModalWindow=function(){var a,b;return b='<iframe allowtransparency="true" src="http://form.jotformeu.com/form/23474683902358" frameborder="0" style="width:100%; height:863px; border:none;" scrolling="no"></iframe>',a=$("#modalContent"),a.css("overflow","auto"),a.append(b)},d.prototype.displayAdminSettingsInModal=function(){var a,b,c,d,e,f;return d=this.lime.player.isFullScreen?$(".modalwindow"):$("#modalWindow"),a=void 0,a=this.lime.player.isFullScreen?$(".mask"):$("#mask"),$(d).css("height","70%"),$(d).css("max-height","1200px"),$(d).empty(),$(d).append('<a href="#" class="close" role="button"><img src="img/close-icon.png" style="width: 22px; height: 22px;"/></a>'),$(d).append('<div id="modalContent" style="height: 95%; width: 100%; position: relative; margin: 0 auto; color: black; "> &nbsp'),$(d).append("</div>"),b=$(window).height(),c=$(window).width(),$(a).css({width:c,height:b}),$(a).fadeIn(100),$(a).fadeTo("fast",.8),e=$(window).height(),f=$(window).width(),$(d).css("top",e/2-$(d).height()/2),$(d).css("left",f/2-$(d).width()/2),$(d).fadeIn(100),$(".close").click(function(b){return b.preventDefault(),$(a).hide(),$(d).hide()}),$(a).click(function(){return $(a).hide(),$(d).hide(),$(d).empty()}),$(window).resize(function(){return b=$(document).height(),c=$(document).width(),$(a).css({width:c,height:b}),e=$(window).height(),f=$(window).width(),$(d).css("top",e/2-$(d).height()/2),$(d).css("left",f/2-$(d).width()/2)}),this.renderAdminSettingsInModalWindow()},d}(window.LimePlugin)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.StatisticsPlugin=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.init=function(){var a,b=this;return this.name="StatisticsPlugin",a=void 0,console.info("Initialize StatisticsPlugin"),$("div .stats").click(function(){return b.lime.player.pause(),b.displayStatisticsInModal()})},d.prototype.renderStatisticsInModalWindow=function(){var a,b;return b='<div class="statistic" ><img src="img/stats.png" style="width: 90%;  display:block; /*images must be set to block in order use auto margins*/ margin:0 auto; /*centers images in most browsers*/   text-align:center; /*centers images in older browsers*/" /></div>',a=$("#modalContent"),a.css("overflow","auto"),a.append(b)},d.prototype.displayStatisticsInModal=function(){var a,b,c,d,e,f;return d=this.lime.player.isFullScreen?$(".modalwindow"):$("#modalWindow"),a=void 0,a=this.lime.player.isFullScreen?$(".mask"):$("#mask"),$(d).css("height","70%"),$(d).css("max-height","1200px"),$(d).empty(),$(d).append('<a href="#" class="close" role="button"><img src="img/close-icon.png" style="width: 22px; height: 22px;"/></a>'),$(d).append('<div id="modalContent" style="height: 95%; width: 100%; position: relative; margin: 0 auto; color: black; "> &nbsp'),$(d).append("</div>"),b=$(window).height(),c=$(window).width(),$(a).css({width:c,height:b}),$(a).fadeIn(100),$(a).fadeTo("fast",.8),e=$(window).height(),f=$(window).width(),$(d).css("top",e/2-$(d).height()/2),$(d).css("left",f/2-$(d).width()/2),$(d).fadeIn(100),$(".close").click(function(b){return b.preventDefault(),$(a).hide(),$(d).hide()}),$(a).click(function(){return $(a).hide(),$(d).hide(),$(d).empty()}),$(window).resize(function(){return b=$(document).height(),c=$(document).width(),$(a).css({width:c,height:b}),e=$(window).height(),f=$(window).width(),$(d).css("top",e/2-$(d).height()/2),$(d).css("left",f/2-$(d).width()/2)}),this.renderStatisticsInModalWindow()},d}(window.LimePlugin)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.UserSettingsPlugin=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.init=function(){var a,b,c,d=this;return this.name="UserSettingsPlugin",a=void 0,console.info("Initialize UserSettingsPlugin"),$("div .usersettings").click(function(){return d.lime.options.pauseOnWidgetopen&&d.lime.player.pause(),d.renderUserSettingsInModalWindow()}),b=$("<div class='vjs-control usersettings' title='User settings' alt='User settings'><div></div></div>"),b.click(function(){return d.lime.options.pauseOnWidgetopen&&d.lime.player.pause(),d.renderUserSettingsInModalWindow()}),$(this.lime.player.buttonContainer).append(b),this.options.permanentWidget?(console.info("Permanent widgets are on."),c=this.lime.allocateWidgetSpace(this,{thumbnail:"img/settingsWidget.png",title:"User settings",type:"UserSettingsWidget",sortBy:function(){return 1e8}}),jQuery(c).bind("activate",function(){return d.lime.options.pauseOnWidgetopen&&d.lime.player.pause(),d.renderUserSettingsInModalWindow()}),_.defer(function(){return c.setActive()})):void 0},d.prototype.defaults={unhidable:[],permanentWidget:!1},d.prototype.getAllWidgetTypes=function(){var a;return a=_(this.lime.widgets).chain().map(function(a){return a.options.type}).uniq().sort().difference(this.defaults.unhidable,"UserSettingsWidget").value()},d.prototype.getHiddenWidgetTypes=function(){return JSON.parse(localStorage.getItem("hiddenWidgetTypes"))||[]},d.prototype.setHiddenWidgetTypes=function(a){var b;return localStorage.setItem("hiddenWidgetTypes",JSON.stringify(a)),b=_(this.getAllWidgetTypes()).difference(a).concat(this.defaults.unhidable),this.lime.updateDeactivatedWidgetStates(b)},d.prototype.hideWidgetType=function(a){var b;return b=this.getHiddenWidgetTypes(),b.push(a),b=_(b).uniq(),this.setHiddenWidgetTypes(b)},d.prototype.unhideWidgetType=function(a){var b,c;return b=this.getHiddenWidgetTypes(),c=b.indexOf(a),b.splice(c,1),this.setHiddenWidgetTypes(b)},d.prototype.renderUserSettingsInModalWindow=function(){var a,b,c,d,e,f,g,h,i=this;for(b=this.getModalContainer(),b.css("width","600px"),b.css("height","auto"),b.css("overflow","auto"),console.info("widget types:",this.getAllWidgetTypes()),b.append('<div class="settingscontent" style="color: white; width: 100%; height: auto; margin-top: 0; background: rgba(0,0,0,0.6);">'),c=$(".settingscontent",b),c.append('<span class="settingstitle" style="font-size: 20px; margin-left: 10px;">LIME player settings </span>'),$(".annotationspatialoverlay",d).click(function(){}),$(".annotationtimelineoverlay",d).click(function(){}),c.append('<p class="settingssection" style="font-size: 16px; margin-left: 10px;"> Widgets </p>\n<form style="margin: 0 auto; text-align: left; font-size: 14px; width: 75%;" >\n  <div class="settingssection widget-types" style="margin: 0 auto;"></div>\n</form>\n<br/>'),d=$("div.settingssection.widget-types",c),h=this.getAllWidgetTypes(),f=0,g=h.length;g>f;f++)e=h[f],a=-1===this.getHiddenWidgetTypes().indexOf(e)?"checked":"",d.append("<div><label><input type='checkbox' name='"+e+"' class='"+e+" setting' "+a+" > Show '"+e+"' widgets</label></div>");return $(".setting",d).click(function(a){var b,c;return b=a.target.name,c=a.target.checked,c?i.unhideWidgetType(b):i.hideWidgetType(b)})},d}(window.LimePlugin)}.call(this),this.UTILS=this.UTILS||new Utils,UTILS.getParameterByName=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.search);return null==d?"":decodeURIComponent(d[1].replace(/\+/g," "))};