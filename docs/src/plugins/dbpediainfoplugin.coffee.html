<!DOCTYPE html><html><head><title>dbpediainfoplugin.coffee</title><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><link rel="stylesheet" media="all" href="../../docco.css"></head><body><div id="container"><div id="background"></div><div id="jump_to">Jump To &hellip;<div id="jump_wrapper"><div id="jump_page"><a href="../../index.html" class="source"><span class="file_name">README</span></a><a href="../../src/annotation.coffee.html" class="source "><span class="base_path">src / </span><span class="file_name">annotation.coffee</span></a><a href="../../src/annotationoverlays.coffee.html" class="source "><span class="base_path">src / </span><span class="file_name">annotationoverlays.coffee</span></a><a href="../../src/cmf.coffee.html" class="source "><span class="base_path">src / </span><span class="file_name">cmf.coffee</span></a><a href="../../src/jquery.scrollTo.coffee.html" class="source "><span class="base_path">src / </span><span class="file_name">jquery.scrollTo.coffee</span></a><a href="../../src/lime.coffee.html" class="source "><span class="base_path">src / </span><span class="file_name">lime.coffee</span></a><a href="../../src/plugin.coffee.html" class="source "><span class="base_path">src / </span><span class="file_name">plugin.coffee</span></a><a href="../../src/plugins/actorplugin.coffee.html" class="source "><span class="base_path">src / plugins / </span><span class="file_name">actorplugin.coffee</span></a><a href="../../src/plugins/bookingplugin.coffee.html" class="source "><span class="base_path">src / plugins / </span><span class="file_name">bookingplugin.coffee</span></a><a href="../../src/plugins/businessplugin.coffee.html" class="source "><span class="base_path">src / plugins / </span><span class="file_name">businessplugin.coffee</span></a><a href="../../src/plugins/characterplugin.coffee.html" class="source "><span class="base_path">src / plugins / </span><span class="file_name">characterplugin.coffee</span></a><a href="../../src/plugins/dbpediainfoplugin.coffee.html" class="source selected"><span class="base_path">src / plugins / </span><span class="file_name">dbpediainfoplugin.coffee</span></a><a href="../../src/plugins/directorplugin.coffee.html" class="source "><span class="base_path">src / plugins / </span><span class="file_name">directorplugin.coffee</span></a><a href="../../src/plugins/geonamesmapplugin.coffee.html" class="source "><span class="base_path">src / plugins / </span><span class="file_name">geonamesmapplugin.coffee</span></a><a href="../../src/plugins/googleweatherplugin.coffee.html" class="source "><span class="base_path">src / plugins / </span><span class="file_name">googleweatherplugin.coffee</span></a><a href="../../src/plugins/help.coffee.html" class="source "><span class="base_path">src / plugins / </span><span class="file_name">help.coffee</span></a><a href="../../src/plugins/ldplugin.coffee.html" class="source "><span class="base_path">src / plugins / </span><span class="file_name">ldplugin.coffee</span></a><a href="../../src/plugins/ldplugin.coffee.html" class="source "><span class="base_path">src / plugins / </span><span class="file_name">ldplugin.coffee</span></a><a href="../../src/plugins/lsiimageplugin.coffee.html" class="source "><span class="base_path">src / plugins / </span><span class="file_name">lsiimageplugin.coffee</span></a><a href="../../src/plugins/lsivideoplugin.coffee.html" class="source "><span class="base_path">src / plugins / </span><span class="file_name">lsivideoplugin.coffee</span></a><a href="../../src/plugins/mediaplugin.coffee.html" class="source "><span class="base_path">src / plugins / </span><span class="file_name">mediaplugin.coffee</span></a><a href="../../src/plugins/objectplugin.coffee.html" class="source "><span class="base_path">src / plugins / </span><span class="file_name">objectplugin.coffee</span></a><a href="../../src/plugins/tvplugin.coffee.html" class="source "><span class="base_path">src / plugins / </span><span class="file_name">tvplugin.coffee</span></a><a href="../../src/plugins/videoplugin.coffee.html" class="source "><span class="base_path">src / plugins / </span><span class="file_name">videoplugin.coffee</span></a><a href="../../src/plugins/youtubeplugin.coffee.html" class="source "><span class="base_path">src / plugins / </span><span class="file_name">youtubeplugin.coffee</span></a><a href="../../src/videojs-adapter.coffee.html" class="source "><span class="base_path">src / </span><span class="file_name">videojs-adapter.coffee</span></a><a href="../../src/widget.coffee.html" class="source "><span class="base_path">src / </span><span class="file_name">widget.coffee</span></a></div></div></div><table cellpadding="0" cellspacing="0"><thead><tr><th class="docs"><h1>dbpediainfoplugin.coffee</h1><div class="filepath">src/plugins/</div></th><th class="code"></th></tr></thead><tbody><tr id="section-1"><td class="docs"><div class="pilwrap"><a href="#section-1" class="pilcrow">&#182;</a></div>
</td><td class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nb">window</span><span class="p">.</span><span class="nx">DBPediaInfoPlugin</span> <span class="k">extends</span> <span class="nb">window</span><span class="p">.</span><span class="nx">LimePlugin</span>
  <span class="nv">init: </span><span class="o">-&gt;</span>
    <span class="vi">@name = </span><span class="s">&#39;DBPediaInfoPlugin&#39;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">info</span> <span class="s">&quot;Initialize </span><span class="si">#{</span><span class="nx">@name</span><span class="si">}</span><span class="s">&quot;</span>
    <span class="k">for</span> <span class="nx">annotation</span> <span class="k">in</span> <span class="nx">@lime</span><span class="p">.</span><span class="nx">annotations</span>
      <span class="k">if</span> <span class="nx">annotation</span><span class="p">.</span><span class="nx">resource</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s">&quot;dbpedia&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">and</span> <span class="nx">annotation</span><span class="p">.</span><span class="nx">relation</span><span class="p">.</span><span class="nx">value</span> <span class="k">in</span> <span class="p">[</span><span class="s">&#39;http://connectme.at/ontology#explicitlyShows&#39;</span><span class="p">,</span> <span class="s">&#39;http://connectme.at/ontology#explicitlyMentions&#39;</span><span class="p">,</span> <span class="s">&#39;http://connectme.at/ontology#implicitlyShows&#39;</span> <span class="p">,</span> <span class="s">&#39;http://connectme.at/ontology#implicitlyMentions&#39;</span><span class="p">]</span>
        <span class="nx">@handleAnnotation</span> <span class="nx">annotation</span></pre></div></td></tr><tr id="section-2"><td class="docs"><div class="pilwrap"><a href="#section-2" class="pilcrow">&#182;</a></div><p>Putting this into a function keeps the annotation in the context</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nv">handleAnnotation: </span><span class="nf">(annotation) -&gt;</span></pre></div></td></tr><tr id="section-3"><td class="docs"><div class="pilwrap"><a href="#section-3" class="pilcrow">&#182;</a></div><p>console.info "The annotation #{annotation.resource} looks interesting, get the whole entity so we can show it in a widget!", annotation</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">annotation</span><span class="p">.</span><span class="nx">entityPromise</span><span class="p">.</span><span class="nx">done</span> <span class="o">=&gt;</span></pre></div></td></tr><tr id="section-4"><td class="docs"><div class="pilwrap"><a href="#section-4" class="pilcrow">&#182;</a></div><p>console.info "entities for annotation #{annotation.resource} loaded, create a widget for it!", annotation</p>
</td><td class="code"><div class="highlight"><pre>      <span class="nv">nonConcept = </span><span class="nx">annotation</span><span class="p">.</span><span class="nx">getDescription</span><span class="p">()</span>
      <span class="nv">nonConcept = </span><span class="nx">nonConcept</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s">&quot;No description found.&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">nonConcept</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">)</span>
        <span class="nv">widget = </span><span class="nx">@lime</span><span class="p">.</span><span class="nx">allocateWidgetSpace</span> <span class="nx">@</span><span class="p">,</span>
          <span class="nv">thumbnail: </span><span class="s">&quot;img/info.png&quot;</span> <span class="c1"># should go into CSS</span>
          <span class="nv">title: </span><span class="s">&quot;</span><span class="si">#{</span><span class="nx">annotation</span><span class="p">.</span><span class="nx">getLabel</span><span class="p">()</span><span class="si">}</span><span class="s"> Info&quot;</span>
          <span class="nv">type: </span><span class="s">&quot;DbpediaInfoWidget&quot;</span>
          <span class="nv">sortBy: </span><span class="o">-&gt;</span>
            <span class="mi">10000</span> <span class="o">*</span> <span class="nx">annotation</span><span class="p">.</span><span class="nx">start</span> <span class="o">+</span> <span class="nx">annotation</span><span class="p">.</span><span class="nx">end</span></pre></div></td></tr><tr id="section-5"><td class="docs"><div class="pilwrap"><a href="#section-5" class="pilcrow">&#182;</a></div><p>We're going to need the annotation for the widget's <code>activate</code> event</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nv">widget.annotation = </span><span class="nx">annotation</span></pre></div></td></tr><tr id="section-6"><td class="docs"><div class="pilwrap"><a href="#section-6" class="pilcrow">&#182;</a></div><p>widget was activated, we show details now</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">jQuery</span><span class="p">(</span><span class="nx">widget</span><span class="p">).</span><span class="nx">bind</span> <span class="s">&#39;activate&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span></pre></div></td></tr><tr id="section-7"><td class="docs"><div class="pilwrap"><a href="#section-7" class="pilcrow">&#182;</a></div><p>@getModalContainer().html @showAbstractInModalWindow annotation</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">@showAbstractInModalWindow</span> <span class="nx">annotation</span><span class="p">,</span> <span class="nx">@getModalContainer</span><span class="p">()</span></pre></div></td></tr><tr id="section-8"><td class="docs"><div class="pilwrap"><a href="#section-8" class="pilcrow">&#182;</a></div><p>Hang the widget on the annotation</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">annotation</span><span class="p">.</span><span class="nx">widgets</span><span class="p">[</span><span class="nx">@name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">widget</span>

        <span class="nx">jQuery</span><span class="p">(</span><span class="nx">annotation</span><span class="p">).</span><span class="nx">bind</span> <span class="s">&quot;becomeActive&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span>
          <span class="nx">annotation</span><span class="p">.</span><span class="nx">widgets</span><span class="p">[</span><span class="nx">@name</span><span class="p">].</span><span class="nx">setActive</span><span class="p">()</span>

        <span class="nx">jQuery</span><span class="p">(</span><span class="nx">annotation</span><span class="p">).</span><span class="nx">bind</span> <span class="s">&quot;becomeInactive&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span>
          <span class="nx">annotation</span><span class="p">.</span><span class="nx">widgets</span><span class="p">[</span><span class="nx">@name</span><span class="p">].</span><span class="nx">setInactive</span><span class="p">()</span>

        <span class="nx">@getLSIImages</span> <span class="nx">annotation</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="nx">widget</span><span class="p">).</span><span class="nx">bind</span> <span class="s">&quot;leftarrow&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">info</span> <span class="s">&#39;left arrow pressed&#39;</span><span class="p">,</span> <span class="nx">e</span>


  <span class="nv">getLSIImages: </span><span class="nf">(annotation) -&gt;</span>
    <span class="nx">@lime</span><span class="p">.</span><span class="nx">cmf</span><span class="p">.</span><span class="nx">getLSIImagesForTerm</span> <span class="nx">annotation</span><span class="p">.</span><span class="nx">resource</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="k">if</span> <span class="nx">err</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span> <span class="s">&quot;Error getting LSI images resources&quot;</span><span class="p">,</span> <span class="nx">err</span>
      <span class="k">else</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">info</span> <span class="s">&quot;LSI resources for&quot;</span><span class="p">,</span> <span class="nx">annotation</span><span class="p">,</span> <span class="nx">res</span>
        <span class="nv">annotation.lsiImageResources = </span><span class="nx">_</span><span class="p">(</span><span class="nx">res</span><span class="p">).</span><span class="nx">map</span> <span class="nf">(resultset) -&gt;</span>
          <span class="nv">entity =</span>
            <span class="nv">image: </span><span class="nx">resultset</span><span class="p">.</span><span class="nx">image</span><span class="p">.</span><span class="nx">value</span>
          <span class="nx">entity</span>

        <span class="nv">annotation.getLsiImagesResources = </span><span class="o">-&gt;</span>
          <span class="nx">@lsiImageResources</span></pre></div></td></tr><tr id="section-9"><td class="docs"><div class="pilwrap"><a href="#section-9" class="pilcrow">&#182;</a></div><p>Widget-specific detail-rendering</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nv">showAbstractInModalWindow: </span><span class="nf">(annotation, outputElement) -&gt;</span>
    <span class="nv">modalContent = </span><span class="nx">$</span><span class="p">(</span><span class="nx">outputElement</span><span class="p">)</span>
    <span class="nx">modalContent</span><span class="p">.</span><span class="nx">css</span> <span class="s">&quot;width&quot;</span><span class="p">,</span> <span class="s">&quot;600px&quot;</span>
    <span class="nx">modalContent</span><span class="p">.</span><span class="nx">css</span> <span class="s">&quot;height&quot;</span><span class="p">,</span> <span class="s">&quot;auto&quot;</span>
    <span class="nv">startTime = </span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">()</span>
    <span class="nv">label = </span><span class="nx">annotation</span><span class="p">.</span><span class="nx">getLabel</span><span class="p">()</span>
    <span class="nv">page = </span><span class="nx">annotation</span><span class="p">.</span><span class="nx">getPage</span><span class="p">()</span></pre></div></td></tr><tr id="section-10"><td class="docs"><div class="pilwrap"><a href="#section-10" class="pilcrow">&#182;</a></div><h1>#</h1>
</td><td class="code"><div class="highlight"><pre>    <span class="o">--</span> <span class="nx">added</span> <span class="mi">29</span><span class="p">.</span><span class="nx">apr</span><span class="p">.</span><span class="mi">2013</span> <span class="o">--</span>
     <span class="nv">LSIimages = </span><span class="nx">list</span> <span class="k">of</span> <span class="nx">images</span> <span class="nx">from</span> <span class="nx">the</span> <span class="nx">LSI</span> <span class="nx">that</span> <span class="nx">target</span> <span class="nx">the</span> <span class="nx">current</span> <span class="nx">annotation</span><span class="s">&#39;s DBPedia resource URI</span>
<span class="s">     example:</span>
<span class="s">     LAIImages = annotation.getLSIVideosFromTerm (annotation.resource.value,cb)</span>

<span class="s">    a LSIImages can have the following structure:</span>
<span class="s">    LSIImages = [</span>
<span class="s">                  {</span>
<span class="s">                  image:&quot;imageURI&quot;,</span>
<span class="s">                  hasKeyword: {&quot;DBPedia resource URI 1&quot;, &quot;DBPedia resource URI 2&quot;, &quot;DBPedia resource URI 3&quot;, ... }</span>
<span class="s">                  },</span>

<span class="s">                  {</span>
<span class="s">                  image:&quot;imageURI&quot;,</span>
<span class="s">                  hasKeyword: {&quot;DBPedia resource URI 1&quot;, &quot;DBPedia resource URI 2&quot;, &quot;DBPedia resource URI 3&quot;, ... }</span>
<span class="s">                  },</span>
<span class="s">                  ...</span>
<span class="s">                ]</span>

<span class="s">#DIVIDER</span>

<span class="s">    lime = this.lime</span>
<span class="s">    comment = annotation.getDescription()</span>
<span class="s">    maintext = comment</span>
<span class="s">    secondarytext = &quot;&quot;</span>
<span class="s">    if (maintext.length &gt;= 240)</span>
<span class="s">      n = maintext.length</span>
<span class="s">      if maintext.length &gt;= 240</span>
<span class="s">        tmptext = maintext.split(&quot; &quot;)</span>
<span class="s">        n = tmptext.length</span>
<span class="s">        textsum = &quot;&quot;</span>
<span class="s">        i = 0</span>
<span class="s">        while textsum.length &lt; 200</span>
<span class="s">          textsum += tmptext[i] + &quot; &quot;</span>
<span class="s">          i++</span>
<span class="s">        maintext = textsum</span>
<span class="s">        y = i</span>
<span class="s">        while y &lt; n</span>
<span class="s">          secondarytext += tmptext[y] + &quot; &quot;</span>
<span class="s">          y++</span>

<span class="s">    depiction = annotation.getDepiction(without: &#39;</span><span class="nx">thumb</span><span class="s">&#39;)</span>
<span class="s">    if(depiction == null)</span>
<span class="s">      depiction = &quot;img/noimagenew.png&quot;</span>
<span class="s">    lsiImageList = annotation.getLsiImagesResources?() or []</span>
<span class="s">    console.log &quot;Asociated images &quot;,label ,lsiImageList</span>


<span class="s">#DIVIDER</span>
<span class="s">      -- added 29.apr.2013 --</span>
<span class="s">      Extend interface logic (below) to fit LSIImages by creating a new tile with 1 or more images</span>

<span class="s">#DIVIDER</span>
<span class="s">    if(secondarytext.length &gt; 2)</span>
<span class="s">      if(lsiImageList.length &gt;0)</span>
<span class="s">        result = &quot;&quot;&quot;</span>
<span class="s">               &lt;div id=&quot;infoWidgetExpanded&quot; style=&quot;position: relative; height: 600px; width: auto; &quot;&gt;</span>
<span class="s">               &lt;div id=&quot;infoMainText&quot; style=&quot;position: relative; float: right; background-color: #242424; width: 300px; height: 600px; font-family: caviardreamsregular;&quot;&gt;</span>
<span class="s">               &lt;span style=&quot;color: #f1f1f1; float: left; position: absolute; z-index: 900; left: 2%; top: 2%; width: 96%; font-size: 25px; height: auto;&quot;&gt;#{comment}&lt;/span&gt;</span>
<span class="s">               &lt;div style=&quot;position: absolute; z-index: 900; width: 100px; height: 50px; right: 0px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-size: contain; background-image: url(&#39;</span><span class="nx">img</span><span class="o">/</span><span class="mi">120</span><span class="nx">px</span><span class="o">-</span><span class="nx">DBpediaLogo</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">png</span><span class="s">&#39;);&quot;&gt;&lt;/div&gt;</span>
<span class="s">               &lt;/div&gt;</span>

<span class="s">               &lt;div id=&quot;infoMainPicture&quot; style=&quot;position: relative; float: right; width: 300px; height: 300px; background-color: #6ab1e7;&quot;&gt;</span>
<span class="s">                  &lt;div id=&quot;pic&quot; style=&quot;position: relative; float: left; height: 100%; background-image: url(&#39;</span><span class="c1">#{depiction}&#39;); background-repeat: no-repeat; background-position: center center; background-size: cover; width: 100%;&quot;&gt;</span>
                   <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;icon&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;border-right: 1px dotted lightgray; float: left; background-color: </span><span class="err">#</span><span class="s">3f3e3e; position: absolute; z-index: 9000; right: 0px; bottom: 0px; width: 50px; height: 50px;&quot;</span><span class="o">&gt;</span>
                   <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: relative; font-family: &#39;Times New Roman&#39;,Times,serif; font-style: italic; font-weight: bold; font-size: 23px; top: 21%; left: 45%; color: rgb(112, 196, 243);&quot;</span><span class="o">&gt;</span><span class="nx">i</span><span class="o">&lt;/</span><span class="nx">span</span><span class="o">&gt;</span>
                   <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                   <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                   <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: absolute; left: 0px; bottom: 0; width: 300px; height: 100px;&quot;</span><span class="o">&gt;</span>
                   <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;titlebackground&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;float: left; position: absolute; z-index: 900; width: 100%; bottom: 0px; background-color: </span><span class="err">#</span><span class="s">000000; left: 0px; top: 0px; height: 100%; opacity: 0.5;&quot;</span><span class="o">&gt;</span>
                   <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;titletext&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;font-family: CaviarDreamsBold; font-size: 29px; line-height: 140%; position: absolute; z-index: 900; left: 5px; width: 100%; bottom: 0px; height: 100%; color: </span><span class="err">#</span><span class="s">fcf7f7; opacity: 1.0;&quot;</span><span class="o">&gt;</span><span class="c1">#{label}&lt;/span&gt;&lt;/div&gt;</span>
                <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>

                <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;infoSecondText&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot; display: none; font-family: CaviarDreamsRegular; font-size: 25px; color: </span><span class="err">#</span><span class="s">f1f1f1; position: relative; float: right; background-color: </span><span class="err">#</span><span class="s">242424; vertical-align: middle; width: 300px; height: 300px; text-align: left; line-height: 1.2;&quot;</span><span class="o">&gt;</span>
                  <span class="c1">#{secondarytext}</span>
                <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>

                <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;infoSecondPic&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;background-repeat: no-repeat; background-image: url(&#39;</span><span class="si">#{</span><span class="nx">lsiImageList</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">image</span><span class="si">}</span><span class="s">&#39;); background-position: center center; background-size: cover; position: relative; float: right; width: 300px; height: 300px;&quot;</span><span class="o">&gt;&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>


               <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
               <span class="s">&quot;&quot;&quot;</span>
<span class="s">      else</span>
<span class="s">        result = &quot;&quot;&quot;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;infoWidgetExpanded&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: relative; height: 600px; width: auto; &quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;infoMainText&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: relative; float: right; background-color: </span><span class="err">#</span><span class="s">242424; width: 300px; height: 600px; font-family: caviardreamsregular;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;color: </span><span class="err">#</span><span class="s">f1f1f1; float: left; position: absolute; z-index: 900; left: 2%; top: 2%; width: 96%; font-size: 25px; height: auto;&quot;</span><span class="o">&gt;</span><span class="c1">#{comment}&lt;/span&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: absolute; z-index: 900; width: 100px; height: 50px; right: 0px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-size: contain; background-image: url(&#39;img/120px-DBpediaLogo.svg.png&#39;);&quot;</span><span class="o">&gt;&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>

                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;infoMainPicture&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: relative; float: right; width: 300px; height: 300px; background-color: </span><span class="err">#</span><span class="s">6ab1e7;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;pic&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: relative; float: left; height: 100%; background-image: url(&#39;</span><span class="si">#{</span><span class="nx">depiction</span><span class="si">}</span><span class="s">&#39;); background-repeat: no-repeat; background-position: center center; background-size: cover; width: 100%;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;icon&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;border-right: 1px dotted lightgray; float: left; background-color: </span><span class="err">#</span><span class="s">3f3e3e; position: absolute; z-index: 9000; right: 0px; bottom: 0px; width: 50px; height: 50px;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: relative; font-family: &#39;Times New Roman&#39;,Times,serif; font-style: italic; font-weight: bold; font-size: 23px; top: 21%; left: 45%; color: rgb(112, 196, 243);&quot;</span><span class="o">&gt;</span><span class="nx">i</span><span class="o">&lt;/</span><span class="nx">span</span><span class="o">&gt;</span>
                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: absolute; left: 0px; bottom: 0; width: 300px; height: 100px;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;titlebackground&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;float: left; position: absolute; z-index: 900; width: 100%; bottom: 0px; background-color: </span><span class="err">#</span><span class="s">000000; left: 0px; top: 0px; height: 100%; opacity: 0.5;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;titletext&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;font-family: CaviarDreamsBold; font-size: 29px; line-height: 140%; position: absolute; z-index: 900; left: 5px; width: 100%; bottom: 0px; height: 100%; color: </span><span class="err">#</span><span class="s">fcf7f7; opacity: 1.0;&quot;</span><span class="o">&gt;</span><span class="c1">#{label}&lt;/span&gt;&lt;/div&gt;</span>
                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>

                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;infoSecondText&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;display: none; font-family: CaviarDreamsRegular; font-size: 25px; color: </span><span class="err">#</span><span class="s">f1f1f1; position: relative; float: right; background-color: </span><span class="err">#</span><span class="s">242424; vertical-align: middle; width: 300px; height: 300px; text-align: left; line-height: 1.2;&quot;</span><span class="o">&gt;</span>
                       <span class="c1">#{secondarytext}</span>
                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>

                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;infoSecondPic&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot; background-repeat: no-repeat; background-image: url(&#39;</span><span class="si">#{</span><span class="nx">depiction</span><span class="si">}</span><span class="s">&#39;); background-position: center center; background-size: cover; position: relative; float: right; width: 300px; height: 300px; opacity: 0;&quot;</span><span class="o">&gt;&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>


                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                 <span class="s">&quot;&quot;&quot;</span>
<span class="s">    else</span>
<span class="s">      if(lsiImageList.length &gt;0)</span>
<span class="s">        result = &quot;&quot;&quot;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;infoWidgetExpanded&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: relative; height: 600px; width: auto; &quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;infoMainText&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: relative; float: right; background-color: </span><span class="err">#</span><span class="s">242424; width: 300px; height: 300px; font-family: caviardreamsregular;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;color: </span><span class="err">#</span><span class="s">f1f1f1; float: left; position: absolute; z-index: 900; left: 2%; top: 2%; width: 96%; font-size: 25px; height: auto;&quot;</span><span class="o">&gt;</span><span class="c1">#{maintext}&lt;/span&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: absolute; z-index: 900; width: 100px; height: 50px; right: 0px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-size: contain; background-image: url(&#39;img/120px-DBpediaLogo.svg.png&#39;);&quot;</span><span class="o">&gt;&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>

                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;infoMainPicture&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: relative; float: right; width: 300px; height: 300px; background-color: </span><span class="err">#</span><span class="s">6ab1e7;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;pic&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: relative; float: left; height: 100%; background-image: url(&#39;</span><span class="si">#{</span><span class="nx">depiction</span><span class="si">}</span><span class="s">&#39;); background-repeat: no-repeat; background-position: center center; background-size: cover; width: 100%;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;icon&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;border-right: 1px dotted lightgray; float: left; background-color: </span><span class="err">#</span><span class="s">3f3e3e; position: absolute; z-index: 9000; right: 0px; bottom: 0px; width: 50px; height: 50px;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: relative; font-family: &#39;Times New Roman&#39;,Times,serif; font-style: italic; font-weight: bold; font-size: 23px; top: 21%; left: 45%; color: rgb(112, 196, 243);&quot;</span><span class="o">&gt;</span><span class="nx">i</span><span class="o">&lt;/</span><span class="nx">span</span><span class="o">&gt;</span>
                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: absolute; left: 0px; bottom: 0; width: 300px; height: 100px;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;titlebackground&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;float: left; position: absolute; z-index: 900; width: 100%; bottom: 0px; background-color: </span><span class="err">#</span><span class="s">000000; left: 0px; top: 0px; height: 100%; opacity: 0.5;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;titletext&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;font-family: CaviarDreamsBold; font-size: 29px; line-height: 140%; position: absolute; z-index: 900; left: 5px; width: 100%; bottom: 0px; height: 100%; color: </span><span class="err">#</span><span class="s">fcf7f7; opacity: 1.0;&quot;</span><span class="o">&gt;</span><span class="c1">#{label}&lt;/span&gt;&lt;/div&gt;</span>
                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>

                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;infoSecondText&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;font-family: CaviarDreamsRegular; font-size: 25px; color: </span><span class="err">#</span><span class="s">f1f1f1; position: relative; float: right; background-color: </span><span class="err">#</span><span class="s">242424; vertical-align: middle; width: 300px; height: 300px; text-align: left; line-height: 1.2; display: none;&quot;</span><span class="o">&gt;</span>

                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>

                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;infoSecondPic&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;background-repeat: no-repeat; background-image: url(&#39;</span><span class="si">#{</span><span class="nx">lsiImageList</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">image</span><span class="si">}</span><span class="s">&#39;); background-position: center center; background-size: cover; position: relative; float: right; width: 300px; height: 300px; display: block;&quot;</span><span class="o">&gt;&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>


                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                 <span class="s">&quot;&quot;&quot;</span>
<span class="s">      else</span>
<span class="s">        result = &quot;&quot;&quot;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;infoWidgetExpanded&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: relative; height: 600px; width: auto; &quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;infoMainText&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: relative; float: right; background-color: </span><span class="err">#</span><span class="s">242424; width: 300px; height: 300px; font-family: caviardreamsregular;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;color: </span><span class="err">#</span><span class="s">f1f1f1; float: left; position: absolute; z-index: 900; left: 2%; top: 2%; width: 96%; font-size: 25px; height: auto;&quot;</span><span class="o">&gt;</span><span class="c1">#{maintext}&lt;/span&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: absolute; z-index: 900; width: 100px; height: 50px; right: 0px; bottom: 0px; background-repeat: no-repeat; background-position: center center; background-size: contain; background-image: url(&#39;img/120px-DBpediaLogo.svg.png&#39;);&quot;</span><span class="o">&gt;&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>

                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;infoMainPicture&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: relative; float: right; width: 300px; height: 300px; background-color: </span><span class="err">#</span><span class="s">6ab1e7;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;pic&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: relative; float: left; height: 100%; background-image: url(&#39;</span><span class="si">#{</span><span class="nx">depiction</span><span class="si">}</span><span class="s">&#39;); background-repeat: no-repeat; background-position: center center; background-size: cover; width: 100%;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;icon&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;border-right: 1px dotted lightgray; float: left; background-color: </span><span class="err">#</span><span class="s">3f3e3e; position: absolute; z-index: 9000; right: 0px; bottom: 0px; width: 50px; height: 50px;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: relative; font-family: &#39;Times New Roman&#39;,Times,serif; font-style: italic; font-weight: bold; font-size: 23px; top: 21%; left: 45%; color: rgb(112, 196, 243);&quot;</span><span class="o">&gt;</span><span class="nx">i</span><span class="o">&lt;/</span><span class="nx">span</span><span class="o">&gt;</span>
                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;position: absolute; left: 0px; bottom: 0; width: 300px; height: 100px;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;titlebackground&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;float: left; position: absolute; z-index: 900; width: 100%; bottom: 0px; background-color: </span><span class="err">#</span><span class="s">000000; left: 0px; top: 0px; height: 100%; opacity: 0.5;&quot;</span><span class="o">&gt;</span>
                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;titletext&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;font-family: CaviarDreamsBold; font-size: 29px; line-height: 140%; position: absolute; z-index: 900; left: 5px; width: 100%; bottom: 0px; height: 100%; color: </span><span class="err">#</span><span class="s">fcf7f7; opacity: 1.0;&quot;</span><span class="o">&gt;</span><span class="c1">#{label}&lt;/span&gt;&lt;/div&gt;</span>
                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>

                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;infoSecondText&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;font-family: CaviarDreamsRegular; font-size: 25px; color: </span><span class="err">#</span><span class="s">f1f1f1; position: relative; float: right; background-color: </span><span class="err">#</span><span class="s">242424; vertical-align: middle; width: 300px; height: 300px; text-align: left; line-height: 1.2; display: none;&quot;</span><span class="o">&gt;</span>

                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>

                 <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s">&quot;infoSecondPic&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s">&quot;background-repeat: no-repeat; background-image: url(&#39;</span><span class="si">#{</span><span class="nx">depiction</span><span class="si">}</span><span class="s">&#39;); background-position: center center; background-size: cover; position: relative; float: right; width: 300px; height: 300px; display: none;&quot;</span><span class="o">&gt;&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>


                 <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
                 <span class="s">&quot;&quot;&quot;</span>

<span class="s">    modalContent.append result</span>


<span class="err">#</span><span class="s">DIVIDER</span>
<span class="s">    $(&quot;.close&quot;).click (e) =&gt;</span>
<span class="s">      endTime = new Date().getTime()</span>
<span class="s">      timeSpent = endTime - startTime</span>
<span class="s">      eventLabel = annotation.widgets[@.name].options.title</span>
<span class="s">      console.log &quot;: </span><span class="si">#{</span><span class="nx">eventLabel</span><span class="si">}</span><span class="s"> was viewed </span><span class="si">#{</span><span class="nx">timeSpent</span><span class="si">}</span><span class="s"> msec.&quot;</span>

<span class="s">    $(&#39;</span><span class="err">#</span><span class="s">mask&#39;).click (e) =&gt;</span>
<span class="s">      endTime = new Date().getTime()</span>
<span class="s">      timeSpent = endTime - startTime</span>
<span class="s">      eventLabel = annotation.widgets[@.name].options.title</span>
<span class="s">      console.log &quot;: </span><span class="si">#{</span><span class="nx">eventLabel</span><span class="si">}</span><span class="s"> was viewed </span><span class="si">#{</span><span class="nx">timeSpent</span><span class="si">}</span><span class="s"> msec.&quot;</span>

</pre></div></td></tr><tr id="section-11"><td class="docs"><div class="pilwrap"><a href="#section-11" class="pilcrow">&#182;</a></div><h1>#</h1>
</td><td class="code"><div class="highlight"><pre>undefined</pre></div></td></tr><tr id="section-12"><td class="docs"><div class="pilwrap"><a href="#section-12" class="pilcrow">&#182;</a></div><h1>#</h1>
</td><td class="code"><div class="highlight"><pre>undefined</pre></div></td></tr><tr id="section-13"><td class="docs"><div class="pilwrap"><a href="#section-13" class="pilcrow">&#182;</a></div><h1>#</h1>
</td><td class="code"><div class="highlight"><pre>undefined</pre></div></td></tr><tr id="section-14"><td class="docs"><div class="pilwrap"><a href="#section-14" class="pilcrow">&#182;</a></div><p>widget controls</p>
</td><td class="code"><div class="highlight"><pre>undefined</pre></div></td></tr></tbody></table><div id="projectname"><a href="../../index.html">LIME - Linked Media Player</a></div></div></body></html>